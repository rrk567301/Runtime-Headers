@class NSUUID, NSString, NWUUIDMapper, NWAccumulator, NSMutableDictionary, NSDictionary, AnalyticsWorkspace, NSMutableArray, NSObject;
@protocol OS_dispatch_queue, OS_dispatch_source, OS_nw_activity;

@interface NWActivityHandler : NSObject <SymptomsCAObserverDelegate, ConfigurableObjectProtocol, SymptomAdditionalProtocol, ManagedEventInfoProtocol> {
    NSObject<OS_dispatch_queue> *_metricsQueue;
    NSObject<OS_dispatch_source> *_metricCollectionTimer;
    double _lastCellularTriggerTime;
    double _lastWiFiTriggerTime;
    unsigned int _outstandingWiFiFragments;
    unsigned short _L2MetricCount;
    AnalyticsWorkspace *_workspace;
    BOOL _cellFragmentRequestOutstanding;
    BOOL _analyticsObserverConfigured;
    unsigned long long _metricsDataWritesBudget;
    unsigned char _dbWriteState;
    NSObject<OS_nw_activity> *_batteryActivity;
    unsigned int _personalHotspotActivityState;
    NSObject<OS_nw_activity> *_softAPClientActivity;
    NSObject<OS_nw_activity> *_wifiNanClientActivity;
    NSObject<OS_nw_activity> *_softAPAndWiFiNanClientActivity;
    id _relayReadyObserver;
    BOOL _completedInitialization;
}

@property (readonly, nonatomic) NSMutableDictionary *mappedMetrics;
@property (readonly, nonatomic) NWUUIDMapper *nullUUIDMapper;
@property (readonly, nonatomic) NSUUID *nullUUID;
@property (readonly, nonatomic) NSMutableArray *currentActivities;
@property (readonly, nonatomic) NSMutableArray *completeActivities;
@property (retain, nonatomic) NSUUID *lastWiFiActivity;
@property (retain, nonatomic) NSDictionary *lastCellularFragment;
@property (retain, nonatomic) NWAccumulator *batteryAccumulator;
@property (retain, nonatomic) NWAccumulator *batteryAccumulatorSnapshot;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

+ (id)sharedInstance;
+ (id)configureClass:(id)a0;
+ (id)sharedMetricsQueue;

- (void)dealloc;
- (id)init;
- (void).cxx_destruct;
- (void)observeValueForKeyPath:(id)a0 ofObject:(id)a1 change:(id)a2 context:(void *)a3;
- (unsigned char)_timestampTwoHourBucketForTime:(double)a0;
- (void)_handleL2Start:(id)a0;
- (void)processSymptom:(id)a0;
- (void)_collectCellularFragment;
- (void)_convertPLMNToDecimal:(id)a0 mcc:(int *)a1 mnc:(int *)a2;
- (id)_convertQueueStats:(id)a0 forInterfaceType:(int)a1;
- (id)_createDeviceReportForActivityType:(int)a0 andDomain:(unsigned int)a1;
- (id)_createSFL2Report;
- (void)_deliverCellularFragment:(id)a0;
- (void)_dumpState:(int)a0;
- (id)_getBundleNameFromPid:(int)a0;
- (void)_handleCFNetworkItem:(id)a0;
- (void)_handleCellularItem:(id)a0;
- (void)_handleClientMetric:(id)a0 forBundleID:(id)a1;
- (void)_handleEpilogue:(id)a0;
- (void)_handleL2Stop:(id)a0;
- (void)_handleNWConnectionStatistics:(id)a0 effectivePid:(int)a1;
- (void)_handleStartActivity:(id)a0;
- (BOOL)_isDBSizeWithinThreshold;
- (void)_pruneActivityLists;
- (void)_pruneOldMappings;
- (BOOL)_saveMetricWithUUIDS:(id)a0 parentUUID:(id)a1 withData:(id)a2 ofType:(int)a3;
- (void)_sendCAEvent:(id)a0 forReport:(id)a1;
- (void)_sendCAEvent:(id)a0 forReportDictionary:(id)a1;
- (void)_sendDictionaryMetric:(id)a0 ofType:(int)a1 forActivities:(id)a2 parentActivity:(id)a3 additionalItems:(id)a4;
- (void)_sendMetric:(id)a0 ofType:(int)a1 forActivities:(id)a2 parentActivity:(id)a3 additionalItems:(id)a4;
- (void)_startL2Streaming;
- (void)_stopL2Streaming;
- (unsigned char)_timestampTwoHourBucketForCurrentTime;
- (void)_triggerWiFiMetric;
- (void)_updateL2MetricLoggingRequests;
- (id)analyticsWorkspace;
- (int)configureInstance:(id)a0;
- (BOOL)configuredForMetricStreaming;
- (id)createValidJSONObject:(id)a0 atPath:(id)a1;
- (id)dbWriteStateToString:(unsigned char)a0;
- (void)enableDBWrites;
- (void)generateInfoForId:(unsigned long long)a0 context:(const char *)a1 uuid:(id)a2 completionBlock:(id /* block */)a3;
- (void)handleDBEvent:(unsigned char)a0;
- (void)handleEvent:(id)a0 forEventName:(id)a1;
- (id)mapperForUUID:(id)a0 reason:(int)a1;
- (BOOL)noteSymptom:(id)a0;
- (void)personalHotspotClientStateChanged:(id)a0 oldValue:(unsigned int)a1 newValue:(unsigned int)a2;
- (void)powerStateChanged:(BOOL)a0;
- (id)serialNumberForInternalBuilds;
- (void)setUpBatteryAccumulator;
- (void)streamAWDMetric:(id)a0 withIdentifier:(unsigned int)a1 additionalDictionaryItems:(id)a2;
- (void)streamDictionaryMetric:(id)a0 additionalDictionaryItems:(id)a1;
- (void)traverseObject:(id)a0 atPath:(id)a1;
- (BOOL)writesToDBAllowed;

@end
