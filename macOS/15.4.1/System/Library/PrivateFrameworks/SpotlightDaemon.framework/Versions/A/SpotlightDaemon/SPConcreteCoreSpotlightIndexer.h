@class NSMutableArray, NSString, NSSet, NSMapTable, NSMutableSet, SPCoreSpotlightIndexer, NSObject;
@protocol OS_dispatch_queue, OS_dispatch_source, OS_os_transaction;

@interface SPConcreteCoreSpotlightIndexer : NSObject {
    _Atomic unsigned int _maintenanceOperations;
    int *_cancelPtr;
    BOOL _suspended;
    BOOL _softSuspended;
    BOOL _suspending;
    BOOL _scheduledStringsCleanup;
    NSMutableSet *_reindexAllDelegateBundleIDs;
    double _lastPreheat;
    double _lastTTLPass;
    unsigned long long _createCount;
    BOOL _hasAssertion;
    double _assertionEndTime;
    NSMutableSet *_assertedBundleIds;
    BOOL _tryOpenJwlIndex;
    BOOL _readOnly;
    NSMutableArray *_blocksToRunWhenFinishedDraining;
}

@property (weak, nonatomic) SPCoreSpotlightIndexer *owner;
@property (nonatomic) struct __SI { } *index;
@property (nonatomic) struct __SI { } *jwlIndex;
@property (nonatomic) struct __SIResultQueue { } *resultQueue;
@property (retain, nonatomic) NSObject<OS_dispatch_queue> *indexQueue;
@property (retain, nonatomic) NSObject<OS_dispatch_queue> *firstUnlockQueue;
@property (retain, nonatomic) NSString *dataclass;
@property (readonly, nonatomic) NSObject<OS_dispatch_source> *indexIdleTimer;
@property (readonly, nonatomic) double idleStartTime;
@property (retain, nonatomic) NSMutableArray *outstandingMaintenance;
@property (nonatomic) BOOL onDemandOpen;
@property (retain) NSSet *knownClients;
@property (readonly, nonatomic) NSMapTable *checkedInClients;
@property unsigned long long dirtyTimeout;
@property (retain, nonatomic) NSObject<OS_os_transaction> *dirtyTransaction;
@property (nonatomic) BOOL finishedDrainingJournal;

+ (void)initialize;
+ (id)_sharedSynonyms;
+ (id)_descriptionWithTokenRewrites:(id)a0;
+ (id)_getBundleIndexesFrom:(id)a0;
+ (id)_indexDependentTokenRewritesWithMatchInfo:(id)a0 topK:(id)a1 setOfTokensToCorrect:(id)a2 queryID:(long long)a3 bundleIds:(id)a4 clientBundleId:(id)a5;
+ (id)_indexIndependentTokenRewritesWithMatchInfo:(id)a0 queryID:(long long)a1 setOfTokensToCorrect:(id)a2;
+ (id)_lastTokenWithQueryString:(id)a0 tokenMatchInfo:(id)a1;
+ (id)_setOfTokensToCorrect:(id)a0 tokenMatchInfo:(id)a1;
+ (BOOL)_spellingCorrectionConditional:(int)a0 isSingleToken:(BOOL)a1 isPreviousTokenCorrected:(BOOL)a2 isLastToken:(BOOL)a3 tokenLength:(unsigned long long)a4;
+ (id)_stateInfoAttributeNameWithClientStateName:(id)a0;
+ (id)_stringWithRewriteType:(long long)a0;
+ (id)_tokensMaxCountFromMatchInfo:(id)a0;
+ (long long)checkItemOfInterest:(id)a0 mask:(long long)a1;
+ (BOOL)dumpCrashStates:(const char *)a0 toFile:(id)a1;
+ (id)fetchItemForURL:(id)a0;
+ (id)fetchParentsForItemID:(id)a0 recursively:(BOOL)a1 timeout:(unsigned long long)a2;

- (void)dealloc;
- (void).cxx_destruct;
- (id)_indexPath;
- (void)dirty;
- (void)commitUpdates:(id)a0;
- (void)deleteAllUserActivities:(id)a0 completionHandler:(id /* block */)a1;
- (id)getPropertyForKey:(id)a0;
- (void)preheat;
- (void)updateGroups:(BOOL)a0;
- (id)_cancelIdleTimer;
- (BOOL)_shouldPurge;
- (void)mergeWithGroup:(id)a0;
- (int)openIndexForUpgradeSynchronous:(BOOL)a0;
- (void)shrink:(unsigned long long)a0;
- (void)deleteSearchableItemsWithFileProviderDomains:(id)a0 completionHandler:(id /* block */)a1;
- (void)startReindexAll;
- (void)_addNewClientWithBundleID:(id)a0;
- (void)_appendRervseInfo:(id)a0 dictionary:(id)a1 key:(id)a2 level:(unsigned long long)a3;
- (void)_backgroundDeleteItems:(id)a0 bundleID:(id)a1 completionHandler:(id /* block */)a2;
- (void)_createPurgeableTouchFile;
- (void)_deleteSearchableItemsMatchingQuery:(id)a0 forBundleIds:(id)a1 completionHandler:(id /* block */)a2;
- (void)_expireCorruptIndexFilesWithPath:(id)a0 keepLatest:(BOOL)a1;
- (void)_fetchAccumulatedStorageSizeForBundleId:(id)a0 completionHandler:(id /* block */)a1;
- (BOOL)_hasPurgeableTouchFile;
- (id)_indexMaintenanceActivityName;
- (long long)_interestedAttributesMaskForBundleID:(id)a0;
- (void)_performXPCActivity:(id)a0 name:(id)a1;
- (BOOL)_removePurgeableTouchFile;
- (void)_saveCorruptIndexWithPath:(id)a0 shouldSendABC:(BOOL)a1 fullyCreated:(BOOL)a2 markedPurgeable:(BOOL)a3;
- (void)_scheduleStringsCleanupForBundleID:(id)a0;
- (void)_sendIndexDropABCEvent:(BOOL)a0 markedPurgeable:(BOOL)a1;
- (BOOL)_shouldNotifyForSearchableItemUpdates:(id)a0;
- (BOOL)_startInternalQueryWithIndex:(struct __SI { } *)a0 query:(id)a1 fetchAttributes:(id)a2 forBundleIds:(id)a3 maxCount:(unsigned long long)a4 resultsHandler:(id /* block */)a5;
- (BOOL)_startInternalQueryWithIndex:(struct __SI { } *)a0 query:(id)a1 fetchAttributes:(id)a2 forBundleIds:(id)a3 maxCount:(unsigned long long)a4 resultsHandler:(id /* block */)a5 resultQueue:(id)a6;
- (BOOL)_startInternalQueryWithIndex:(struct __SI { } *)a0 query:(id)a1 fetchAttributes:(id)a2 forBundleIds:(id)a3 maxCount:(unsigned long long)a4 resultsHandler:(id /* block */)a5 resultQueue:(id)a6 postFilter:(id)a7;
- (BOOL)_startInternalQueryWithIndex:(struct __SI { } *)a0 query:(id)a1 fetchAttributes:(id)a2 forBundleIds:(id)a3 resultsHandler:(id /* block */)a4;
- (BOOL)_startInternalQueryWithIndex:(struct __SI { } *)a0 query:(id)a1 fetchAttributes:(id)a2 forBundleIds:(id)a3 resultsHandler:(id)a4 resultQueue:(id)a5;
- (BOOL)_startInternalQueryWithIndex:(struct __SI { } *)a0 query:(id)a1 fetchAttributes:(id)a2 resultsHandler:(id /* block */)a3;
- (id)_startQueryWithQueryTask:(id)a0 eventHandler:(id /* block */)a1 resultsHandler:(id /* block */)a2;
- (void)addClients:(id)a0;
- (void)addCompletedBundleIDs:(id)a0 forIndexerTask:(id)a1;
- (void)attributesForBundleId:(id)a0 identifier:(id)a1 completion:(id /* block */)a2;
- (void)cacheDeleteForKey:(id)a0 value:(id)a1 bundleID:(id)a2 protectionClass:(id)a3 completionHandler:(id /* block */)a4;
- (void)cacheEntryForKeys:(id)a0 bundleID:(id)a1 protectionClass:(id)a2 completionHandler:(id /* block */)a3;
- (void)cacheInsertForKey:(id)a0 value:(id)a1 bundleID:(id)a2 protectionClass:(id)a3 completionHandler:(id /* block */)a4;
- (void)changeStateOfSearchableItemsWithUIDs:(id)a0 toState:(long long)a1 forBundleID:(id)a2;
- (void)checkAdmission:(id)a0 background:(BOOL)a1 didBeginThrottle:(BOOL *)a2 didEndThrottle:(BOOL *)a3 live:(BOOL *)a4 slow:(BOOL *)a5 memoryPressure:(BOOL *)a6;
- (void)checkInWithBundleID:(id)a0 completionHandler:(id /* block */)a1;
- (void)checkPreferencePanes;
- (void)cleanupStringsWithActivity:(id)a0 group:(id)a1 shouldDefer:(BOOL *)a2 flags:(int)a3;
- (void)cleanupStringsWithCompletionHandler:(id /* block */)a0;
- (void)clientDidCheckin:(id)a0 service:(id)a1 completionHandler:(id /* block */)a2;
- (BOOL)clientIsCheckedIn:(id)a0;
- (void)closeCache:(id /* block */)a0;
- (void)closeIndex;
- (void)completeIndexingItemFor:(id)a0 delegate:(id)a1 didBeginThrottle:(BOOL)a2 didEndThrottle:(BOOL)a3 error:(id)a4 live:(BOOL)a5 queue:(id)a6 slow:(BOOL)a7 startTime:(double)a8 dataLen:(unsigned long long)a9 completionHandler:(id /* block */)a10;
- (void)coolDown:(id)a0;
- (int)creationTouchFileCreate;
- (BOOL)creationTouchFileExists;
- (void)creationTouchFileUnlink;
- (void)deleteActionsBeforeTime:(double)a0 completionHandler:(id /* block */)a1;
- (void)deleteActionsWithIdentifiers:(id)a0 completionHandler:(id /* block */)a1;
- (void)deleteAllInteractionsWithBundleID:(id)a0 completionHandler:(id /* block */)a1;
- (void)deleteAllSearchableItemsForBundleID:(id)a0 fromClient:(id)a1 shouldGC:(BOOL)a2 completionHandler:(id /* block */)a3;
- (void)deleteAllUserActivities:(id)a0 fromClient:(id)a1 completionHandler:(id /* block */)a2;
- (void)deleteItemsForEnumerator:(id)a0 traceID:(long long)a1 bundleID:(id)a2 fromClient:(id)a3 completionHandler:(id /* block */)a4;
- (void)deleteItemsForQuery:(id)a0 bundleID:(id)a1 fromClient:(id)a2 completionHandler:(id /* block */)a3;
- (void)deleteSearchableItemsSinceDate:(id)a0 forBundleID:(id)a1 completionHandler:(id /* block */)a2;
- (void)deleteSearchableItemsWithDomainIdentifiers:(id)a0 forBundleID:(id)a1 fromClient:(id)a2 reason:(long long)a3 completionHandler:(id /* block */)a4;
- (void)deleteSearchableItemsWithPersonaIds:(id)a0 completionHandler:(id /* block */)a1;
- (BOOL)denyOperationOnAssertedIndex:(char *)a0;
- (void)dirty:(BOOL)a0;
- (void)dropBackgroundAssertions:(BOOL)a0;
- (void)dumpAllRankingDiagnosticInformationForQuery:(id)a0 withCompletionHandler:(id /* block */)a1;
- (void)ensureOpenIndexFiles:(id)a0;
- (void)fetchAllCompletedBundleIDsForIndexerTask:(id)a0 completionHandler:(id /* block */)a1;
- (void)fetchAttributes:(id)a0 bundleID:(id)a1 identifiers:(id)a2 userCtx:(id)a3 flags:(int)a4 completion:(id /* block */)a5;
- (void)fetchAttributes:(id)a0 bundleID:(id)a1 identifiers:(id)a2 userCtx:(id)a3 flags:(int)a4 completionHandler:(id /* block */)a5;
- (void)fetchCacheFileDescriptorsForBundleID:(id)a0 identifiers:(id)a1 userCtx:(id)a2 flags:(int)a3 completionHandler:(id /* block */)a4;
- (void)fetchLastClientStateForBundleID:(id)a0 clientStateName:(id)a1 completionHandler:(id /* block */)a2;
- (void)finishDeleteBatchForQueryQueue:(id)a0 bundleID:(id)a1 blockTime:(double)a2;
- (void)finishIndexingWhileLocked:(id)a0 completionHandler:(id /* block */)a1;
- (void)finishReindexAll;
- (void)fixupBundlesWithGroup:(id)a0;
- (void)fixupMessageAttachmentsWithCompletionHandler:(id /* block */)a0;
- (void)fixupPathTimeouts;
- (long long)getIndexDirectorySize:(id)a0;
- (long long)getIntegerPropertyForKey:(id)a0;
- (void)incrementIndexWipeCount;
- (void)indexDependentTokenRewritesWithQueryString:(id)a0 context:(id)a1 matchInfo:(id)a2 setOfTokensToCorrect:(id)a3 tokenRewritesHandler:(id /* block */)a4;
- (void)indexFinishedDrainingJournal;
- (void)indexFinishedDrainingJournal:(id)a0;
- (void)indexFromBundle:(id)a0 personaID:(id)a1 options:(long long)a2 items:(id)a3 itemsText:(id)a4 itemsHTML:(id)a5 clientState:(id)a6 expectedClientState:(id)a7 clientStateName:(id)a8 deletes:(id)a9 canCreateNewIndex:(BOOL)a10 completionHandler:(id /* block */)a11;
- (id)indexLossAnalyticsDictWithPreviousIndexCreationDate:(long long)a0 size:(long long)a1 openingInReadOnly:(BOOL)a2 fullyCreated:(BOOL)a3 markedPurgeable:(BOOL)a4 vectorIndexDrop:(id)a5 forAnalytics:(BOOL)a6;
- (void)indexSearchableItems:(id)a0 deleteSearchableItemsWithIdentifiers:(id)a1 clientState:(id)a2 expectedClientState:(id)a3 clientStateName:(id)a4 forBundleID:(id)a5 options:(long long)a6 completionHandler:(id /* block */)a7;
- (void)indexSearchableItems:(id)a0 deleteSearchableItemsWithIdentifiers:(id)a1 clientState:(id)a2 forBundleID:(id)a3 options:(long long)a4 completionHandler:(id /* block */)a5;
- (id)initWithQueue:(id)a0 protectionClass:(id)a1 cancelPtr:(int *)a2;
- (void)issueConsistencyCheck;
- (void)issueDefrag:(id)a0;
- (void)issueDumpForward:(unsigned long long)a0 completionHandler:(id /* block */)a1;
- (void)issueDumpReverse:(unsigned long long)a0 completionHandler:(id /* block */)a1;
- (void)issueDuplicateOidCheck;
- (void)issueMessagesFixup:(id /* block */)a0;
- (void)issuePhotosReindexIfNeeded:(BOOL)a0;
- (BOOL)issuePriorityIndexFixup;
- (void)issuePriorityIndexFixupOff;
- (void)issuePriorityIndexFixupOn;
- (void)issueRepair;
- (void)issueSplit;
- (void)markDirectoryAtomicallyPurgeable:(id)a0 purgeableOrNot:(BOOL)a1;
- (void)mergeWithCompletionHandler:(id /* block */)a0;
- (void)notifyClientForItemUpdates:(id)a0 updatedItems:(id)a1 batchMask:(long long)a2;
- (int)openIndex:(BOOL)a0;
- (int)openIndex:(BOOL)a0 shouldReindexAll:(BOOL)a1;
- (int)openIndex:(BOOL)a0 shouldReindexAll:(BOOL)a1 readOnly:(BOOL)a2;
- (int)openIndex:(BOOL)a0 shouldReindexAll:(BOOL)a1 readOnly:(BOOL)a2 forcePC:(id)a3;
- (int)openJWLIndex;
- (void)performIndexerTask:(id)a0 completionHandler:(id /* block */)a1;
- (void)performIndexerTask:(id)a0 withIndexDelegatesAndCompletionHandler:(id /* block */)a1;
- (void)performQueryForCountOfItemsInCategory:(id)a0 completion:(id /* block */)a1;
- (void)powerStateChanged;
- (void)prepareIndexingWhileLocked:(id)a0 holdAssertionFor:(double)a1 completionHandler:(id /* block */)a2;
- (void)processImportForBundleID:(id)a0 withURLs:(id)a1 contentTypes:(id)a2 sandboxExtensions:(id)a3 andIdentifiers:(id)a4 options:(long long)a5 inGroup:(id)a6 additionalAttributes:(id)a7 computeUpdaterAttributesAfterImport:(BOOL)a8;
- (id)purgeableIndexTouchFilePath;
- (void)readyIndex:(BOOL)a0;
- (BOOL)reindexAllStarted;
- (void)reindexAttributes:(id)a0 ofItemsMatchingQuery:(id)a1 indexAttrName:(id)a2 withVersion:(unsigned long long)a3 perItemCompletionAttribute:(id)a4 force:(BOOL)a5 postFilter:(id)a6;
- (void)reindexSystemPreferences;
- (void)removeExpiredItemsForBundleId:(id)a0 group:(id)a1;
- (void)removeSandboxExtensions:(id)a0;
- (void)requestRequiresImportWithoutSandboxExtension:(id)a0 maxCount:(unsigned long long)a1 depth:(long long)a2;
- (void)restartAttachmentImport:(id)a0 maxCount:(unsigned long long)a1 depth:(long long)a2;
- (void)resumeIndex;
- (void)revokeExpiredItems:(id)a0;
- (void)scheduleMaintenance:(id /* block */)a0 description:(id)a1 forDarkWake:(BOOL)a2;
- (void)setProperty:(id)a0 forKey:(id)a1 sync:(BOOL)a2;
- (int)shouldNotLogIndexDrop:(id)a0 ignoreParentDirectoryAge:(BOOL)a1;
- (void)spotlightCacheFileDescriptor:(id)a0 completionHandler:(id /* block */)a1;
- (void)startQueryWithQueryTask:(id)a0 startHandler:(id /* block */)a1 eventHandler:(id /* block */)a2 resultsHandler:(id /* block */)a3;
- (void)suspendIndexForDeviceLock:(id)a0;
- (void)transferDeleteJournalsToDirectory:(int)a0 completionHandler:(id /* block */)a1;
- (id)trialIntentionalDropUUID;
- (int)unpurgeOnceTouchFileCreate;
- (BOOL)unpurgeOnceTouchFileExists;
- (void)updateContainersAndScores:(BOOL)a0;
- (void)updateEmailContentURLAttr:(BOOL)a0;
- (void)updateEmailLocalParts:(BOOL)a0;
- (void)updateIndexRankingDates:(BOOL)a0;
- (void)updateKnownBundles:(id)a0 group:(id)a1;
- (void)updateNotes:(BOOL)a0;
- (void)updateRankingDates:(BOOL)a0;
- (void)validateConcreteIndexer:(BOOL)a0 outFileDescriptor:(int)a1;
- (void)validateVectors:(int)a0;
- (id)vectorIndexDropsPath;
- (void)whenFinishedDraining:(id /* block */)a0;
- (void)willModifySearchableItemsWithIdentifiers:(id)a0 forBundleID:(id)a1 completionHandler:(id /* block */)a2;
- (BOOL)writeDiagnostic:(id)a0 bundleID:(id)a1 identifier:(id)a2;
- (void)writeIndexCreationDate:(long long)a0;
- (void)writeIndexDropAnalyticsDate:(long long)a0;
- (void)writeIndexLossEventToFile:(id)a0 vector:(BOOL)a1;
- (void)writeIndexSuccessfulOpenDate:(long long)a0;
- (void)writeSDBObjectCount:(long long)a0;
- (void)zombifyAllContactItems:(id)a0;

@end
