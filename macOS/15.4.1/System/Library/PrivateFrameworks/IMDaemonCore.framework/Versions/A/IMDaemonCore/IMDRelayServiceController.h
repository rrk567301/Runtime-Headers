@class NSString, NSArray, IMDRelayPushHandler, IDSService, IMDRelayDeletionController, NSMutableDictionary, IMDService, IMOneTimeCodeUtilities, IMDRelayEnrollmentController;

@interface IMDRelayServiceController : NSObject <IMDRelayEnrollmentControllerDispatchDelegate, IMDRelayPushHandlerListener>

@property (readonly, nonatomic) BOOL watchConnectedOverBT;
@property (readonly, nonatomic) NSString *dominentPhoneNumberAlias;
@property (readonly, nonatomic) BOOL hasRelayDevice;
@property (readonly, nonatomic) BOOL hasPeerDevices;
@property (readonly, nonatomic) NSArray *peerDevices;
@property (readonly, nonatomic) BOOL isSMSRelayEnabled;
@property (retain, nonatomic) NSMutableDictionary *smsRelayBlockMap;
@property (readonly, nonatomic) IMDRelayDeletionController *deletionController;
@property (retain, nonatomic) IDSService *relayService;
@property (retain, nonatomic) IDSService *smsRelayService;
@property (retain, nonatomic) IDSService *smsWatchService;
@property (nonatomic) BOOL isRegistered;
@property (retain, nonatomic) IMDRelayPushHandler *smsRelayPushHandler;
@property (retain, nonatomic) IMOneTimeCodeUtilities *otcUtilities;
@property (readonly, nonatomic) IMDRelayEnrollmentController *enrollmentController;
@property (readonly, nonatomic) BOOL _localDeviceSupportsSMS;
@property (readonly, nonatomic) BOOL _localDeviceSupportsEmergencySMS;
@property (readonly, nonatomic) BOOL _canRelayMMS;
@property (readonly, nonatomic) NSString *_callerIDForRelay;
@property (readonly, nonatomic) IMDService *service;
@property (readonly, nonatomic) NSArray *accounts;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

+ (id)sharedInstance;
+ (id)_convertIMDHandlesToArrayOfIDs:(id)a0;
+ (id)_convertIMDHandleToDictionary:(id)a0;
+ (id)_convertIMDHandlesToArray:(id)a0;
+ (id)_convertIMMessageItemDictionaryToIMMessageItem:(id)a0 timestamp:(id)a1;
+ (id)_convertIMMessageItemToIncomingRelayDictionary:(id)a0 chat:(id)a1 overridingAttachmentData:(id)a2;
+ (id)_convertIMMessageItemToOutgoingRelayDictionary:(id)a0 chat:(id)a1;
+ (id)_updateServiceOfMessageInMessageDict:(id)a0 toService:(id)a1;

- (void)dealloc;
- (id)init;
- (void).cxx_destruct;
- (id)pairedDevice;
- (void)service:(id)a0 account:(id)a1 identifier:(id)a2 didSendWithSuccess:(BOOL)a3 error:(id)a4;
- (void)service:(id)a0 activeAccountsChanged:(id)a1;
- (void)service:(id)a0 devicesChanged:(id)a1;
- (id)_IDSService;
- (void)account:(id)a0 aliasesChanged:(id)a1;
- (id)_account;
- (id)localDevice;
- (void)sendRecoverCommand:(id)a0 forChatGUID:(id)a1;
- (BOOL)_canRelayMessage:(id)a0 forChat:(id)a1 isOTC:(BOOL *)a2;
- (void)_broadcastMessageEventWithCommand:(long long)a0 eventName:(id)a1 forGUID:(id)a2;
- (void)_broadcastMessageEventWithCommand:(long long)a0 eventName:(id)a1 forGUID:(id)a2 messageExtras:(id)a3;
- (void)_broadcastMessageEventWithCommand:(long long)a0 eventName:(id)a1 forGUID:(id)a2 messageExtras:(id)a3 shouldFilterRecipients:(BOOL)a4 forcedCallerID:(id)a5;
- (id)_callerIDAccountFromSettings;
- (id)_callerIDForRelayAccountID:(id)a0;
- (void)_checkAndSetRelayService;
- (BOOL)_checkMMSEnablementForPhoneNumber:(id)a0 simID:(id)a1;
- (void)_clearSMSRelayMapForMessageWithGUID:(id)a0;
- (id)_destinationForDevice:(id)a0 forcedIdentity:(id)a1;
- (id)_deviceForCallerID:(id)a0;
- (void)_executeSMSRelayBlockForMessageWithGUID:(id)a0;
- (void)_executeSMSRelayBlockForMessageWithGUID:(id)a0 category:(long long)a1 subCategory:(long long)a2;
- (id)_extraOptionsForReachabilityRelayWithRequestID:(id)a0;
- (void)_forwardMessageEventToLocalPeers:(id)a0 forGUID:(id)a1 metadata:(id)a2;
- (void)_forwardMessageToPeers:(id)a0 messageType:(long long)a1 guid:(id)a2 originalSender:(id)a3 hasAttachment:(BOOL)a4 watchOnly:(BOOL)a5 sentToDevices:(id *)a6 requiredCapabilities:(id)a7;
- (void)_handleCapabilitiesChanged:(id)a0;
- (BOOL)_hasPhoneNumberAliasActive;
- (BOOL)_isConnectedOverBT:(id)a0;
- (BOOL)_isDefaultPairedDeviceRelayingLocally:(id)a0;
- (BOOL)_localDeviceSupportsSMSAndDoesNotHaveAPhoneNumberForSIMID:(id)a0;
- (BOOL)_localDeviceSupportsSMSAndHasAPhoneNumber;
- (long long)_maxWatchTransferSize;
- (BOOL)_needsLowQualityTranscodeForMessage:(id)a0;
- (void)_prepareSMSRelayBlockForMessageDictionary:(id)a0 messageGUID:(id)a1 serviceName:(id)a2;
- (unsigned char)_readMMSUserOverrideForSingleSubscription;
- (void)_registerForAccountChanges;
- (void)_relayEditedMessage:(id)a0 messageGUID:(id)a1 serializedHandles:(id)a2 chatStyle:(unsigned char)a3 callerID:(id)a4;
- (void)_relayMessageDict:(id)a0 command:(long long)a1 messageID:(id)a2 forcedCallerID:(id)a3 didSendSMS:(BOOL)a4 relayToWatchOnly:(BOOL)a5 shouldDisableScreenTimeRestrictions:(BOOL)a6 hasAttachments:(BOOL)a7 requiredCapabilities:(id)a8;
- (void)_relayMessageDict:(id)a0 command:(long long)a1 messageID:(id)a2 forcedCallerID:(id)a3 didSendSMS:(BOOL)a4 relayToWatchOnly:(BOOL)a5 shouldDisableScreenTimeRestrictions:(BOOL)a6 hasAttachments:(BOOL)a7 sentToDevices:(id *)a8 extraOptions:(id)a9 requiredCapabilities:(id)a10;
- (void)_relayMessageDict:(id)a0 command:(long long)a1 messageID:(id)a2 forcedCallerID:(id)a3 didSendSMS:(BOOL)a4 relayToWatchOnly:(BOOL)a5 shouldDisableScreenTimeRestrictions:(BOOL)a6 hasAttachments:(BOOL)a7 sentToDevices:(id *)a8 requiredCapabilities:(id)a9;
- (void)_relayMessageDict:(id)a0 messageID:(id)a1 forcedCallerID:(id)a2 didSendSMS:(BOOL)a3 relayToWatchOnly:(BOOL)a4 shouldDisableScreenTimeRestrictions:(BOOL)a5 hasAttachments:(BOOL)a6 requiredCapabilities:(id)a7;
- (void)_relayMessageToPairedDevice:(id)a0 messageID:(id)a1 hasAttachments:(BOOL)a2;
- (BOOL)_relayMessageToPeers:(id)a0 forChat:(id)a1 serviceName:(id)a2 requiredCapabilities:(id)a3 reflectOnly:(BOOL)a4 excludesWatch:(BOOL)a5 onlyWatch:(BOOL)a6 overridingAttachmentData:(id)a7;
- (void)_sendMessageToAllSMSRelayDevicesWithOptions:(id)a0;
- (void)_sendMessageToPairedDeviceWithOptions:(id)a0;
- (id)_sendOptionsForRelayMessage:(id)a0 command:(long long)a1 guid:(id)a2;
- (void)_setupIDSRelayServices;
- (void)_setupMMSObservation;
- (BOOL)_storeSMSRelayExecutionBlock:(id /* block */)a0 forMessageGUID:(id)a1;
- (BOOL)_syncedMMSEnabledValue;
- (void)_synchronizeMMSCapabilityToWatch:(BOOL)a0;
- (void)_teardownMMSObservation;
- (id)accountForAlias:(id)a0 fromAccounts:(id)a1;
- (BOOL)accountHasAlias:(id)a0 aliastoCheck:(id)a1;
- (void)didReceiveMessageError:(id)a0;
- (void)forwardMessageToPeers:(id)a0 messageType:(long long)a1 guid:(id)a2 originalSender:(id)a3;
- (void)forwardMessageToPeers:(id)a0 messageType:(long long)a1 guid:(id)a2 originalSender:(id)a3 hasAttachment:(BOOL)a4 watchOnly:(BOOL)a5;
- (void)forwardMessageToPeers:(id)a0 messageType:(long long)a1 guid:(id)a2 originalSender:(id)a3 watchOnly:(BOOL)a4;
- (BOOL)hasConnectedLocalDevice;
- (BOOL)hasPhoneNumberAliasActiveCheckingSelf:(BOOL)a0;
- (id)idsDeviceForFromID:(id)a0;
- (id)idsDeviceFromPushToken:(id)a0;
- (id)idsDeviceFromUniqueID:(id)a0;
- (BOOL)isAliasActiveAndRelayCapable:(id)a0;
- (BOOL)isAliasActiveAndRelayCapable:(id)a0 checkingSelf:(BOOL)a1;
- (BOOL)isAliasRelayCapable:(id)a0;
- (BOOL)isAliasRelayCapable:(id)a0 checkingSelf:(BOOL)a1;
- (BOOL)isLocalDeviceProxyRegistered;
- (BOOL)isProxyRegistered;
- (void)messageDelivered:(id)a0;
- (void)messageFailedToSend:(id)a0;
- (void)messageGUIDReadByRemote:(id)a0 timeRead:(id)a1;
- (void)messageReadByRemote:(id)a0;
- (void)messageSent:(id)a0 onService:(id)a1 compatibilityService:(id)a2;
- (void)messageSent:(id)a0 onService:(id)a1 compatibilityService:(id)a2 wasInterworked:(BOOL)a3;
- (id)phoneAliasForDominentPhoneAlias:(id)a0 registeredPhoneNumber:(id)a1 preferedCallerID:(id)a2 CTPhoneNumber:(id)a3;
- (void)reflectGroupMutation:(id)a0 callerID:(id)a1 didOccurLocally:(BOOL)a2;
- (BOOL)relayDictionaryToPeers:(id)a0 requiresUpload:(BOOL)a1 serviceName:(id)a2;
- (BOOL)relayDictionaryToPeers:(id)a0 requiresUpload:(BOOL)a1 serviceName:(id)a2 requiredCapabilities:(id)a3;
- (BOOL)relayDictionaryToPeers:(id)a0 requiresUpload:(BOOL)a1 serviceName:(id)a2 requiredCapabilities:(id)a3 excludedCapabilities:(id)a4 excludesWatch:(BOOL)a5 onlyWatch:(BOOL)a6;
- (BOOL)relayDictionaryToPeers:(id)a0 requiresUpload:(BOOL)a1 serviceName:(id)a2 requiredCapabilities:(id)a3 excludesWatch:(BOOL)a4 onlyWatch:(BOOL)a5;
- (void)relayMessage:(id)a0 chat:(id)a1 didSendSMS:(BOOL)a2 attemptingReplication:(BOOL)a3 forceReflection:(BOOL)a4 relayToWatchOnly:(BOOL)a5 shouldDisableScreenTimeRestrictions:(BOOL)a6 callerID:(id)a7 iMessageCapability:(long long)a8 requiredCapabilities:(id)a9;
- (BOOL)relayMessageToPeers:(id)a0 forChat:(id)a1 serviceName:(id)a2 reflectOnly:(BOOL)a3 requiredCapabilities:(id)a4;
- (id)retrieveAccountAndPhoneAliasForAccounts:(id)a0 shouldFilterRecepients:(BOOL)a1 requestProxySend:(BOOL)a2 preferredCallerID:(id)a3;
- (id)retrievePhoneAccountAndPhoneAliasFromIDSAccounts:(id)a0;
- (BOOL)sendDataToPeers:(id)a0 forcedCallerID:(id)a1 shouldFilterRecepients:(BOOL)a2 requestProxySend:(BOOL)a3 dontSendTo:(id)a4;
- (BOOL)sendDataToPeers:(id)a0 forcedCallerID:(id)a1 shouldFilterRecepients:(BOOL)a2 requestProxySend:(BOOL)a3 dontSendTo:(id)a4 sentToDevices:(id *)a5;
- (BOOL)sendDataToPeers:(id)a0 guid:(id)a1 forcedCallerID:(id)a2 shouldFilterRecepients:(BOOL)a3 requestProxySend:(BOOL)a4 dontSendTo:(id)a5 sentToDevices:(id *)a6;
- (void)sendDeleteCommand:(id)a0 forChatGUID:(id)a1;
- (void)sendEditedMessage:(id)a0 toChat:(id)a1 fromCallerID:(id)a2 backwardCompatabilityText:(id)a3;
- (BOOL)sendEnrollmentRelatedMessageOverIDS:(id)a0 deviceToSendTo:(id)a1;
- (BOOL)sendFileToLocalPeers:(id)a0 metadata:(id)a1;
- (id)sendReachabilityRequest:(id)a0 requestID:(id)a1;
- (void)sendReachabilityResponse:(id)a0 requestID:(id)a1 toToken:(id)a2 toIdentifier:(id)a3 fromIdentifier:(id)a4;
- (void)sendReadReceiptForMessage:(id)a0 toChat:(id)a1;
- (void)sendReadReceiptForMessage:(id)a0 toChat:(id)a1 reflectOnly:(BOOL)a2;
- (void)sendReadReceiptForMessageGUID:(id)a0 timeRead:(id)a1;
- (void)sendReadReceiptForMessageGUID:(id)a0 timeRead:(id)a1 reflectOnly:(BOOL)a2;
- (BOOL)sendToLocalPeers:(id)a0;
- (void)updateMMSCapability;
- (void)updateRelayStatus;

@end
