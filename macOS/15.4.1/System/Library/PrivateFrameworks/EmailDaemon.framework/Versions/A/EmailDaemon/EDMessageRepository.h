@class EDRemoteContentManager, EDCategoryPersistence, EDFetchController, EFLocked, EMCoreAnalyticsCollector, EDMailboxPersistence, EDRemoteContentPersistence, NSMutableSet, EDActivityPersistence, NSString, EDRemoteContentCacheConfiguration, EDMessageChangeManager, NSMutableDictionary, EDMessagePersistence, EDRemindMeNotificationController, EDThreadPersistence, EDRichLinkPersistence, EDConversationPersistence, NSObject, EDWebContentParser, NSUserDefaults, NSSet, EDMailboxPredictionController, EDBusinessPersistence, EMBlockedSenderManager, EDVIPManager, EDPersistenceHookRegistry, EDAttachmentPersistenceManager, EDCategoryCoreAnalyticsLogger, EDBusinessCloudStorage, EDListUnsubscribeHandler, EDSenderPersistence, NSConditionLock;
@protocol EDAccountsProvider, OS_os_log, EFScheduler, EMUserProfileProvider, EDSearchProvider, OS_dispatch_queue, EDResumable;

@interface EDMessageRepository : NSObject <EDAccountChangeHookResponder, EDOneTimeCodeChangeHookResponder, EDMessageChangeHookResponder, EDThreadQueryHandlerDelegate, EFContentProtectionObserver, EMMessageRepositoryInterface, EDReconciliationQueryProvider, EFLoggable> {
    EDMailboxPredictionController *_mailboxPredictionController;
    struct os_unfair_lock_s { unsigned int _os_unfair_lock_opaque; } _mailboxPredictionControllerLock;
    struct os_unfair_lock_s { unsigned int _os_unfair_lock_opaque; } _handlersLock;
    EDWebContentParser *_remoteContentParser;
    struct os_unfair_lock_s { unsigned int _os_unfair_lock_opaque; } _remoteContentParserLock;
    EMCoreAnalyticsCollector *_analyticsCollector;
}

@property (class, readonly) NSObject<OS_os_log> *log;

@property (retain, nonatomic) NSMutableDictionary *queryHandlers;
@property (retain, nonatomic) NSMutableDictionary *queryHandlersByThreadScope;
@property (retain, nonatomic) NSMutableSet *handlerTokens;
@property (retain, nonatomic) EDPersistenceHookRegistry *hookRegistry;
@property (retain, nonatomic) EDMessagePersistence *messagePersistence;
@property (readonly, nonatomic) EDConversationPersistence *conversationPersistence;
@property (retain, nonatomic) EDThreadPersistence *threadPersistence;
@property (readonly, nonatomic) EDRemoteContentPersistence *remoteContentPersistence;
@property (retain, nonatomic) EDRichLinkPersistence *richLinkPersistence;
@property (retain, nonatomic) EDAttachmentPersistenceManager *attachmentPersistenceManager;
@property (retain, nonatomic) EDMessageChangeManager *messageChangeManager;
@property (readonly, nonatomic) NSConditionLock *performQueryOnSerializationQueue;
@property (readonly, nonatomic) NSObject<OS_dispatch_queue> *serializationQueue;
@property (readonly, nonatomic) NSObject<OS_dispatch_queue> *contentProtectionQueue;
@property (readonly, nonatomic) id<EFScheduler> asyncWorkScheduler;
@property (readonly, nonatomic) id<EFScheduler> messageListItemScheduler;
@property (retain, nonatomic) EDCategoryPersistence *categoryPersistence;
@property (retain, nonatomic) EDSenderPersistence *senderPersistence;
@property (retain, nonatomic) EDBusinessPersistence *businessPersistence;
@property (retain, nonatomic) EDActivityPersistence *activityPersistence;
@property (readonly, nonatomic) EDCategoryCoreAnalyticsLogger *categoryAnalyticsLogger;
@property (retain, nonatomic) EDBusinessCloudStorage *businessCloudStorage;
@property (readonly, nonatomic) EDMailboxPersistence *mailboxPersistence;
@property (readonly, nonatomic) id<EMUserProfileProvider> userProfileProvider;
@property (readonly, nonatomic) EDVIPManager *vipManager;
@property (readonly, nonatomic) id<EDSearchProvider> searchProvider;
@property (readonly, nonatomic) EDFetchController *fetchController;
@property (readonly, nonatomic) id<EDResumable> observerResumer;
@property (readonly, nonatomic) EDRemoteContentManager *remoteContentManager;
@property (readonly, nonatomic) EDRemoteContentCacheConfiguration *remoteContentCacheConfiguration;
@property (readonly, nonatomic) id<EFScheduler> updateThrottlerResetScheduler;
@property (weak, nonatomic) id /* block */ updateThrottlerResetBlock;
@property (readonly, nonatomic) EDWebContentParser *remoteContentParser;
@property (readonly, nonatomic) EMBlockedSenderManager *blockedSenderManager;
@property (readonly, nonatomic) EDListUnsubscribeHandler *listUnsubscribeHandler;
@property (readonly, nonatomic) EDRemindMeNotificationController *remindMeNotificationController;
@property (retain, nonatomic) EFLocked *oneTimeCodeObservers;
@property (readonly, nonatomic) id<EFScheduler> delayedMessageActionScheduler;
@property (nonatomic) long long oneTimeCodeMessageID;
@property (readonly, nonatomic) id<EDAccountsProvider> accountsProvider;
@property (retain, nonatomic) NSUserDefaults *sharedOneTimeCodeUserDefaults;
@property (readonly, copy, nonatomic) NSSet *test_activeQueryCancelationTokens;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

+ (id)signpostLog;

- (void)dealloc;
- (void).cxx_destruct;
- (unsigned long long)signpostID;
- (void)contentProtectionStateChanged:(long long)a0 previousState:(long long)a1;
- (id)_performMessageFollowUpDate:(id)a0 persistedMessages:(id)a1 returnUndoAction:(BOOL)a2;
- (void)messageObjectIDsForSearchableItemIdentifiers:(id)a0 completionHandler:(id /* block */)a1;
- (void)predictMailboxForMovingMessages:(id)a0 withObserver:(id)a1 completionHandler:(id /* block */)a2;
- (void)_performMessageDeleteAllAction:(id)a0;
- (id)_performMessageTransferActionToSpecialMailbox:(id)a0 returnUndoAction:(BOOL)a1;
- (void)_accountActiveStateDidChange:(id)a0 stateStringForLogging:(id)a1;
- (void)_broadcastOneTimeCode:(id)a0 timestamp:(id)a1 messageID:(long long)a2 subject:(id)a3 senders:(id)a4;
- (id)_changeFlagsForPersistedMessages:(id)a0 flagChange:(id)a1 returnUndoAction:(BOOL)a2;
- (id)_createGroupedSenderQueryHandlerForQuery:(id)a0 withObserver:(id)a1 observationIdentifier:(id)a2;
- (id)_dictForPasswordsIcon;
- (void)_enumerateObjectIDsAndQueryHandlersForObjectIDsByScope:(id)a0 usingBlock:(id /* block */)a1 failureBlock:(id /* block */)a2;
- (void)_enumerateObjectIDsByScope:(id)a0 usingBlock:(id /* block */)a1;
- (void)_logCategoryMetadataForChangeAction:(id)a0;
- (void)_logRecategorizeAnalyticsWithPersistedMessages:(id)a0 isRestoreModelCategory:(BOOL)a1 categoryChangeAction:(id)a2;
- (id)_messageQueryForGroupedSenderObjectIDs:(id)a0;
- (id)_mostRecentMessageForPersistedMessages:(id)a0;
- (id)_partitionObjectIDs:(id)a0;
- (id)_performBlockSender:(BOOL)a0 persistedMessages:(id)a1 returnUndoAction:(BOOL)a2;
- (void)_performCategoryChangeAction:(id)a0;
- (void)_performCloudStorageUpdateForBusiness:(long long)a0 withCategory:(unsigned long long)a1 lastModifiedDate:(id)a2;
- (id)_performConversationIDs:(id)a0 conversationNotificationLevel:(long long)a1 returnUndoAction:(BOOL)a2;
- (id)_performMessageConversationFlagChangeAction:(id)a0 returnUndoAction:(BOOL)a1;
- (void)_performMessageDeleteAction:(id)a0;
- (id)_performMessageFlagChangeAction:(id)a0 returnUndoAction:(BOOL)a1;
- (void)_performMessageFlagChangeAllAction:(id)a0;
- (id)_performMessageFollowUpAction:(id)a0 returnUndoAction:(BOOL)a1;
- (id)_performMessageReadLaterAction:(id)a0 returnUndoAction:(BOOL)a1;
- (id)_performMessageReadLaterDate:(id)a0 persistedMessages:(id)a1 returnUndoAction:(BOOL)a2;
- (id)_performMessageTransferAction:(id)a0 returnUndoAction:(BOOL)a1;
- (void)_performMessageTransferAllAction:(id)a0;
- (void)_performMessageTransferAllActionToSpecialMailbox:(id)a0;
- (void)_performQuery:(id)a0 withObserver:(id)a1 observationIdentifier:(id)a2 helperObserver:(id)a3 completionHandler:(id /* block */)a4;
- (void)_performRestoreModelCategoryForAllMessagesChangeAction:(id)a0;
- (id)_performSenderBlockingAction:(id)a0 returnUndoAction:(BOOL)a1;
- (void)_performSuppressNotAuthenticatedChangeAction:(id)a0;
- (id)_performUndoAction:(id)a0;
- (void)_performUnsubscribeAction:(id)a0;
- (id)_persistedMessagesForMessageChangeAction:(id)a0;
- (id)_persistedMessagesForObjectIDs:(id)a0 includeDuplicates:(BOOL)a1;
- (id)_persistedObjectIDsForObjectIDs:(id)a0;
- (void)_recategorizeMessagesForQuery:(id)a0 completion:(id /* block */)a1;
- (void)_removeCategoryCloudStorageForBusiness:(long long)a0 lastModifiedDate:(id)a1;
- (void)_requestSummariesIfNeededForMessageListItems:(id)a0 additionalObjectIDs:(id)a1 queryHandler:(id)a2 observationIdentifier:(id)a3;
- (void)_resetUpdateThrottlersWithLogMessage:(id)a0;
- (void)_triggerMigrationForThreadScopes:(id)a0;
- (id)_undoActionsForMovedMessages:(id)a0;
- (void)accountBecameActive:(id)a0;
- (void)accountBecameInactive:(id)a0;
- (void)brandIndicatorForLocation:(id)a0 completionHandler:(id /* block */)a1;
- (void)cancelAllHandlers;
- (void)countOfUserOverridesWithCompletionHandler:(id /* block */)a0;
- (void)didReceiveOneTimeCode:(id)a0 timestamp:(id)a1 messageID:(long long)a2 subject:(id)a3 senders:(id)a4;
- (void)getCachedMetadataJSONForKey:(id)a0 messageID:(id)a1 completionHandler:(id /* block */)a2;
- (void)getRemoteContentURLInfoOrderedBy:(long long)a0 inReverseOrder:(BOOL)a1 limit:(long long)a2 completionHandler:(id /* block */)a3;
- (void)getURLCacheInformationWithCompletion:(id /* block */)a0;
- (id)initWithMessagePersistence:(id)a0 conversationPersistence:(id)a1 threadPersistence:(id)a2 remoteContentPersistence:(id)a3 messageChangeManager:(id)a4 richLinkPersistence:(id)a5 attachmentPersistenceManager:(id)a6 categoryPersistence:(id)a7 senderPersistence:(id)a8 activityPersistence:(id)a9 businessPersistence:(id)a10 businessCloudStorage:(id)a11 hookRegistry:(id)a12 mailboxPersistence:(id)a13 searchProvider:(id)a14 userProfileProvider:(id)a15 vipManager:(id)a16 fetchController:(id)a17 observerResumer:(id)a18 remoteContentManager:(id)a19 remoteContentCacheConfiguration:(id)a20 blockedSenderManager:(id)a21 listUnsubscribeHandler:(id)a22 remindMeNotificationController:(id)a23 accountsProvider:(id)a24;
- (void)isDataAccessible:(id /* block */)a0;
- (void)loadOlderMessagesForMailboxes:(id)a0;
- (void)logCategoryMetadataForObjectIDs:(id)a0;
- (void)mailOnBoardDeleteVerificationCodesMessage:(id)a0 completionHandler:(id /* block */)a1;
- (id)mailboxPredictionController;
- (void)messageListItemsForObjectIDs:(id)a0 requestID:(unsigned long long)a1 observationIdentifier:(id)a2 loadSummaryForAdditionalObjectIDs:(id)a3 completionHandler:(id /* block */)a4;
- (void)messageObjectIDForURL:(id)a0 completionHandler:(id /* block */)a1;
- (id)messageReconciliationQueries;
- (void)messagesInConversationIDs:(id)a0 limit:(long long)a1 observationIdentifier:(id)a2 completionHandler:(id /* block */)a3;
- (void)metadataForAddresses:(id)a0 completionHandler:(id /* block */)a1;
- (void)noteViewOfRemoteContentLinks:(id)a0;
- (void)parseRemoteContentURLsFromMessageWithObjectID:(id)a0 requestID:(unsigned long long)a1 completionHandler:(id /* block */)a2;
- (void)performCountQuery:(id)a0 completionHandler:(id /* block */)a1;
- (void)performMessageChangeAction:(id)a0 requestID:(unsigned long long)a1 returnUndoAction:(BOOL)a2 completionHandler:(id /* block */)a3;
- (void)performMessageHighImpactChangeAction:(id)a0;
- (void)performOneTimeCodeMessageDeletionWithObjectID:(id)a0 requestID:(unsigned long long)a1 returnUndoAction:(BOOL)a2 afterDelay:(double)a3 completionHandler:(id /* block */)a4;
- (void)performQuery:(id)a0 limit:(long long)a1 completionHandler:(id /* block */)a2;
- (void)performQuery:(id)a0 withObserver:(id)a1 observationIdentifier:(id)a2 helperObserver:(id)a3 completionHandler:(id /* block */)a4;
- (void)persistenceDidDeleteMessages:(id)a0 generationWindow:(id)a1;
- (void)persistentIDForMessageObjectID:(id)a0 completionHandler:(id /* block */)a1;
- (void)recategorizeMessageSinceDate:(id)a0;
- (void)recategorizeMessagesForQuery:(id)a0 completion:(id /* block */)a1;
- (void)removeAllEntriesFromBusinessCloudStorage;
- (void)reportIncorrectBusinessForAddress:(id)a0 isBusinessConnectGrouping:(BOOL)a1 fromClassName:(id)a2;
- (void)requestAttachmentMetadataForMessageIDs:(id)a0 completionHandler:(id /* block */)a1;
- (id)requestRepresentationForMessageWithID:(id)a0 requestID:(unsigned long long)a1 options:(id)a2 delegate:(id)a3 completionHandler:(id /* block */)a4;
- (void)requestRichLinkMetadataForRichLinkID:(id)a0 messageID:(id)a1 completionHandler:(id /* block */)a2;
- (void)requestRichLinkURLsForMessageIDs:(id)a0 completionHandler:(id /* block */)a1;
- (void)resetPrecomputedThreadScopesForMailboxScope:(id)a0;
- (void)setCachedMetadataJSON:(id)a0 forKey:(id)a1 messageID:(id)a2;
- (void)startCountingQuery:(id)a0 includingServerCountsForMailboxScope:(id)a1 withObserver:(id)a2 completionHandler:(id /* block */)a3;
- (void)startObservingOneTimeCode:(id)a0 completionHandler:(id /* block */)a1;
- (void)test_tearDown;
- (void)threadQueryHandlerStateDidChange:(id)a0;
- (id)threadReconciliationQueries;
- (void)updateLastSeenDate:(id)a0 andDisplayDate:(id)a1 forBusinessWithEmailAddress:(id)a2 category:(id)a3;

@end
