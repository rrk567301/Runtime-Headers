@class NSURL, NSMutableDictionary, WebBookmarkGroup, SpotlightBookmarksWriter, SafariWebBookmark, NSMutableArray, WBSSiteMetadataManager, NSString, SafariWebBookmarkList, NSTimer, NSArray, FileChangeObserver, CloudBookmarksMigrationCoordinationConsul;

@interface BookmarksController : NSObject <BookmarkGroupDelegate, FileChangeObserverClient, FileLockerClient, FileLockerLogDelegate, WBTabGroupManagerObserver, BookmarksUndoControllerDataStore, Command0Through9Receiver> {
    BOOL _loaded;
    NSMutableDictionary *_proxiesByIdentifier;
    SpotlightBookmarksWriter *_spotlightBookmarksWriter;
    WBSSiteMetadataManager *_cachedSiteMetadataManager;
    id /* block */ _siteMetadataManagerProvider;
    unsigned long long _bookmarksFileSize;
    double _bookmarksFileTime;
    unsigned long long _bookmarksGeneration;
    struct unique_ptr<Safari::FileLocker, std::default_delete<Safari::FileLocker>> { struct __compressed_pair<Safari::FileLocker *, std::default_delete<Safari::FileLocker>> { struct FileLocker *__value_; } __ptr_; } _fileLocker;
    BOOL _waitingForLock;
    NSMutableArray *_completionHandlersPendingLockAcquisition;
    unsigned long long _numberOfPendingSaveRequests;
    long long _pendingSavePriority;
    NSTimer *_pendingSaveTimer;
    double _pendingSaveTimerInterval;
    FileChangeObserver *_fileChangeObserver;
    BOOL _userIsOffline;
    NSMutableArray *_bookmarksThatRequestedMetadataFetchWhileOffline;
    NSURL *_builtInBookmarksURL;
    NSMutableArray *_migratedNonSafariBookmarkFiles;
    BOOL _isReloadingScopedBookmarks;
}

@property (nonatomic) struct SHA256Hash { unsigned char data[32]; } builtInBookmarksStateHash;
@property (nonatomic) BOOL didFillWithBuiltInBookmarks;
@property (nonatomic, getter=isReloadingBookmarks) BOOL reloadingBookmarks;
@property (nonatomic, getter=isSavePending) BOOL savePending;
@property (retain, nonatomic) NSURL *migratedBookmarksFolder;
@property (nonatomic) BOOL isReadOnly;
@property (readonly, nonatomic) WebBookmarkGroup *allBookmarks;
@property (readonly, nonatomic) NSArray *bookmarksToDonate;
@property (readonly, nonatomic) SafariWebBookmarkList *topBookmarkIfLoaded;
@property (readonly, nonatomic) SafariWebBookmark *historyCollection;
@property (readonly, retain, nonatomic) SafariWebBookmarkList *bookmarksBarCollection;
@property (readonly, retain, nonatomic) SafariWebBookmarkList *bookmarksMenuCollection;
@property (readonly, copy, nonatomic) NSString *bookmarksFilePath;
@property (readonly, copy, nonatomic) NSString *bookmarksFileLockPath;
@property (readonly, nonatomic) CloudBookmarksMigrationCoordinationConsul *bookmarksMigrationCoordinationConsul;
@property (nonatomic) BOOL shouldResetCloudKitMigrationStateOnNextLoad;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

+ (id)sharedController;
+ (id)_builtInBookmarksLocaleKey;
+ (id)_defaultMigratedBookmarksFolderURL;
+ (void)_requestSyncClientTriggerSyncForBookmarkGroup:(id)a0 skipRequestIfNoChanges:(BOOL)a1;
+ (id)_sharedControllerWithInstance:(id *)a0;
+ (void)_syncAgentDidDetectBug:(id)a0;
+ (void)_syncAgentDidDetectHierarchyIssue:(id)a0;
+ (void)_tellUserThatExternalChangePreemptedLocalChange;
+ (id)bookmarkSourceForProxyIdentifier:(id)a0;
+ (id)bookmarkTitleForProxyIdentifier:(id)a0;
+ (id)defaultBookmarksFileURL;
+ (id)existingSharedController;
+ (id)fileLockURLForBookmarkFileURL:(id)a0;
+ (void)requestSyncClientTriggerSyncForBookmarkGroup:(id)a0;
+ (void)requestSyncClientTriggerSyncForBookmarkGroup:(id)a0 skipRequestIfNoChanges:(BOOL)a1;
+ (void)tellUserThatSyncWon;

- (void)dealloc;
- (void).cxx_destruct;
- (id).cxx_construct;
- (void)_removeProfileCustomFavoritesReferenceToBookmarkFolderIfNeeded:(id)a0;
- (id)bookmarkGroupForUndoController:(id)a0;
- (void)exportBookmarks;
- (void)savePendingChangesSynchronously;
- (void)__savePendingChangesSoonWithPriority:(long long)a0 completionHandler:(id /* block */)a1;
- (void)_addAllTabGroupScopedBookmarkListsIfNeeded;
- (void)_addBookmark:(id)a0 parent:(id)a1;
- (BOOL)_areScopedBookmarkLists:(id)a0 equivalentToSafariBookmarkLists:(id)a1;
- (void)_beginObservingNetworkChangeNotifications;
- (id)_bookmarkSourceCreateIfNeededWithPossibleTitles:(id)a0 displayTitle:(id)a1 indexInTopBookmark:(unsigned long long)a2 fileNeedsUpdate:(BOOL *)a3;
- (id)_bookmarkSourceWithPossibleTitles:(id)a0 displayTitle:(id)a1 bookmarkIndex:(unsigned long long *)a2 isFirstTitle:(BOOL *)a3;
- (BOOL)_bookmarksFileHasChanged;
- (id)_builtInBookmarksBarBookmark;
- (void)_copyChildBookmarksFromBookmark:(id)a0 toBookmark:(id)a1;
- (void)_createScopedBookmarkFolderForTabGroup:(id)a0 withFolderId:(int)a1;
- (void)_createTabGroupScopedBookmark:(id)a0 withParentFolderID:(int)a1;
- (id)_customFavortiesServerIdForDefaultProfile;
- (void)_deleteMigratedBookmarksDirectoryIfContainsNoMigratableFiles;
- (void)_deleteMigratedNonSafariBookmarkFiles;
- (void)_deleteTabGroupScopedBookmark:(id)a0 withParentFolderId:(int)a1;
- (void)_didReceiveNetworkChangeNotification:(id)a0;
- (void)_enqueueSaveCompletionHandler:(id /* block */)a0;
- (BOOL)_favoritesContainsBookmark:(id)a0;
- (void)_fillBookmarksBarWithBuiltInBookmarksIfNecessary;
- (void)_fillWithBuiltInBookmarks;
- (id)_findNthFavoriteLeaf:(unsigned long long)a0;
- (void)_flushPendingSaveCompletionHandlersWithSuccess:(BOOL)a0;
- (void)_handleBookmarkSummaryResponse:(id)a0 forBookmark:(id)a1;
- (void)_importMigratedNonSafariBookmarks;
- (int)_importMigratedSafariBookmarks;
- (id)_initWithBookmarksFilePath:(id)a0 builtInBookmarksURL:(id)a1 migratedBookmarksFolder:(id)a2 siteMetadataManagerProvider:(id /* block */)a3;
- (id)_insertNewBookmarkList:(id)a0 indexInTopBookmark:(unsigned long long)a1 excludedFromPlist:(BOOL)a2;
- (void)_invalidatePendingSaveTimer;
- (void)_loadTabGroupScopedBookmarks;
- (void)_lockFileLockerWithCompletionHandler:(id /* block */)a0;
- (BOOL)_menuContainsBookmark:(id)a0;
- (void)_pendingSaveTimerFired:(id)a0;
- (void)_postBookmarksWereReloadedNotification;
- (void)_postDidAddNotificationForBookmark:(id)a0 parent:(id)a1;
- (void)_postDidChangeNotificationForBookmark:(id)a0;
- (void)_postDidRemoveNotificationForBookmark:(id)a0 parent:(id)a1;
- (void)_postFavoritesChangedNotificationsIfNecessaryForChangeToBookmark:(id)a0 parent:(id)a1;
- (BOOL)_reloadBookmarksCheckingIfFileChanged:(BOOL)a0;
- (void)_reloadBookmarksInBackground;
- (void)_reloadScopedBookmarkList:(id)a0;
- (void)_reloadTabGroupFavorites;
- (void)_rememberBookmarksFileInfo;
- (void)_removeSandboxExtensionFromStoreIfNeeded:(id)a0;
- (void)_resetPendingSavePriority;
- (void)_savePendingChangesSoonForPossiblyInteractiveBookmarkChange:(BOOL)a0 completionHandler:(id /* block */)a1;
- (void)_savePendingChangesSoonWithPriority:(long long)a0 completionHandler:(id /* block */)a1;
- (void)_savePendingChangesWithCompletionHandler:(id /* block */)a0;
- (void)_schedulePendingSaveTimerWithPriority:(long long)a0 previousTimerInterval:(double)a1;
- (void)_sendFavoritesChangedNotification;
- (void)_setBookmarksCollectionTitlesFromBookmarkGroup;
- (void)_setTemporaryBookmarksCollectionTitles;
- (BOOL)_shouldTellUserAboutBookmarkSaveProblems;
- (BOOL)_shouldTryToFetchMetadataForBookmarkLeaf:(id)a0;
- (void)_stopObservingNetworkChangeNotifications;
- (void)_unlockFileLockerWithCompletionHandler:(id /* block */)a0;
- (void)_updateBookmarkSourcesSkippingSave:(BOOL)a0;
- (void)_updateDisplayedTitlesForBuiltInBookmarks:(id)a0;
- (void)_updateSandboxExtensionFromStoreIfNeeded:(id)a0;
- (void)addTopLevelBookmark:(id)a0;
- (void)addTopLevelBookmark:(id)a0 title:(id)a1;
- (id)bookmarkForNewWindowTabsPreferenceForProfileIdentifier:(id)a0;
- (id)bookmarkForPersistentIdentifier:(id)a0;
- (void)bookmarkGroup:(id)a0 bookmarkDidChange:(id)a1 changeWasInteractive:(BOOL)a2;
- (void)bookmarkGroup:(id)a0 bookmarkWasAdded:(id)a1 toParent:(id)a2;
- (void)bookmarkGroup:(id)a0 bookmarkWasRemoved:(id)a1 fromParent:(id)a2;
- (void)bookmarkGroup:(id)a0 bookmarksWereCleanedUpInList:(id)a1;
- (void)bookmarksWereReloadedInGroup:(id)a0;
- (id)builtInBookmarks;
- (BOOL)canHandleCommand0Through9ActionForIndex:(unsigned long long)a0;
- (BOOL)clearLocalDataForAutomatedTestingPurposes;
- (void)clearProxiesByIdentifier;
- (id)createTopLevelBookmarkListWithTitle:(id)a0;
- (id)customFavoritesBookmarkListForProfileFavoritesFolderServerID:(id)a0;
- (id)customFavoritesBookmarkListForProfileIdentifier:(id)a0;
- (void)deleteDefunctProfileFavoritesWithServerID:(id)a0;
- (void)displayNewBookmarksSheetForBookmark:(id)a0 inWindow:(id)a1;
- (void)exportBookmarksToPath:(id)a0 shouldHideExtension:(BOOL)a1;
- (void)fetchBookmarkSourceWithStoredTitle:(id)a0 displayedTitle:(id)a1 completionHandler:(id /* block */)a2;
- (void)fetchBookmarksBarCollectionWithCompletionHandler:(id /* block */)a0;
- (void)fetchBookmarksMenuCollectionWithCompletionHandler:(id /* block */)a0;
- (void)fetchMetadataForBookmark:(id)a0 completionHandler:(id /* block */)a1;
- (void)fileChangeObserverFileDidChange:(id)a0;
- (int)fileLocker:(const void *)a0 actionForApparentlyAbandonedLock:(id)a1;
- (void)fileLocker:(const void *)a0 lockWasStolen:(id)a1;
- (void)fileLocker:(const void *)a0 logPrivacyPreservingString:(const char *)a1 ofType:(unsigned char)a2;
- (void)handleCommand0Through9ActionForIndex:(unsigned long long)a0;
- (id)historyCollectionForProfileIdentifier:(id)a0;
- (void)insertProxyBookmarkWithIdentifier:(id)a0 atIndex:(unsigned long long)a1;
- (id)parentFolderOfAllTabGroupFavorites;
- (void)performUpdatesAtomically:(id /* block */)a0 completionHandler:(id /* block */)a1;
- (id)persistentIdentifierForBookmark:(id)a0;
- (BOOL)reloadBookmarksFromFileIfChanged;
- (void)resetWithBookmarksFilePath:(id)a0;
- (void)tabGroupManager:(id)a0 didFinishSyncForScopedBookmarkLists:(id)a1;
- (void)tabGroupManager:(id)a0 didRemoveTabGroupWithUUID:(id)a1;
- (void)tabGroupManager:(id)a0 didUpdateScopedBookmarkList:(id)a1;
- (void)tabGroupManager:(id)a0 didUpdateTabGroupWithUUID:(id)a1;
- (void)tabGroupManagerDidUpdateTabGroups:(id)a0;
- (id)tabGroupScopedTopBookmarkListForTabGroup:(id)a0;

@end
