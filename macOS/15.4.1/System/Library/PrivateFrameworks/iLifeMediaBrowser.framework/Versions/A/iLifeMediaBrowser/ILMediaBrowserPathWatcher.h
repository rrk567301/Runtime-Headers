@class NSLock, NSString, NSURL, NSSet, NSOperationQueue, NSMutableDictionary, NSMutableArray, NSObject;
@protocol OS_dispatch_queue;

@interface ILMediaBrowserPathWatcher : NSObject <NSFilePresenter> {
    NSMutableDictionary *watchedNodes;
    NSMutableDictionary *watchedQueryNodes;
    NSMutableDictionary *gatheredNotifications;
    NSMutableDictionary *watchedUnmountedNodes;
    NSMutableDictionary *watchedForCreationNodes;
    NSMutableDictionary *watchedMasterList;
    struct __MDQuery { } *watchedForCreationQuery;
    BOOL watchedForCreationQueryNeedsUpdate;
    NSMutableArray *spotlightToDoQueue;
    NSMutableArray *watchedQueryToDoQueue;
    NSLock *_watchedQueryToDoLock;
    BOOL _terminating;
    NSMutableDictionary *spotlightQueriesByPath;
    BOOL alwaysNotify;
    long long startingFDCount;
    long long usedFDCount;
    struct __FSEventStream { } *watcherStreamRef;
    struct __DASession { } *diskArbSession;
    NSObject<OS_dispatch_queue> *dispatch_queue_fsevents;
    NSObject<OS_dispatch_queue> *dispatch_queue_spotlight;
    NSObject<OS_dispatch_queue> *dispatch_queue_diskArb;
    unsigned long long _latestFSEventId;
    NSOperationQueue *_presentedItemOperationQueue;
    NSURL *_presentedItemURL;
    NSString *_originaliAppsPlistPath;
}

@property (readonly, copy) NSURL *presentedItemURL;
@property (readonly, retain) NSOperationQueue *presentedItemOperationQueue;
@property (readonly, copy) NSURL *primaryPresentedItemURL;
@property (readonly) NSSet *observedPresentedItemUbiquityAttributes;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

+ (id)sharedPathWatcher;

- (void)dealloc;
- (id)init;
- (id)_init;
- (void)presentedItemDidChange;
- (void)cleanupFromTerminate;
- (void)removeAllPaths;
- (BOOL)isCannedSearch:(id)a0;
- (void)_delayAndStartFSEventStream;
- (void)removeAllPaths:(id)a0;
- (void)_handleDiskUnmount:(struct __DADisk { } *)a0;
- (void)addObserver:(id)a0 forPath:(id)a1;
- (void)addObserver:(id)a0 forPath:(id)a1 fd:(long long)a2;
- (void)addObserver:(id)a0 forPath:(id)a1 fd:(long long)a2 forFilePath:(id)a3;
- (void)addSpotlightQueryPath:(id)a0;
- (void)addToMasterList:(id)a0 observer:(id)a1;
- (void)addWatchedQueryObserver:(id)a0 forQuery:(id)a1;
- (void)cancelSpotlightRoutine;
- (void)createWatchedQueryNode:(id)a0 observer:(id)a1 queryScope:(id)a2 queryRunMode:(int)a3;
- (void)executeSavedQuery:(id)a0;
- (void)executeWatchForCreationQuery;
- (void)executeWatchedQuery:(id)a0;
- (void)fileSystemMounted:(id)a0;
- (void)fileSystemUnmounted:(id)a0;
- (id)fsEventWatchedPaths;
- (void)fseventsCallback:(struct __FSEventStream { } *)a0 callbackInfo:(void *)a1 numEvents:(int)a2 eventPaths:(struct __CFArray { } *)a3 eventMasks:(const unsigned int *)a4 eventIDs:(const unsigned long long *)a5;
- (void)gatherNotification:(unsigned long long)a0 forPath:(id)a1;
- (void)iLMBGCDSetup;
- (BOOL)isSavedQuery:(id)a0;
- (BOOL)isThereSpotlightWorkToDo;
- (void)notifyObserverThreaded:(id)a0;
- (void)notifyObserversForNode:(id)a0 flags:(long long)a1 changedPath:(id)a2;
- (void)notifyWatchedQueryChanged:(id)a0;
- (id)originaliAppsPlistPath;
- (void)postNotification:(unsigned long long)a0 forPath:(id)a1;
- (id)queryPath:(struct __MDQuery { } *)a0;
- (void)refreshAllPaths:(id)a0;
- (void)refreshPath:(id)a0 observer:(id)a1;
- (void)refreshSavedQuery:(id)a0;
- (void)removeAllSavedQueries;
- (void)removeAllUnmountedPaths:(id)a0;
- (void)removeAllWatchedQueries:(id)a0;
- (void)removeFromMasterList:(id)a0 observer:(id)a1;
- (void)removeNodeIfEmpty:(id)a0;
- (void)removeObserver:(id)a0 node:(id)a1 path:(id)a2;
- (void)removePath:(id)a0 observer:(id)a1;
- (void)removePathInternal:(id)a0 observer:(id)a1;
- (void)removeQuery:(id)a0 observer:(id)a1;
- (void)removeSavedQuery:(id)a0 observer:(id)a1;
- (void)removeWatchedQueryNodeIfEmpty:(id)a0 query:(id)a1;
- (void)removeWatchedQueryObserver:(id)a0 node:(id)a1 query:(id)a2;
- (void)scheduleSpotlightRoutine;
- (void)sendNotifications;
- (void)setWatchedForCreationQuery:(struct __MDQuery { } *)a0;
- (void)setWatcherStreamRef:(struct __FSEventStream { } *)a0;
- (void)spotlightQueryPeriodicRoutine;
- (void)spotlightWatchedForCreationPathChanged:(id)a0;
- (void)spotlightWatchedPathChanged:(id)a0;
- (BOOL)startFSEventStream:(id)a0;
- (void)stopFSEventStream;
- (void)watchForCreationPath:(id)a0 observer:(id)a1;
- (BOOL)watchForCreationPathIsUnique:(id)a0 observer:(id)a1;
- (void)watchPath:(id)a0 observer:(id)a1;
- (void)watchPath:(id)a0 observer:(id)a1 forEvents:(unsigned long long)a2;
- (void)watchPathForMount:(id)a0 observer:(id)a1;
- (void)watchPathInternal:(id)a0 observer:(id)a1;
- (BOOL)watchPathIsUnique:(id)a0 observer:(id)a1;
- (void)watchQuery:(id)a0 observer:(id)a1;
- (void)watchQuery:(id)a0 observer:(id)a1 queryScope:(id)a2 queryRunMode:(int)a3;
- (id)watchTarget:(id)a0;
- (BOOL)watchUnmountedPathIsUnique:(id)a0 observer:(id)a1;
- (id)watchedFiles:(id)a0;
- (void)watchedQueryChanged:(id)a0;
- (BOOL)watchedQueryIsUnique:(id)a0 observer:(id)a1;
- (struct __FSEventStream { } *)watcherStreamRef;

@end
