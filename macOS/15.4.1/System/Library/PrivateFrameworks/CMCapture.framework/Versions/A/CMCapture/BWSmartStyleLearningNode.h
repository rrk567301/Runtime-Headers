@class FigCaptureSmartStyle, NSString, NSData, NSMutableDictionary, BWVideoFormat, NSDictionary, NSMutableArray, FigMetalContext, NSObject, NSNumber;
@protocol CMISmartStyleProcessor, OS_dispatch_queue;

@interface BWSmartStyleLearningNode : BWNode <BWInferenceFormatProvider, BWInferencePixelBufferPoolProvider, BWSemanticStyleSceneObserver> {
    FigMetalContext *_metalContext;
    Class _smartStyleClass;
    id<CMISmartStyleProcessor> _smartStyleProcessor;
    Class _smartStyleProcessorInputOutputClass;
    NSMutableArray *_inputMasksSampleBufferQueue;
    struct os_unfair_lock_s { unsigned int _os_unfair_lock_opaque; } _styleUpdateLock;
    struct os_unfair_lock_s { unsigned int _os_unfair_lock_opaque; } _inputMasksSampleBufferQueueLock;
    NSMutableArray *_inputStyleContainerSampleBufferQueue;
    struct os_unfair_lock_s { unsigned int _os_unfair_lock_opaque; } _inputStyleContainerSampleBufferQueueLock;
    FigCaptureSmartStyle *_initialStyle;
    struct __CVBuffer { } *_initialCoefficientsPixelBuffer;
    struct opaqueCMSampleBuffer { } *_learnedCoefficientsSampleBuffer;
    struct __CVBuffer { } *_identityCoefficientsPixelBuffer;
    NSMutableDictionary *_currentImageStats;
    NSMutableDictionary *_currentImageStatsExtended;
    struct os_unfair_lock_s { unsigned int _os_unfair_lock_opaque; } _semanticStyleSceneLock;
    int _semanticStyleSceneType;
    BOOL _propagateMasks;
    BOOL _preLTMThumbnailFound;
    struct { long long value; int timescale; unsigned int flags; long long epoch; } _previousPTS;
    BOOL _generateCoefficients;
    BOOL _generateImageStats;
    BOOL _runVMRefiner;
    BOOL _runVMRefinerFPRejection;
    BOOL _gdcAttachmentsEnabled;
    BWVideoFormat *_anstMaskVideoFormat;
    NSMutableDictionary *_refinedVideoFormatByAttachedMediaKey;
    NSMutableDictionary *_processorVideoFormatsByAttachedMediaKeys;
    NSMutableDictionary *_processorPixelBufferPoolsByAttachedMediaKeys;
    NSMutableDictionary *_intermediateVideoFormatsByAttachedMediaKeys;
    NSMutableDictionary *_intermediatePixelBufferPoolsByAttachedMediaKeys;
    NSDictionary *_cameraInfoByPortType;
    BOOL _firstFrame;
    NSString *_lastLearnedPortType;
    unsigned int _learningRate;
    unsigned int _learningFramesPerSecondUnit;
    unsigned int _learningMaxFramesPerSecond;
    float _statsUpdateDeltaTimeThreshold;
    float _anstMasksMatchingTimeInSecondsThreshold;
    struct os_unfair_lock_s { unsigned int _os_unfair_lock_opaque; } _timingLock;
    float _timeInSecondsUntilNextStatsUpdate;
    float _timeInSecondsUntilNextLearning;
    NSObject<OS_dispatch_queue> *_refinerPrepareQueue;
    NSObject<OS_dispatch_queue> *_workQueue;
    struct os_unfair_lock_s { unsigned int _os_unfair_lock_opaque; } _workQueueLock;
    unsigned int _workQueueRenderCount;
    unsigned int _workQueueLearnCount;
    FigCaptureSmartStyle *_smartStyleLearned;
    NSNumber *_srlCurveParameter;
    NSData *_srlStats;
    struct CGRect { struct CGPoint { double x; double y; } origin; struct CGSize { double width; double height; } size; } _lastLearnedROI;
    struct os_unfair_lock_s { unsigned int _os_unfair_lock_opaque; } _mostRecentMasksLock;
    BOOL _learnedLastFrame;
    struct opaqueCMSampleBuffer { } *_mostRecentLearnedPersonMaskSampleBuffer;
    struct opaqueCMSampleBuffer { } *_mostRecentLearnedSkinMaskSampleBuffer;
    struct opaqueCMSampleBuffer { } *_mostRecentLearnedSkyMaskSampleBuffer;
    BOOL _bypassStyleEngineForStandardStyle;
}

@property (retain, nonatomic) FigCaptureSmartStyle *smartStyle;
@property (nonatomic) BOOL disableWaitForCoefficientsOnFirstFrame;
@property (nonatomic) BOOL subjectRelightingEnabled;
@property (retain, nonatomic) NSDictionary *cameraInfoByPortType;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

+ (void)initialize;

- (void)dealloc;
- (id)nodeType;
- (id)inputFormatForAttachedMediaKey:(id)a0;
- (void)_asynchronouslyDecrementLearnCount;
- (void)_asynchronouslyDecrementRenderCount;
- (void)_asynchronouslyLearnWithContainer:(struct opaqueCMSampleBuffer { } *)a0 inputUnstyledSampleBuffer:(struct opaqueCMSampleBuffer { } *)a1 withUnrefinedMasks:(id)a2 withStats:(id)a3 withStatsExtended:(id)a4 styleToLearn:(id)a5 shouldBypass:(BOOL)a6;
- (void)_asynchronouslyRenderSampleBuffer:(struct opaqueCMSampleBuffer { } *)a0 outputLinearThumbnailSampleBuffer:(struct opaqueCMSampleBuffer { } *)a1 outputUnstyledThumbnailSampleBuffer:(struct opaqueCMSampleBuffer { } *)a2 synchronizingEvent:(id)a3;
- (void)_asynchronouslySignalEvent:(id)a0;
- (id)_blitMasksToOutputPools:(id)a0 unstyledSampleBuffer:(struct opaqueCMSampleBuffer { } *)a1 currentPTS:(struct { long long x0; int x1; unsigned int x2; long long x3; })a2;
- (int)_createCoefficientsFromSampleBuffer:(struct opaqueCMSampleBuffer { } *)a0 to:(struct opaqueCMSampleBuffer **)a1;
- (int)_createIdentityCoefficientsFromSampleBuffer:(struct opaqueCMSampleBuffer { } *)a0 to:(struct opaqueCMSampleBuffer **)a1;
- (int)_createSmartStyleContainerFromSampleBuffer:(struct opaqueCMSampleBuffer { } *)a0 unstyledThumbnailSampleBuffer:(struct opaqueCMSampleBuffer { } *)a1 linearThumbnailSampleBuffer:(struct opaqueCMSampleBuffer { } *)a2 to:(struct opaqueCMSampleBuffer **)a3;
- (int)_extractANSTMasks:(struct opaqueCMSampleBuffer { } *)a0 forPTS:(struct { long long x0; int x1; unsigned int x2; long long x3; })a1;
- (int)_findCorrespondingSmartStyleContainerWithMasks:(id)a0 outputSmartStyleContainer:(struct opaqueCMSampleBuffer **)a1;
- (int)_getContainerAssetsFromSampleBuffer:(struct opaqueCMSampleBuffer { } *)a0 outputUnstyledThumbnailSampleBuffer:(struct opaqueCMSampleBuffer **)a1 outputLinearThumbnailSampleBuffer:(struct opaqueCMSampleBuffer **)a2;
- (struct { long long x0; int x1; unsigned int x2; long long x3; })_getSampleBufferPresentationTimeStamp:(struct opaqueCMSampleBuffer { } *)a0;
- (int)_loadAndConfigureSmartStyleBundle;
- (void)_releaseResources;
- (int)_runFalsePositiveRejectionOnPixelBuffer:(struct __CVBuffer { } *)a0 unrefinedPixelBuffer:(struct __CVBuffer { } *)a1;
- (id)_undistortMasks:(id)a0 unstyledSampleBuffer:(struct opaqueCMSampleBuffer { } *)a1 currentPTS:(struct { long long x0; int x1; unsigned int x2; long long x3; })a2 useIntermediatePools:(BOOL)a3;
- (struct opaqueCMSampleBuffer { } *)_unpackSbufFromPrimaryCameraStream:(struct opaqueCMSampleBuffer { } *)a0;
- (void)_updateCurrentSmartStyleMetadata:(id)a0 onSbuf:(struct opaqueCMSampleBuffer { } *)a1;
- (void)configurationWithID:(long long)a0 updatedFormat:(id)a1 didBecomeLiveForInput:(id)a2;
- (void)didReachEndOfDataForInput:(id)a0;
- (void)didSelectFormat:(id)a0 forInput:(id)a1 forAttachedMediaKey:(id)a2;
- (id)initWithOutputs:(unsigned long long)a0 masksRefinerEnabled:(BOOL)a1 propagateMasks:(BOOL)a2;
- (id)inputInferenceVideoFormatForAttachedMediaKey:(id)a0;
- (id)inputVideoFormatForAttachedMediaKey:(id)a0;
- (BOOL)intermediateResourceTrackingAllowedForAttachedMediaKey:(id)a0;
- (id)nodeSubType;
- (id)outputFormatForAttachedMediaKey:(id)a0;
- (id)outputVideoFormatForAttachedMediaKey:(id)a0;
- (void)prepareForCurrentConfigurationToBecomeLive;
- (id)preparedOutputPixelBufferPoolForAttachedMediaKey:(id)a0 format:(id)a1;
- (int)processMaskSampleBuffer:(struct opaqueCMSampleBuffer { } *)a0;
- (int)processVideoSampleBuffer:(struct opaqueCMSampleBuffer { } *)a0 frameEmitted:(BOOL *)a1;
- (void)renderSampleBuffer:(struct opaqueCMSampleBuffer { } *)a0 forInput:(id)a1;
- (void)semanticStyleSceneTypeDidChange:(int)a0;

@end
