@class ISDDataDirectoryVersion, NSString, NSMutableDictionary, ISDAdminDatabase, ISDNameNumberProvider;

@interface ISDDataManager : NSObject <ISyncNameNumberProvider, NSKeyedUnarchiverDelegate> {
    NSString *_dataDirectory;
    NSString *_adminDatabasePath;
    NSString *_schemasArchivePath;
    ISDAdminDatabase *_adminDatabase;
    NSString *_syncingClientListPath;
    unsigned int _anchor;
    BOOL _shouldBumpAnchorOnNextChange;
    BOOL _shouldUpdateMetadataOnEnableFlush;
    NSMutableDictionary *_clients;
    NSMutableDictionary *_schemas;
    NSMutableDictionary *_dataClasses;
    NSMutableDictionary *_entities;
    unsigned int _syncGeneration;
    BOOL _clientAdminDataChanged;
    BOOL _clientSyncStateChanged;
    BOOL _schemaAdminDataChanged;
    ISDDataDirectoryVersion *_dataVersion;
    ISDNameNumberProvider *_associatedNameNumberProvider;
    BOOL _shouldWriteSchemasArchiveToDisk;
}

@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

+ (void)initialize;
+ (BOOL)dataVersionIsPreNameNumber;
+ (void)setDataVersionIsPreNameNumber:(BOOL)a0;

- (void)dealloc;
- (id)unarchiver:(id)a0 didDecodeObject:(id)a1;
- (void)rollback;
- (id)entities;
- (unsigned int)anchor;
- (id)dataDirectory;
- (id)clientWithIdentifier:(id)a0;
- (id)allClients;
- (void)_applyChangesFromDataClassesFromSchema:(id)a0;
- (void)_applyChangesFromSchemas:(id)a0;
- (void)_validateExtensionNameSuppliedInParsedSchemas:(id)a0 schemaBundlePath:(id)a1;
- (id)entitiesMapping;
- (id)entityWithName:(id)a0;
- (void)_clearClientStateForClientWithDirectory:(id)a0;
- (id)schemaWithName:(id)a0;
- (BOOL)shouldWriteSchemasArchiveToDisk;
- (void)_applyChangesFromEntityComponentsFromSchema:(id)a0;
- (void)_unregisterInvalidatedClientsRegisteredForEntities:(id)a0 usingHelper:(id)a1;
- (id)entityNamesToTruthSegmentNames:(id)a0;
- (void)readObjectGraph;
- (id)schemas;
- (id)_dataClassNameFromStubEntity:(id)a0;
- (void)unregisterClientWithIdentifier:(id)a0;
- (void)_ensureDataDirectoryExistsForClientWithId:(id)a0;
- (void)_ensureTruthDatabasesExistForDataclasses:(id)a0 andNoteDeletedDataclasses:(id)a1;
- (void)_ensureTruthDirectoryExistsForDataclassNamed:(id)a0;
- (id)_entityNamesSetFromEntities:(id)a0;
- (id)_entityNamesToDataclassNames:(id)a0;
- (void)_getDataClassesDeleted:(id)a0 dataClassesAdded:(id)a1 inParsedSchemas:(id)a2;
- (void)_getEntityComponentsDeleted:(id)a0 modified:(id)a1 incompatiblyModified:(id)a2 inParsedSchemas:(id)a3;
- (id)_isInvalidClient:(id)a0;
- (void)_processChangesForSchemas:(id)a0 ecDeletions:(id)a1 ecModifications:(id)a2 ecIncompatibleModifications:(id)a3 dcDeletions:(id)a4 helper:(id)a5;
- (id)_recoveryTempFileInfo;
- (BOOL)_releaseAdminDBLockIfNecessary;
- (void)_removeDataDirectoryForClientWithId:(id)a0;
- (void)_removeSyncStates:(id)a0 forClient:(id)a1;
- (void)_replaceFileReferenceInObject:(id)a0 forKey:(id)a1 withPath:(id)a2 bundleId:(id)a3 bundleRelativePath:(id)a4;
- (void)_replaceFileReferenceInObject:(id)a0 forKey:(id)a1 withPath:(id)a2 bundleId:(id)a3 bundleRelativePath:(id)a4 binRelativePath:(id)a5;
- (void)_replaceFileReferenceInObject:(id)a0 forKey:(id)a1 withPath:(id)a2 relativeToAnchorFilePath:(id)a3 bundleId:(id)a4 bundleRelativePath:(id)a5;
- (BOOL)_shouldUpdateSyncStateForClient:(id)a0 entityName:(id)a1;
- (BOOL)_shouldValidateClient:(id)a0;
- (void)_updateClient:(id)a0 fromDescription:(id)a1 forceRefresh:(BOOL)a2;
- (void)_updateClientInfoForClient:(id)a0 fromDescription:(id)a1;
- (void)_updateClientSyncStatesForModifiedEntities:(id)a0 incompatiblyModifiedEntities:(id)a1;
- (void)_updateDataClassNamesToClientIdentifiers:(id)a0 forClient:(id)a1;
- (void)_updateListOfClientsThatSyncWithOtherClients;
- (void)_updatePullOnlyEntitiesForClient:(id)a0 fromDescription:(id)a1;
- (void)_updatePushOnlyEntitiesForClient:(id)a0 fromDescription:(id)a1;
- (void)_updateSyncAlertToolForClient:(id)a0 fromDescription:(id)a1;
- (void)_updateSyncStatesForClient:(id)a0 fromDescription:(id)a1 forceRefresh:(BOOL)a2;
- (void)_validateClient:(id)a0;
- (void)_validateClientDescriptionFilesAndUnregisterIfNecessary;
- (void)_validateNoCrossDataClassRelationshipsInParsedSchemas:(id)a0 schemaBundlePath:(id)a1;
- (void)_validateParsedSchemas:(id)a0 schemaBundlePath:(id)a1;
- (void)_validateUndefinedObjectsInParsedSchemas:(id)a0 schemaBundlePath:(id)a1;
- (void)_whackDeletedDataClasses:(id)a0;
- (void)_whackDeletedEntityComponents:(id)a0;
- (id)allClientIdentifiers;
- (void)assignNameNumberMappings:(id)a0;
- (void)bumpAnchor;
- (void)checkForInconsistentResetDataStateAndRepairIfNeeded;
- (void)checkForInconsistentRunningStateAndRepairIfNeeded;
- (id)clientIdentifiersThatSyncEntityNamesForMingler:(id)a0;
- (id)clientsSyncingEntityNames:(id)a0;
- (id)clientsToAlertForClient:(id)a0 entityNames:(id)a1;
- (id)computeClosureOfEntityNames:(id)a0 includeReferringEntities:(BOOL)a1;
- (id)computeConservativeClosureOfEntityNames:(id)a0;
- (void)createTruthSegmentsIfNecessaryInDirectory:(id)a0 usingFileManager:(id)a1;
- (id)dataClassNamesForEntities:(id)a0;
- (id)dataClassWithName:(id)a0;
- (id)dataClasses;
- (id)dataDirectoryForClientWithIdentifier:(id)a0;
- (BOOL)dataVersionIsLeopard;
- (BOOL)dataVersionIsTigerOrOlder;
- (id)dataclassNamesForEntitiesWithNames:(id)a0;
- (void)disableFlush;
- (void)enableFlush;
- (id)entitiesIncludingRelatedEntities:(id)a0;
- (id)entitiesWithDataClassName:(id)a0;
- (id)fileReferenceWithPath:(id)a0 bundleId:(id)a1 bundleRelativePath:(id)a2;
- (id)fileReferenceWithPath:(id)a0 bundleId:(id)a1 bundleRelativePath:(id)a2 windowsBinRelativePath:(id)a3;
- (id)initWithDataDirectory:(id)a0;
- (id)latestGenerationForEntitiesNamed:(id)a0;
- (void)loadAdminDatabase;
- (void)loadAdminDatabaseWithoutNotifications;
- (id)nameNumberProvider;
- (unsigned int)nextSyncGeneration;
- (void)noteChangesFromClient:(id)a0 key:(id)a1 value:(id)a2;
- (void)noteChangesFromDataClass:(id)a0 key:(id)a1 value:(id)a2;
- (void)noteChangesFromEntity:(id)a0 key:(id)a1 value:(id)a2;
- (void)noteChangesFromFileReference:(id)a0 key:(id)a1 value:(id)a2;
- (void)noteChangesFromSchema:(id)a0 key:(id)a1 value:(id)a2;
- (void)noteChangesFromSyncState:(id)a0 key:(id)a1 value:(id)a2;
- (void)noteSyncServicesDirectoryNeedsToBeReset;
- (void)noteSyncServicesDirectoryNeedsToBeResetRemovingAdminDB:(BOOL)a0;
- (void)probeClientDatabasesForStaleLocksAndRepairIfNecessary;
- (void)probeTruthAndAdminDatabasesForStaleLocksAndRepairIfNecessary;
- (void)purgeDeletedRecordsAndTuplesInTruth;
- (void)purgeDeletedRecordsAndTuplesInTruth:(BOOL)a0;
- (void)purgeSyncPlanDetailBefore:(id)a0;
- (void)readSchemasArchive;
- (void)recordSyncPlanInformation:(id)a0;
- (void)refreshNameNumberProvider:(id)a0;
- (void)registerClientWithIdentifier:(id)a0 description:(id)a1 descriptionFilePath:(id)a2 descriptionBundleId:(id)a3 descriptionBundleRelativePath:(id)a4 descriptionBinRelativePath:(id)a5 wasChanged:(BOOL *)a6;
- (void)registerSchemaWithDescription:(id)a0 descriptionFilePath:(id)a1 bundlePath:(id)a2 helper:(id)a3 linkedOnTiger:(BOOL)a4;
- (void)registerSchemaWithDescription:(id)a0 descriptionFilePath:(id)a1 helper:(id)a2 linkedOnTiger:(BOOL)a3;
- (void)rememberIfDataVersionIsPreNameNumber;
- (void)removeTruthSegmentDatabasesInDirectory:(id)a0 usingFileManager:(id)a1;
- (id)replacementObjectForObject:(id)a0;
- (void)resetClientWithIdentifier:(id)a0;
- (BOOL)resetClientsWithLastSyncDatesEarlierThanDate:(id)a0 purgeTruth:(BOOL)a1 andVacuum:(BOOL)a2;
- (void)resetSyncData;
- (void)resetSyncDataIncludingClientsAndSchemas:(BOOL)a0;
- (void)resetSyncHistory;
- (id)resetSyncModesForAllClientsSyncingEntities:(id)a0;
- (void)resetSyncModesForClientWithIdentifier:(id)a0;
- (id)schemaDefiningEntityComponentWithExtensionName:(id)a0 entityName:(id)a1;
- (id)schemaNameForDataclass:(id)a0;
- (void)setShouldBumpAnchorOnNextChange:(BOOL)a0;
- (void)setShouldWriteSchemasArchiveToDisk:(BOOL)a0;
- (BOOL)shouldParseDescriptionForObject:(id)a0 withDescriptionFilePath:(id)a1 descriptionBundleId:(id)a2 descriptionBundleRelativePath:(id)a3 descriptionBinRelativePath:(id)a4 updateFileReference:(BOOL)a5;
- (BOOL)shouldReparseDescriptionFileForObject:(id)a0;
- (BOOL)shouldSyncClient:(id)a0 forEntityNames:(id)a1;
- (BOOL)shouldSyncClient:(id)a0 withClient:(id)a1 entityNames:(id)a2;
- (id)syncDatesForClientsEarlierThanDate:(id)a0;
- (unsigned int)syncGeneration;
- (void)unregisterSchemaWithName:(id)a0 helper:(id)a1;
- (void)updateClientIfDescriptionFileChanged:(id)a0;
- (void)updateMetadataAndPostChangeNotifications;
- (void)writeSchemasArchive;

@end
