@class NSString, NSURL, SPCoreSpotlightTask, NSSet, NSArray, NSDictionary, NSMutableSet, NSObject, CSFileProviderDomainMonitor;
@protocol CSIndexExtensionDelegate, SPCoreSpotlightIndexerDelegate, OS_dispatch_source, OS_dispatch_queue, NSObject;

@interface SPCoreSpotlightIndexer : NSObject <UMUserPersonaUpdateObserver, MDIndexer> {
    int cancelFlags[6];
    double _lastUpdateTime;
    NSMutableSet *_bundlesWithIndexedCoreSpotlightItems;
    NSSet *_bundlesWithRemoteSearchSupport;
    NSObject<OS_dispatch_queue> *_appScopingQueue;
    NSString *_serviceName;
    NSArray *_reindexIndexers;
    struct __MDQuery { } *_sharedDocumentAttributeFixupQuery;
}

@property (retain) NSDictionary *concreteIndexers;
@property (retain, nonatomic) NSObject<OS_dispatch_source> *prefsChangeSource;
@property (retain, nonatomic) id<NSObject> dataMigrationStartObserver;
@property (retain, nonatomic) id<NSObject> dataMigrationFinishObserver;
@property (retain, nonatomic) NSSet *dataMigrationBundleIDs;
@property (retain, nonatomic) NSSet *prefsDisabledBundleIDs;
@property (retain, nonatomic) NSObject<OS_dispatch_source> *reindexAllItemsSource;
@property (retain, nonatomic) NSObject<OS_dispatch_source> *reindexAllItemsWithIdentifiersSource;
@property (retain) SPCoreSpotlightTask *reindexAllItemsTask;
@property (readonly, nonatomic) NSDictionary *fileProviderAppToExtensionBundleMap;
@property (readonly, nonatomic) NSDictionary *fileProviderExtensionToAppBundleMap;
@property (readonly, nonatomic) NSSet *fileProviderBundleIDs;
@property (retain, nonatomic) NSMutableSet *knownPersonas;
@property (nonatomic) BOOL updatePersonas;
@property (readonly) NSURL *personaListURL;
@property (weak) CSFileProviderDomainMonitor *fileProviderMonitor;
@property (retain, nonatomic) NSObject<OS_dispatch_queue> *personaQueue;
@property (retain, nonatomic) NSObject<OS_dispatch_queue> *indexQueue;
@property (retain, nonatomic) NSObject<OS_dispatch_queue> *firstUnlockQueue;
@property (retain, nonatomic) NSObject<OS_dispatch_queue> *reindexAllQueue;
@property (nonatomic) unsigned long long dataMigrationStage;
@property (readonly, nonatomic) long long transactionCount;
@property (weak) id<CSIndexExtensionDelegate> extensionDelegate;
@property (weak) id<SPCoreSpotlightIndexerDelegate> indexerDelegate;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

+ (id)sharedInstance;
+ (void)shutdown;
+ (void)sync;
+ (void)preheat;
+ (void)deviceStateWillChange:(BOOL)a0;
+ (void)setIndexerDelegate:(id)a0;
+ (unsigned long long)totalIndexDiskSpace;
+ (void)initialize;
+ (id)fileProviderProtectionClasses;
+ (id)_mergedTokenRewrites:(id)a0;
+ (void)setMemoryPressureStatus:(unsigned long long)a0;
+ (void)shrink:(unsigned long long)a0;
+ (BOOL)writeDiagnostic:(id)a0 bundleID:(id)a1 identifier:(id)a2 logQuery:(BOOL)a3;
+ (unsigned long long)storageSizeForFolder:(id)a0;
+ (void)cooldown;
+ (unsigned long long)freeIndexDiskSpace;
+ (void)deactivate;
+ (id)allProtectionClasses;
+ (id)_filterReindexAllExtensions:(id)a0;
+ (void)loginWindowNotificationInit;

- (void)closeIndex;
- (void)indexSearchableItems:(id)a0 deleteSearchableItemsWithIdentifiers:(id)a1 clientState:(id)a2 protectionClass:(id)a3 forBundleID:(id)a4 options:(long long)a5 completionHandler:(id /* block */)a6;
- (void)prepareIndexingWhileLocked:(id)a0 protectionClass:(id)a1 holdAssertionFor:(double)a2 completionHandler:(id /* block */)a3;
- (void)finishIndexingWhileLocked:(id)a0 protectionClass:(id)a1 completionHandler:(id /* block */)a2;
- (void)shutdown;
- (void)fetchLastClientStateWithProtectionClass:(id)a0 forBundleID:(id)a1 clientStateName:(id)a2 options:(long long)a3 completionHandler:(id /* block */)a4;
- (void)provideFileURLForBundle:(id)a0 identifier:(id)a1 type:(id)a2 completionHandler:(id /* block */)a3;
- (void)_issueDiagnose:(int)a0 logQuery:(BOOL)a1 completionHandler:(id /* block */)a2;
- (void)addInteraction:(id)a0 bundleID:(id)a1 protectionClass:(id)a2;
- (void)revokeExpiredItems:(id)a0 activity:(id)a1 protected:(BOOL)a2;
- (void)unlock;
- (void)deleteSearchableItemsSinceDate:(id)a0 protectionClass:(id)a1 forBundleID:(id)a2 options:(long long)a3 completionHandler:(id /* block */)a4;
- (void)provideDataForBundle:(id)a0 identifier:(id)a1 type:(id)a2 completionHandler:(id /* block */)a3;
- (void)indexSearchableItems:(id)a0 deleteSearchableItemsWithIdentifiers:(id)a1 clientState:(id)a2 clientStateName:(id)a3 protectionClass:(id)a4 forBundleID:(id)a5 options:(long long)a6 completionHandler:(id /* block */)a7;
- (void)indexSearchableItems:(id)a0 deleteSearchableItemsWithIdentifiers:(id)a1 clientState:(id)a2 expectedClientState:(id)a3 clientStateName:(id)a4 protectionClass:(id)a5 forBundleID:(id)a6 options:(long long)a7 completionHandler:(id /* block */)a8;
- (void)preheat;
- (id)searchServiceName;
- (void)fileProviderInfoSetup;
- (void)cancelQuery:(id)a0;
- (void)_fetchAccumulatedStorageSizeForBundleId:(id)a0 completionHandler:(id /* block */)a1;
- (void)issueLoadTrial:(id)a0;
- (void)wipeCoreSpotlightIndexForTrial;
- (void)moveMailToClassCWithoutClone;
- (void)willModifySearchableItemsWithIdentifiers:(id)a0 protectionClass:(id)a1 forBundleID:(id)a2 options:(long long)a3 completionHandler:(id /* block */)a4;
- (void)start;
- (id)spotlightCacheFilePrefix;
- (void)cleanupStringsWithProtectionClasses:(id)a0 completionHandler:(id /* block */)a1;
- (void)_upgradeToPriorityIndex;
- (void)dealloc;
- (void)registerCacheDeleteCallbackForVolumePath:(id)a0;
- (void)deleteActionsWithIdentifiers:(id)a0 completionHandler:(id /* block */)a1;
- (void)_closeIndexWithIndexers:(id)a0;
- (void)asyncOpenIndex:(BOOL)a0 forInit:(BOOL)a1 readOnly:(BOOL)a2;
- (void)performIndexerTask:(id)a0 completionHandler:(id /* block */)a1;
- (void)lockingCx;
- (int)openIndex:(BOOL)a0;
- (void)issueSplit:(id)a0;
- (void)userLogoutCancelled:(id)a0;
- (void)validateIndexers:(id)a0 outFileDescriptor:(int)a1;
- (void)deleteAllSearchableItemsWithBundleID:(id)a0 fromClient:(id)a1 protectionClass:(id)a2 shouldGC:(BOOL)a3 deleteAllReason:(long long)a4 completionHandler:(id /* block */)a5;
- (id)sendAnalytics:(id)a0;
- (void)startQueryTask:(id)a0;
- (void)writeFileProviderBundleMap:(id)a0 fileProviderBundleIDs:(id)a1;
- (void)transferDeleteJournalsForProtectionClass:(id)a0 toDirectory:(int)a1 completionHandler:(id /* block */)a2;
- (void)issueDumpForward:(unsigned long long)a0 completionHandler:(id /* block */)a1;
- (void)_reindexAllItemsWithExtensionsAndCompletionBlock:(id /* block */)a0;
- (void)migrateForced:(BOOL)a0;
- (void)_registerForPrefsChanges;
- (id)taskForQueryWithQueryString:(id)a0 queryContext:(id)a1 eventHandler:(id /* block */)a2 resultsHandler:(id /* block */)a3 completionHandler:(id /* block */)a4;
- (void)moveMailToClassC;
- (void)clientDidCheckin:(id)a0 protectionClass:(id)a1 service:(id)a2 completionHandler:(id /* block */)a3;
- (id)startQuery:(id)a0 withContext:(id)a1 eventHandler:(id /* block */)a2 handler:(id /* block */)a3;
- (void)issueResolveFPItem:(id)a0 completionHandler:(id /* block */)a1;
- (void)issueRepair:(id)a0;
- (void)markIndexPurgeable:(BOOL)a0;
- (id)delegateServiceName;
- (void)userLogoutInitiated:(id)a0;
- (void)_issueCommand:(id)a0 outFileDescriptor:(int)a1 searchContext:(id)a2 completionHandler:(id /* block */)a3;
- (id)dumpIndexAnalyticsAtPath:(id)a0;
- (void)issueResolveFPItemForURL:(id)a0 completionHandler:(id /* block */)a1;
- (void)runMigration;
- (double)lastUpdateTime;
- (void)personaListDidUpdate;
- (void)rewriteQueryWithQueryString:(id)a0 context:(id)a1 matchInfo:(id)a2 rewriteHandler:(id /* block */)a3;
- (void)mergeWithProtectionClasses:(id)a0 power:(BOOL)a1;
- (void)restoreIndexAndClearPurgeable;
- (void)_enumerateIndexersWithProtectionClasses:(id)a0 inferSpecialIndexes:(BOOL)a1 block:(id /* block */)a2;
- (void)recycleAndPurgeIndex;
- (id)queryForWord:(id)a0 matchingAttributes:(id)a1 prefixMatch:(BOOL)a2;
- (id)fileProviderDomainFilterQueries;
- (void)rewriteFirstPassQueryWithQueryString:(id)a0 context:(id)a1 trimmedSearchStringTokens:(id)a2 populateDateSynonyms:(BOOL)a3;
- (void)issueDefrag:(id)a0 group:(id)a1;
- (void)locked;
- (id)issueHeartbeat;
- (void)resume;
- (id)init;
- (void)handleAssetsCommand:(id)a0;
- (void)mergeWithProtectionClasses:(id)a0 completionHandler:(id /* block */)a1;
- (id)priorityIndexPath;
- (void)_migrateIndexExtensionsWithEnumerator:(id)a0 forced:(BOOL)a1 migratedBundleIds:(id)a2 completionHandler:(id /* block */)a3;
- (void)mergeWithProtectionClasses:(id)a0 power:(BOOL)a1 inferSpecialIndexes:(BOOL)a2 completionHandler:(id /* block */)a3;
- (void)topKTerms:(id)a0 completionHandler:(id /* block */)a1;
- (void)deleteSearchableItemsWithDomainIdentifiers:(id)a0 protectionClass:(id)a1 forBundleID:(id)a2 fromClient:(id)a3 options:(long long)a4 completionHandler:(id /* block */)a5;
- (void)issueDuplicateOidCheckWithGroup:(id)a0 protected:(BOOL)a1;
- (void)powerStateChanged;
- (void)_reindexAllIdentifiersWithExtension:(id)a0 completionBlock:(id /* block */)a1;
- (void)recordEngagementForBundleID:(id)a0 uniqueIdentifier:(id)a1 protectionClass:(id)a2 userQuery:(id)a3 date:(id)a4;
- (void)flush;
- (id)dumpIndexAges;
- (id)taskForTopHitQueryWithQueryString:(id)a0 queryContext:(id)a1 eventHandler:(id /* block */)a2 resultsHandler:(id /* block */)a3 completionHandler:(id /* block */)a4;
- (void)issueSharedDocumentAttributeFixup;
- (void)performIndexerTask:(id)a0 withIndexExtensionsAndCompletionHandler:(id /* block */)a1;
- (void)_enumerateIndexersWithProtectionClasses:(id)a0 forBundleIds:(id)a1 inferSpecialIndexes:(BOOL)a2 block:(id /* block */)a3;
- (BOOL)isForegroundFileProviderBundleID:(id)a0;
- (unsigned long long)purgeableVectorIndexSize:(BOOL)a0;
- (void)changeStateOfSearchableItemsWithUIDs:(id)a0 toState:(long long)a1 protectionClass:(id)a2 forBundleID:(id)a3 forUTIType:(id)a4 options:(long long)a5;
- (void)issueDumpReverse:(unsigned long long)a0 completionHandler:(id /* block */)a1;
- (id)concreteIndexerForProtectionClass:(id)a0 andBundleID:(id)a1;
- (void)coolDown;
- (void)_reindexAllItemsOnPrefsChanges;
- (id)systemSettingsIndexer;
- (void)issueCleanup:(id)a0 flags:(int)a1;
- (unsigned long long)purgeableIndexSize:(id)a0;
- (void)deleteActionsBeforeTime:(double)a0 completionHandler:(id /* block */)a1;
- (void)processSearchString:(id)a0 intoTrimmedString:(id *)a1 andTokens:(id *)a2;
- (id)dateRewritesFromContext:(id)a0;
- (void)recycleIndex:(BOOL)a0;
- (id)contactsIndexer;
- (void)indexFromBundle:(id)a0 protectionClass:(id)a1 personaID:(id)a2 options:(long long)a3 items:(id)a4 itemsText:(id)a5 itemsHTML:(id)a6 clientState:(id)a7 expectedClientState:(id)a8 clientStateName:(id)a9 deletes:(id)a10 canCreateNewIndex:(BOOL)a11 completionHandler:(id /* block */)a12;
- (id)_startQueryWithQueryString:(id)a0 queryContext:(id)a1 eventHandler:(id /* block */)a2 resultsHandler:(id /* block */)a3 completionHandler:(id /* block */)a4;
- (int)_openIndex:(BOOL)a0 forInit:(BOOL)a1 readOnly:(BOOL)a2;
- (void)checkIfExtensionsNeedToBeLoaded;
- (void)issueResolveFPItemForBundle:(id)a0 domain:(id)a1 identifier:(id)a2 completionHandler:(id /* block */)a3;
- (void)shrink:(unsigned long long)a0;
- (id)dumpIndexAnalytics;
- (unsigned long long)purgeIndexForSize:(unsigned long long)a0;
- (void)fetchAttributesForProtectionClass:(id)a0 attributes:(id)a1 bundleID:(id)a2 identifiers:(id)a3 userCtx:(id)a4 flags:(int)a5 completion:(id /* block */)a6;
- (void)commitUpdatesWithCompletionHandler:(id /* block */)a0;
- (void)handleRankingCommand:(id)a0 completion:(id /* block */)a1;
- (void)userPerformedAction:(id)a0 withItem:(id)a1 protectionClass:(id)a2 forBundleID:(id)a3 personaID:(id)a4;
- (id)startQueryWithQueryString:(id)a0 queryContext:(id)a1 eventHandler:(id /* block */)a2 resultsHandler:(id /* block */)a3 completionHandler:(id /* block */)a4;
- (id)writeUISearchEnabled:(BOOL)a0;
- (void)deleteSearchableItemsWithPersonaIds:(id)a0 completionHandler:(id /* block */)a1;
- (void)setServiceName:(id)a0;
- (int)openIndex:(BOOL)a0 forInit:(BOOL)a1 readOnly:(BOOL)a2;
- (void)fileProviderActiveProvidersChanged:(id)a0;
- (void)locking;
- (void)userLogoutContinued:(id)a0;
- (void)deleteSearchableItemsWithDomainIdentifiers:(id)a0 protectionClass:(id)a1 forBundleID:(id)a2 options:(long long)a3 completionHandler:(id /* block */)a4;
- (void)mergeWithProtectionClasses:(id)a0 power:(BOOL)a1 completionHandler:(id /* block */)a2;
- (id)dumpIndexAgesAtPath:(id)a0;
- (void)_issueCacheCommand:(id)a0 xpc:(id)a1 searchContext:(id)a2 completionHandler:(id /* block */)a3;
- (void)reindexAllItemsWithIndexers:(id)a0 reason:(id)a1 completionHandler:(id /* block */)a2;
- (void)fetchBundleIdsForProtectionClass:(id)a0 completionHandler:(id /* block */)a1;
- (void)fetchCacheFileDescriptorsForProtectionClass:(id)a0 bundleID:(id)a1 identifiers:(id)a2 userCtx:(id)a3 flags:(unsigned int)a4 qos:(unsigned int)a5 completionHandler:(id /* block */)a6;
- (void)moveBackMailToClassA;
- (id)defaultIndexer;
- (void)fetchAttributesForProtectionClass:(id)a0 attributes:(id)a1 bundleID:(id)a2 identifiers:(id)a3 completion:(id /* block */)a4;
- (int)openIndex:(BOOL)a0 readOnly:(BOOL)a1;
- (void)deleteSearchableItemsWithFileProviderDomains:(id)a0 completionHandler:(id /* block */)a1;
- (void)handleLikelyExit;
- (void)deleteAllUserActivities:(id)a0 fromClient:(id)a1 completionHandler:(id /* block */)a2;
- (void)deleteAllSearchableItemsWithBundleID:(id)a0 protectionClass:(id)a1 shouldGC:(BOOL)a2 deleteAllReason:(long long)a3 completionHandler:(id /* block */)a4;
- (void)issuePathFixup:(id)a0;
- (void)deleteAllSearchableItemsWithProtectionClass:(id)a0 forBundleID:(id)a1 options:(long long)a2 deleteAllReason:(long long)a3 completionHandler:(id /* block */)a4;
- (void)_enumerateIndexersWithProtectionClasses:(id)a0 forQueryWithContext:(id)a1 forBundleIds:(id)a2 inferSpecialIndexes:(BOOL)a3 block:(id /* block */)a4;
- (void)upgradeCheck;
- (id)priorityIndexer;
- (void)lockedCx;
- (id)_taskForQueryWithQueryString:(id)a0 queryContext:(id)a1 eventHandler:(id /* block */)a2 resultsHandler:(id /* block */)a3 completionHandler:(id /* block */)a4;
- (unsigned long long)purgeVectorIndex:(BOOL)a0;
- (void)userShutdownInitiated:(id)a0;
- (void)_enumerateIndexersWithBlock:(id /* block */)a0;
- (void)issueMessagesFixup:(id /* block */)a0;
- (void)issueBundleFixup:(id)a0 completionHandler:(id /* block */)a1;
- (id)priorityIndexAvailableTouchFilePath;
- (void)_enumerateIndexersWithProtectionClasses:(id)a0 block:(id /* block */)a1;
- (void)issueDuplicateOidCheck:(id)a0;
- (void)queryPreheat:(id)a0;
- (BOOL)checkMailMigrationToClassCComplete;
- (void)_reindexAllItemsWithExtensionsAndIdentifiersAndCompletionBlock:(id /* block */)a0;
- (void)addCompletedBundleIDs:(id)a0 forIndexerTask:(id)a1;
- (void)validateVectors:(id)a0 outFileDescriptor:(int)a1;
- (void)deleteAllInteractionsWithBundleID:(id)a0 completionHandler:(id /* block */)a1;
- (void).cxx_destruct;
- (id)indexServiceName;
- (void)commitUpdates;
- (void)issueConsistencyCheck:(id)a0;
- (void)_reindexAllItemsForBundleIDs:(id)a0 reason:(id)a1 completionHandler:(id /* block */)a2;
- (BOOL)writeData:(id)a0 toFile:(id)a1;
- (void)getDBLogsWithCompletionHandler:(id /* block */)a0;
- (id)startQuery:(id)a0 withContext:(id)a1 handler:(id /* block */)a2;
- (void)fetchAttributes:(id)a0 protectionClass:(id)a1 bundleID:(id)a2 identifiers:(id)a3 userCtx:(id)a4 flags:(unsigned int)a5 qos:(unsigned int)a6 completionHandler:(id /* block */)a7;

@end
