@class NSString, NSRecursiveLock, NSArray, NSMutableDictionary, MCInvocationQueue, NSMutableSet, IMAPMailbox, NSObject;
@protocol OS_os_log, IMAPAccount, IMAPConnectionResponseDelegate;

@interface IMAPConnection : MCConnection {
    NSRecursiveLock *_imapConnectionLock;
    unsigned long long _capabilityFlags;
    unsigned long long _enabledCapabilityFlags;
    long long _connectionState;
    NSMutableSet *_capabilities;
    NSString *_separatorChar;
    NSString *_selectedMailboxName;
    IMAPMailbox *_selectedIMAPMailbox;
    BOOL _selectedMailboxIsReadOnly;
    unsigned long long _commandNumber;
    unsigned int _readBufferSize;
    double _expirationTime;
    MCInvocationQueue *_streamEventQueue;
    NSMutableDictionary *_unhandledTaggedResponses;
    unsigned long long _lastIdleSequenceNumber;
    unsigned long long _lastIdleSessionNumber;
    BOOL _createsGateway;
    BOOL _executingInternalReconnect;
}

@property (class, readonly, nonatomic) NSObject<OS_os_log> *log;

@property BOOL sentID;
@property (copy, nonatomic) NSString *selectedMailboxNameForLogging;
@property (readonly, copy, nonatomic) NSString *separatorCharIfAvailable;
@property (weak) id<IMAPAccount> account;
@property (retain, nonatomic) IMAPMailbox *selectedIMAPMailbox;
@property (readonly, copy, nonatomic) NSString *selectedMailboxName;
@property (weak) id<IMAPConnectionResponseDelegate> responseDelegate;
@property (nonatomic) BOOL canStartIdle;
@property (readonly, nonatomic) BOOL isIdle;
@property (readonly, copy, nonatomic) NSString *displayName;
@property (readonly, nonatomic) long long connectionState;
@property (readonly, nonatomic) long long currentConnectionState;
@property (readonly, nonatomic) BOOL isDisconnected;
@property (readonly, copy) NSArray *capabilities;
@property (copy) NSString *separatorChar;
@property (nonatomic) unsigned int readBufferSize;

+ (id)capabilityNameForCapability:(unsigned long long)a0;
+ (BOOL)_defaultsToBackground;
+ (BOOL)automaticallyNotifiesObserversOfSelectedMailboxName;
+ (id)keyPathsForValuesAffecting_gateway;

- (void)disconnect;
- (BOOL)supportsCapability:(unsigned long long)a0;
- (BOOL)authenticate;
- (id)initWithAccount:(id)a0;
- (BOOL)isNonAppInitiated;
- (void)quit;
- (id)init;
- (id)authenticationMechanisms;
- (id)description;
- (BOOL)_completeConnectionWithResult:(BOOL)a0;
- (void)_transitionToState:(long long)a0;
- (BOOL)_authenticateWithSASLClient:(id)a0;
- (id)errorURLScheme;
- (BOOL)_startTLS;
- (void)_setupConnection;
- (void).cxx_destruct;
- (BOOL)_reconnect;
- (id)_authenticateWithPlainTextSchemes;
- (BOOL)_readLineIntoData:(id)a0 error:(id *)a1;
- (BOOL)_writeData:(id)a0 dontLogBytesInRange:(struct _NSRange { unsigned long long x0; unsigned long long x1; })a1 error:(id *)a2;
- (void)discoverAccountSettings;
- (BOOL)isValidAllowNetworking:(BOOL)a0;
- (BOOL)sendIDIfNeeded;
- (BOOL)supportsPlainTextSchemes;
- (id)_getErrorFromFailedAuthenticationResponse:(id)a0 forCommand:(id)a1 usingSASL:(BOOL)a2;
- (void)_addToCapabilities:(id)a0;
- (BOOL)_capability:(unsigned long long *)a0 forCapabilityName:(id)a1;
- (void)_clearCapabilities;
- (id)_copyNextServerResponse:(id *)a0 fetchResponseLog:(id *)a1;
- (id)_copyNextTaggedOrContinuationResponseForCommand:(id)a0;
- (id)_copyNextTaggedOrContinuationResponseForCommand:(id)a0 exists:(unsigned long long *)a1 receivedExists:(BOOL *)a2;
- (BOOL)_correctMailboxIsSelectedForCommand:(id)a0;
- (void)_didEnableCapability:(unsigned long long)a0;
- (void)_enableCapabilities;
- (id)_errorForResponse:(id)a0 command:(id)a1;
- (void)_fetchCapabilitiesIfNeeded;
- (void)_fetchSeparatorCharIfNeeded;
- (void)_handleBytesAvailable;
- (BOOL)_isTemporaryError:(id)a0;
- (BOOL)_readBytesIntoData:(id)a0 desiredLength:(long long)a1 error:(id *)a2;
- (BOOL)_readDataWithRemainingByteCount:(long long)a0 intoData:(id)a1 error:(id *)a2;
- (BOOL)_recordMailboxResponse:(id)a0 forCommand:(id)a1;
- (BOOL)_recordMailboxResponse:(id)a0 forCommand:(id)a1 exists:(unsigned long long *)a2 receivedExists:(BOOL *)a3 fromIDLE:(BOOL)a4;
- (void)_recordResponse:(id)a0 forCommand:(id)a1;
- (BOOL)_recordUntaggedResponse:(id)a0 forCommand:(id)a1;
- (BOOL)_recordUntaggedResponse:(id)a0 forCommand:(id)a1 exists:(unsigned long long *)a2 receivedExists:(BOOL *)a3 fromIDLE:(BOOL)a4;
- (id)_responseFromSendingCommand:(id)a0 receivedExists:(BOOL *)a1;
- (id)_responseFromSendingCommand:(id)a0 tryCreate:(BOOL *)a1 receivedExists:(BOOL *)a2;
- (BOOL)_sendCommand:(id)a0 response:(id *)a1;
- (void)_setSelectedMailboxName:(id)a0;
- (BOOL)_socketDiedError:(id *)a0;
- (id)_stateString;
- (BOOL)_synchronouslyExecuteDoneWithSequence:(unsigned long long)a0 session:(unsigned long long)a1;
- (void)_transitionToState:(long long)a0 selectedMailbox:(id)a1 readOnly:(BOOL)a2;
- (BOOL)capabilityIsEnabled:(unsigned long long)a0;
- (void)disconnectAndNotify:(BOOL)a0;
- (BOOL)executeAggregateStatus:(id)a0;
- (BOOL)executeAppend:(id)a0;
- (BOOL)executeAuthenticate:(id)a0;
- (BOOL)executeCapability:(id)a0;
- (BOOL)executeClientCommand:(id)a0;
- (BOOL)executeDone:(id)a0;
- (BOOL)executeEnable:(id)a0;
- (BOOL)executeFetch:(id)a0;
- (BOOL)executeID:(id)a0;
- (BOOL)executeIdle:(id)a0;
- (BOOL)executeListOrLSub:(id)a0;
- (BOOL)executeLogin:(id)a0;
- (BOOL)executeLogout:(id)a0;
- (BOOL)executeNamespace:(id)a0;
- (BOOL)executeNoop:(id)a0;
- (BOOL)executeSelectCommand:(id)a0;
- (BOOL)executeStartTLS:(id)a0;
- (BOOL)executeStatus:(id)a0;
- (BOOL)executeSubscribeCommand:(id)a0;
- (BOOL)executeUIDCopyOrMove:(id)a0;
- (BOOL)executeUIDExpunge:(id)a0;
- (BOOL)executeUIDStore:(id)a0;
- (BOOL)executeUnselect:(id)a0;
- (BOOL)exitIdle;
- (id)mailboxNameIfSelected:(BOOL)a0;
- (BOOL)needsSelectForMailboxName:(id)a0;
- (BOOL)prepareAndExecuteCommand:(id)a0;
- (BOOL)startIdle;

@end
