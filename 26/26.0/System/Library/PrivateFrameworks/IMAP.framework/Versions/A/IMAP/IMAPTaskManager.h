@class NSString, NSArray, IMAPLocalActionSyncTask, NSConditionLock, IMAPAccountSyncTask, NSMutableDictionary, NSCountedSet, NSObject, _IMAPLock, NSMutableSet, MCAggregablePowerLog;
@protocol OS_os_log, IMAPAccount;

@interface IMAPTaskManager : MCTaskManager <IMAPTaskManager> {
    _IMAPLock *_mailboxSyncLock;
    NSMutableDictionary *_mailboxSyncTasks;
    NSMutableSet *_inSyncMailboxes;
    NSMutableDictionary *_bodyFetchTasks;
    NSMutableSet *_mailboxesCheckedForIncomplete;
    NSMutableSet *_mailboxesUpdatingUIDValidity;
    NSMutableSet *_dataSourcesWaitingForBodySync;
    NSCountedSet *_dataSourcesBeingAddedTo;
    NSCountedSet *_dataSourcesBeingDeletedFrom;
    NSMutableSet *_dataSourcesToSyncAfterDeletes;
    NSMutableSet *_dataSourcesToFullySyncAfterDeletes;
    NSMutableDictionary *_newExistsForDataSource;
    NSMutableDictionary *_messageNumbersNeedingFlagsForDataSource;
    NSMutableDictionary *_flagsByUnpersistedUIDForDataSource;
    unsigned long long _throughputHistoryIndex;
    unsigned long long _throughputHistory[8];
    unsigned long long _weightHistory[8];
    NSString *_secondaryIdleMailboxName;
    NSConditionLock *_creatingNewConnectionLock;
    BOOL _preserveNetworkResources;
}

@property (class, readonly, nonatomic) NSObject<OS_os_log> *syncActivityLog;
@property (class, readonly, nonatomic) MCAggregablePowerLog *powerLog;

@property (weak) id<IMAPAccount> account;
@property (weak, nonatomic) IMAPAccountSyncTask *accountSyncTask;
@property (retain, nonatomic) IMAPLocalActionSyncTask *localActionSyncTask;
@property (readonly, copy, nonatomic) NSArray *networkHandlers;
@property (readonly, copy, nonatomic) NSArray *orderedNetworkHandlers;
@property (nonatomic) BOOL preserveNetworkResources;
@property (nonatomic) BOOL networkIsLimited;
@property (nonatomic) BOOL canPerformLocalActions;
@property (copy) NSString *defaultIdleMailboxName;
@property (copy) NSString *secondaryIdleMailboxName;
@property (readonly) BOOL isConnected;
@property unsigned long long fetchChunkSize;
@property (nonatomic) unsigned int firstNewInboxUID;
@property (readonly, nonatomic, getter=isConnected) BOOL connected;
@property (readonly) BOOL hasActivity;

+ (void)initialize;
+ (double)IMAPIdleRefreshDelay;
+ (void)_setReadSizeParameters;
+ (id)sharedKeySetForMessageInfo;

- (id)initWithAccount:(id)a0;
- (void)closeAllConnections;
- (id)init;
- (BOOL)connectToServer;
- (id)description;
- (void)test_tearDown;
- (void).cxx_destruct;
- (void)addActivity:(id)a0;
- (BOOL)deleteMailbox:(id)a0;
- (void)addLocalAction:(id)a0;
- (void)expungeMailbox:(id)a0;
- (id)fetchNamespaces;
- (void)activityDidFinish:(id)a0;
- (void)beginPerformingLocalActionsIfNeeded;
- (void)cancelMailboxSyncTaskForMailboxName:(id)a0;
- (void)checkForNewLocalActions;
- (BOOL)createMailbox:(id)a0;
- (id)downloadBodyDataForMessage:(id)a0 andHeaderDataIfReadilyAvailable:(id *)a1 allowPartial:(BOOL)a2 error:(id *)a3;
- (id)downloadHeaderDataForMessage:(id)a0;
- (BOOL)expungeMailbox:(id)a0 ifSelected:(BOOL)a1;
- (void)expungeUIDs:(id)a0 inMailbox:(id)a1;
- (void)fetchQuotaForRootName:(id)a0;
- (void)fetchQuotaRootNamesForMailboxes:(id)a0;
- (id)fetchSeparatorChar;
- (BOOL)fetchTotalSizeAndMessageCountForMailbox:(id)a0;
- (BOOL)listingForMailbox:(id)a0 options:(long long)a1 listingInfo:(id)a2;
- (void)localMailboxesDidChange;
- (BOOL)mailboxIsInSync:(id)a0;
- (BOOL)mailboxIsSyncing:(id)a0;
- (id)newBodyFetchContext;
- (id)newNetworkHandler;
- (id)newPersistenceHandler;
- (void)removeInvalidConnections;
- (BOOL)renameMailbox:(id)a0 toMailbox:(id)a1;
- (void)resetMaximumConnectionCount;
- (void)resyncMailboxWithName:(id)a0;
- (BOOL)subscribeMailbox:(id)a0;
- (BOOL)subscribedListingForMailbox:(id)a0 options:(long long)a1 listingInfo:(id)a2;
- (BOOL)supportsQuotas;
- (void)syncAccountForceFullSync:(BOOL)a0 userInitiated:(BOOL)a1;
- (void)test_terminateAndWaitUntilFinished;
- (void)unselectMailboxConnectionsWithName:(id)a0 expunge:(BOOL)a1;
- (BOOL)unsubscribeMailbox:(id)a0;
- (void)updateGlobalListOfUserSelectedMailboxes:(id)a0;
- (void)assignIdleTasks;
- (BOOL)hasLocalActions;
- (void)resetMailboxSyncWithDataSource:(id)a0;
- (id)_bodyFetchTaskWithDataSource:(id)a0 createIfNeeded:(BOOL)a1;
- (void)_cancelMailboxSyncTaskForMailboxName:(id)a0;
- (void)_checkForNewLocalActions;
- (id)_createNetworkHandler;
- (void)_createNewConnection;
- (void)_createNewConnectionSynchronously:(BOOL)a0 isFirstConnection:(BOOL)a1;
- (BOOL)_currentThreadIsForConnectionSelectedOnMailbox:(id)a0;
- (BOOL)_doCommandBlockForMailbox:(id)a0 block:(id /* block */)a1 async:(BOOL)a2 ifSelected:(BOOL)a3 priority:(long long)a4 description:(id)a5;
- (id)_downloadDataForMessage:(id)a0 allowPartial:(BOOL)a1 writeCacheFile:(BOOL)a2 error:(id *)a3;
- (void)_fetchFlagsForMessageNumber:(unsigned long long)a0 dataSource:(id)a1 mailboxName:(id)a2;
- (BOOL)_mailboxIsSelected:(id)a0;
- (BOOL)_shouldCreateNewConnection;
- (void)_stopSyncingBodiesForUIDs:(id)a0 dataSource:(id)a1;
- (void)_syncAccountForceFullSync:(BOOL)a0 userInitiated:(BOOL)a1;
- (void)_syncBodiesForMessages:(id)a0 uidNext:(unsigned int)a1 userRequested:(BOOL)a2 dataSource:(id)a3;
- (void)_syncMailboxWithDataSource:(id)a0 withIMAPMailbox:(id)a1 fromStatus:(BOOL)a2 forceFullSync:(BOOL)a3 userInitiated:(BOOL)a4;
- (void)_uidsVanished:(id)a0 withMessageNumbersOrRanges:(id)a1 mailboxName:(id)a2 logString:(id)a3 handleBlock:(id /* block */)a4;
- (unsigned long long)_updatedThroughputAverageWithNewValue:(unsigned long long)a0 weight:(unsigned long long)a1;
- (id)_waitForDataFromDownload:(id)a0 dataSource:(id)a1 error:(id *)a2;
- (void)addNetworkHandler:(id)a0;
- (void)assignActiveTasks;
- (void)deleteMessagesWithUIDs:(id)a0 dataSource:(id)a1;
- (void)didAddMessagesWithUIDs:(id)a0 toDataSource:(id)a1;
- (void)didAddMessagesWithUnknownUID:(id)a0 toDataSource:(id)a1;
- (void)doCommandBlockForMailbox:(id)a0 synchronously:(BOOL)a1 priority:(long long)a2 description:(id)a3 block:(id /* block */)a4;
- (void)doPersistenceBlockForDataSource:(id)a0 synchronously:(BOOL)a1 priority:(long long)a2 block:(id /* block */)a3;
- (void)existsChanged:(unsigned long long)a0 forMailboxName:(id)a1 duringExpunge:(BOOL)a2;
- (void)flagsChanged:(long long)a0 forMessageWithMessageNumber:(unsigned long long)a1 uid:(unsigned int)a2 mailboxName:(id)a3;
- (void)flagsChangedForUnknownUIDWithMessageNumber:(unsigned long long)a0 mailboxName:(id)a1;
- (void)handlerBecameDisconnected:(id)a0;
- (BOOL)mailboxIsSelected:(id)a0;
- (void)messageExpungedForMessageNumber:(unsigned long long)a0 uid:(unsigned int)a1 mailboxName:(id)a2;
- (BOOL)messageSkeletonWithUIDIsBeingPersisted:(unsigned int)a0 toDataSource:(id)a1;
- (void)messageSkeletonsWithUIDsWerePersisted:(id)a0 toDataSource:(id)a1;
- (BOOL)messagesAreBeingAddedToDataSource:(id)a0;
- (BOOL)messagesAreBeingDeletedFromDataSource:(id)a0;
- (void)receivedUIDNext:(unsigned int)a0 forDataSource:(id)a1;
- (void)removeNetworkHandler:(id)a0;
- (void)resetMailboxSyncWithName:(id)a0;
- (void)setChunkSizeFromElapsedTime:(double)a0 bytesRead:(unsigned long long)a1;
- (void)stopSyncingBodiesForUIDs:(id)a0 dataSource:(id)a1;
- (void)syncBodiesForMessages:(id)a0 uidNext:(unsigned int)a1 dataSource:(id)a2;
- (void)syncMailboxWithDataSource:(id)a0 withIMAPMailbox:(id)a1 fromStatus:(BOOL)a2 forceFullSync:(BOOL)a3 userInitiated:(BOOL)a4;
- (void)syncMailboxWithName:(id)a0 withIMAPMailbox:(id)a1 fromStatus:(BOOL)a2 forceFullSync:(BOOL)a3 userInitiated:(BOOL)a4;
- (void)syncUserRequestedBodiesForMessagesByDataSource:(id)a0;
- (void)test_waitUntilAllTasksAreFinished;
- (void)uidsVanished:(id)a0 withMessageNumbers:(id)a1 mailboxName:(id)a2;
- (void)uidsVanished:(id)a0 withRanges:(id)a1 mailboxName:(id)a2;
- (void)updatedUIDValidity:(unsigned int)a0 forDataSource:(id)a1;
- (void)updatingUIDValidityForDataSource:(id)a0;
- (void)willAddMessagesToDataSource:(id)a0;

@end
