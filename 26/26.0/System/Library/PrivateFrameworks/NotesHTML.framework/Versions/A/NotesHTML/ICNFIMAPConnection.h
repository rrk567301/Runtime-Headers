@class NSString, NSRecursiveLock, NSArray, ICNFMCInvocationQueue, NSMutableDictionary, NSMutableSet, ICNFIMAPGateway, ICNFIMAPMailbox;
@protocol ICNFIMAPAccount;

@interface ICNFIMAPConnection : ICNFMCConnection {
    NSRecursiveLock *_imapConnectionLock;
    NSRecursiveLock *_separatorCharLock;
    unsigned long long _capabilityFlags;
    long long _connectionState;
    NSMutableSet *_capabilities;
    NSString *_separatorChar;
    NSString *_selectedMailbox;
    ICNFIMAPMailbox *_selectedIMAPMailbox;
    BOOL _selectedMailboxIsReadOnly;
    unsigned long long _commandNumber;
    unsigned int _readBufferSize;
    double _expirationTime;
    ICNFMCInvocationQueue *_streamEventQueue;
    NSMutableDictionary *_unhandledTaggedResponses;
    unsigned long long _fetchSizeNextReadingIndex;
    double _fetchSizeRollingAverage;
    BOOL _fetchSizeFirstTime;
    BOOL _fetchSizeFilledHistory;
    double _fetchSizeRecentTimes[8];
    NSRecursiveLock *_validatingLock;
    ICNFIMAPGateway *_gateway;
    unsigned long long _lastIdleSequenceNumber;
    unsigned long long _lastIdleSessionNumber;
    BOOL _createsGateway;
    BOOL _executingInternalReconnect;
}

@property BOOL sentID;
@property (weak) id<ICNFIMAPAccount> account;
@property (retain) ICNFIMAPGateway *gateway;
@property (retain, nonatomic) ICNFIMAPMailbox *selectedIMAPMailbox;
@property (nonatomic) BOOL isValidating;
@property BOOL canStartIdle;
@property (readonly, nonatomic) BOOL isIdle;
@property (readonly, copy, nonatomic) NSString *displayName;
@property (readonly, nonatomic) long long connectionState;
@property (readonly, nonatomic) long long currentConnectionState;
@property (readonly, nonatomic) BOOL isDisconnected;
@property (readonly, nonatomic) BOOL shouldExecuteOperationsImmediately;
@property (readonly, copy) NSArray *capabilities;
@property (copy) NSString *separatorChar;
@property (nonatomic) unsigned int readBufferSize;

+ (BOOL)automaticallyNotifiesObserversForKey:(id)a0;
+ (void)initialize;
+ (id)capabilityNameForCapability:(unsigned long long)a0;
+ (BOOL)_defaultsToBackground;
+ (void)_setReadSizeParameters;
+ (id)keyPathsForValuesAffecting_gateway;
+ (unsigned int)minimumFetchChunkSize;

- (void)disconnect;
- (BOOL)supportsCapability:(unsigned long long)a0;
- (BOOL)authenticate;
- (id)debugDescription;
- (void)dealloc;
- (void)quit;
- (id)init;
- (id)authenticationMechanisms;
- (id)description;
- (BOOL)_completeConnectionWithResult:(BOOL)a0;
- (void)_transitionToState:(long long)a0;
- (BOOL)_startTLS;
- (void)_setupConnection;
- (void).cxx_destruct;
- (BOOL)_reconnect;
- (id)_authenticateWithPlainTextSchemes;
- (id)_gateway;
- (BOOL)_readLineIntoData:(id)a0 error:(id *)a1;
- (BOOL)_writeData:(id)a0 dontLogBytesInRange:(struct _NSRange { unsigned long long x0; unsigned long long x1; })a1 error:(id *)a2;
- (void)discoverAccountSettings;
- (BOOL)isValidAllowNetworking:(BOOL)a0;
- (BOOL)sendIDIfNeeded;
- (BOOL)supportsPlainTextSchemes;
- (void)_addToCapabilities:(id)a0;
- (void)_clearCapabilities;
- (id)_copyNextTaggedOrContinuationResponseForCommand:(id)a0;
- (id)_copyNextTaggedOrContinuationResponseForCommand:(id)a0 exists:(unsigned long long *)a1 receivedExists:(BOOL *)a2;
- (void)_fetchCapabilitiesIfNeeded;
- (void)_fetchSeparatorCharIfNeeded;
- (void)_handleBytesAvailable;
- (BOOL)_isTemporaryError:(id)a0;
- (BOOL)_readBytesIntoData:(id)a0 desiredLength:(long long)a1 error:(id *)a2;
- (BOOL)_readDataWithRemainingByteCount:(long long)a0 intoData:(id)a1 error:(id *)a2;
- (BOOL)_sendCommand:(id)a0 response:(id *)a1;
- (void)_socketDiedError:(id *)a0;
- (void)_transitionToState:(long long)a0 selectedMailbox:(id)a1 readOnly:(BOOL)a2;
- (void)disconnectAndNotify:(BOOL)a0;
- (BOOL)executeAggregateStatus:(id)a0;
- (BOOL)executeAppend:(id)a0;
- (BOOL)executeAuthenticate:(id)a0;
- (BOOL)executeCapability:(id)a0;
- (BOOL)executeDone:(id)a0;
- (BOOL)executeFetch:(id)a0;
- (BOOL)executeID:(id)a0;
- (BOOL)executeIdle:(id)a0;
- (BOOL)executeListOrLSub:(id)a0;
- (BOOL)executeLogin:(id)a0;
- (BOOL)executeLogout:(id)a0;
- (BOOL)executeNamespace:(id)a0;
- (BOOL)executeNoop:(id)a0;
- (BOOL)executeStartTLS:(id)a0;
- (BOOL)executeStatus:(id)a0;
- (BOOL)executeUIDExpunge:(id)a0;
- (BOOL)executeUIDStore:(id)a0;
- (BOOL)executeUnselect:(id)a0;
- (id)mailboxNameIfSelected:(BOOL)a0;
- (id)separatorCharIfAvailable;
- (BOOL)startIdle;
- (BOOL)executeUIDCopy:(id)a0;
- (id)initWithPendingGateway:(BOOL)a0 account:(id)a1;
- (BOOL)_authenticateWithSaslClient:(id)a0;
- (id)_copyNextServerResponse:(id *)a0;
- (BOOL)_correctMailboxIsSelectedForOperation:(id)a0;
- (id)_errorForResponse:(id)a0 operation:(id)a1;
- (id)_getErrorFromFailedAuthenticationResponse:(id)a0 forOperation:(id)a1 usingSASL:(BOOL)a2;
- (BOOL)_isFetchResponseValid:(id)a0;
- (BOOL)_recordMailboxResponse:(id)a0 forOperation:(id)a1;
- (BOOL)_recordMailboxResponse:(id)a0 forOperation:(id)a1 exists:(unsigned long long *)a2 fromIDLE:(BOOL)a3;
- (void)_recordResponse:(id)a0 forOperation:(id)a1;
- (BOOL)_recordUntaggedResponse:(id)a0 forOperation:(id)a1;
- (BOOL)_recordUntaggedResponse:(id)a0 forOperation:(id)a1 exists:(unsigned long long *)a2 receivedExists:(BOOL *)a3 fromIDLE:(BOOL)a4;
- (id)_responseFromSendingOperation:(id)a0 receivedExists:(BOOL *)a1;
- (id)_responseFromSendingOperation:(id)a0 tryCreate:(BOOL *)a1 receivedExists:(BOOL *)a2;
- (void)_setError:(id)a0 forCommand:(id)a1;
- (void)_setSelectedMailbox:(id)a0;
- (id)_stateStringIncludingPII:(BOOL)a0;
- (BOOL)_tryToStartValidating;
- (BOOL)executeClientOperation:(id)a0;
- (BOOL)executeSelectOperation:(id)a0;
- (BOOL)executeSubscribeOperation:(id)a0;
- (BOOL)executeUIDSearch:(id)a0;
- (BOOL)needsSelectForMailboxName:(id)a0 gateway:(id)a1;
- (BOOL)prepareAndExecuteOperation:(id)a0 outWrongState:(BOOL *)a1;
- (void)resetTimingHistory;
- (void)setReadBufferSizeFromElapsedTime:(double)a0 bytesRead:(unsigned int)a1;
- (void)updateCanStartIdle:(BOOL)a0;
- (double)updatedRecentAverageWithNewValue:(double)a0;

@end
