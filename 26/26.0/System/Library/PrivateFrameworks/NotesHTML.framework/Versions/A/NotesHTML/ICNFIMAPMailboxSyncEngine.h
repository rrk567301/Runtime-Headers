@class NSMutableSet, NSString, NSArray, ICNFMCInvocationQueue, NSMutableDictionary, NSMutableArray, ICNFIMAPGateway, _ICNFNonBoostingLock, NSMutableIndexSet, ICNFIMAPMailbox;
@protocol ICNFIMAPMessageDataSource;

@interface ICNFIMAPMailboxSyncEngine : NSObject <ICNFIMAPFetchResponseHandler, ICNFMCActivityTarget> {
    struct { unsigned long long first; unsigned long long last; } _rangeOfMessagesToFetchFlagsAndUidsForSyncing;
    _ICNFNonBoostingLock *_syncEngineLock;
    ICNFIMAPGateway *_gateway;
    id<ICNFIMAPMessageDataSource> _dataSource;
    ICNFIMAPMailbox *_IMAPMailbox;
    NSMutableArray *_auxiliaryLists;
    NSMutableIndexSet *_allNewUids;
    NSMutableIndexSet *_UIDsNeedingSkeletons;
    NSMutableIndexSet *_messageNumbersNeedingUIDs;
    NSMutableArray *_messageDetails;
    unsigned long long _fetchedMessagesCount;
    unsigned long long _maxSkeletonsToFetch;
    NSMutableIndexSet *_expungedUids;
    NSMutableSet *_activeOperations;
    long long _progressType;
    unsigned long long _progressTotal;
    BOOL _isCheckingNewMail;
    ICNFMCInvocationQueue *_syncEngineQueue;
    NSMutableArray *_messagesNeedingAttachmentNames;
    NSArray *_messagesBeingRouted;
    NSMutableArray *_messagesAddedToDataSource;
    NSMutableArray *_uidsAddedToServer;
    NSMutableSet *_messageUIDsCachedDuringRouting;
    NSMutableDictionary *_labelsByRemoteId;
    id /* block */ _compareByUid;
    unsigned int _uidValidity;
    unsigned int _localDataSourceUidNext;
    unsigned int _newUidValidity;
    BOOL _isReset;
    BOOL _needToUpdateExists;
    BOOL _newResponsesAvailable;
    BOOL _automaticallyStartThread;
    BOOL _dataSourceIsInboxOrAllMail;
    BOOL _newMailReceivedInInbox;
    BOOL _checkedForNewUids;
    BOOL _fetchingDueToAllegedModificationSequenceChange;
    BOOL _messagesNeedAttachmentNames;
}

@property BOOL messageListIsSynchronized;
@property unsigned long long numberOfMessagesOnServer;
@property unsigned long long computedHighestModificationSequence;
@property unsigned int uidNext;
@property BOOL connectionSupportsUIDPLUS;
@property BOOL forceSyncOfAllMessages;
@property (readonly, copy, nonatomic) id /* block */ compareByUid;
@property (readonly, copy) NSArray *messagesBeingAdded;
@property (readonly, copy, nonatomic) NSString *stateStringForDiagnostics;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

+ (void)initialize;

- (void)unlock;
- (void)reset;
- (void)dealloc;
- (id)initWithDataSource:(id)a0;
- (BOOL)isReset;
- (void)setUidValidity:(unsigned int)a0;
- (void)lock;
- (id)init;
- (void).cxx_destruct;
- (id)_gmailLabelsForNames:(id)a0;
- (id)_copyDataSource;
- (void)_addDetails:(id)a0 forMessageNumber:(unsigned long long)a1;
- (void)_addItem:(id)a0 toAuxiliaryList:(unsigned long long)a1;
- (BOOL)_cacheAttachmentsWithMonitor:(id)a0;
- (BOOL)_cacheMessagesWithMonitor:(id)a0;
- (long long)_cachePolicyForAccount:(id)a0;
- (id)_checkOutGateway;
- (id)_copyIMAPMailbox;
- (char)_dataSourcePersistentIDType;
- (void)_discardSyncProgressSoFar;
- (void)_doUidStoreUpdate:(id)a0;
- (BOOL)_fetchUidsFlagsAndLabelsWithMonitor:(id)a0;
- (id)_getAuxiliaryListForType:(unsigned long long)a0;
- (id)_getKnownMessageDetailsForNumber:(unsigned long long)a0;
- (id)_getKnownMessageDetailsForUid:(unsigned int)a0;
- (BOOL)_getNewMessageSkeletonsWithMonitor:(id)a0 messagesFromOpen:(id *)a1;
- (id)_getObjectWithSameUidAsObject:(id)a0 inArray:(id)a1 insertIndex:(unsigned long long *)a2;
- (void)_goWithMessages:(id)a0;
- (void)_goWithMessagesIfNeeded:(id)a0;
- (BOOL)_handleFailedFetchResponseForOperation:(id)a0;
- (void)_handleFetchResponse:(id)a0 withMonitor:(id)a1 message:(id *)a2 flagsChanges:(id *)a3 labels:(id *)a4;
- (BOOL)_handleInvitationMessagesWithMonitor:(id)a0;
- (void)_handleMessagesWereAddedToPersistence:(id)a0 withMonitor:(id)a1;
- (void)_handleNewUIDsAddedToServer:(id)a0;
- (BOOL)_handleRoutedUidsWithMonitor:(id)a0;
- (BOOL)_hasPendingChanges;
- (void)_mergeItems:(id)a0 intoAuxiliaryList:(unsigned long long)a1;
- (id)_newOperationFromUIDsNeedingSkeletons:(unsigned long long)a0;
- (void)_notifyBackgroundFetchCompletedWithLogMessage:(id)a0;
- (id)_persistedMessageForDetails:(id)a0;
- (BOOL)_placeholderDetailsExist;
- (void)_processAttachmentNames;
- (BOOL)_processResponsesWithMonitor:(id)a0;
- (void)_pushFlags:(id)a0 forPersistentIDs:(id)a1 toDataSource:(id)a2 withMonitor:(id)a3;
- (void)_pushFlags:(id)a0 toDataSource:(id)a1 withMonitor:(id)a2;
- (void)_pushLabels:(id)a0 toDataSource:(id)a1 withMonitor:(id)a2;
- (BOOL)_recoverFromErrorInDownload:(id)a0 uid:(unsigned int)a1 cacheList:(id)a2 atIndex:(unsigned long long)a3 downloadCache:(id)a4;
- (void)_removeMessagesOrDetailsFromDataSource:(id)a0;
- (void)_removeUidFromAuxiliaryLists:(id)a0;
- (void)_resetClearingGateway:(BOOL)a0 clearingDataSource:(BOOL)a1;
- (void)_resizeMessageDetails;
- (void)_setAttachmentNamesForMessage:(id)a0;
- (void)_setAuxiliaryList:(id)a0 forType:(unsigned long long)a1;
- (BOOL)_setGateway:(id)a0;
- (void)_setupFakeResponseToOperation:(id)a0 messageNumber:(unsigned long long)a1;
- (void)_setupForNewIMAPMailbox:(id)a0 andGateway:(id)a1;
- (BOOL)_shouldContinueSyncingWithGateway;
- (BOOL)_shouldContinueSyncingWithMonitor:(id)a0;
- (void)_startNewThreadIfNeeded;
- (BOOL)_syncChangedMessagesOnly;
- (BOOL)_syncWithDataSourceWithMonitor:(id)a0 messagesFromOpen:(id)a1;
- (void)_updateCountOfMessagesOnServerIfNecessary;
- (void)_updateFlagChanges:(id *)a0 withDetails:(id)a1 previousFlags:(unsigned int)a2;
- (void)_updatePendingChangesWithMonitor:(id)a0;
- (void)boostActiveOperationsTo:(long long)a0;
- (BOOL)handleResponse:(id)a0 forOperation:(id)a1;
- (void)invalidateDataSource;
- (void)messagesWereAddedToDataSource:(id)a0;
- (void)newUIDsWereAddedToServer:(id)a0;
- (void)requestCheckingNewMail;
- (void)responsesWereAddedToIMAPMailbox:(id)a0;
- (void)runSynchronouslyWithMessages:(id)a0;
- (void)setAutomaticallyStartsBackgroundThread:(BOOL)a0;
- (void)setGatewayFromIMAPMailbox:(id)a0;
- (id)suffixArrayOfArray:(id)a0 ofLength:(unsigned long long)a1 fullLength:(unsigned long long *)a2;
- (void)uidsWereCompactedFromDataSource:(id)a0;
- (void)updateCountOfMessagesOnServerFromIMAPMailbox:(id)a0 fromIDLE:(BOOL)a1;

@end
