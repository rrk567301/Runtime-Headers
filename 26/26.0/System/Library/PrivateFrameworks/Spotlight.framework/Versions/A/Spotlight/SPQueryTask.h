@class NSMutableDictionary, SPKQuery, SFSearchResult_SpotlightExtras, NSDate, NSDictionary, NSObject, NSMutableArray, NSString, SPSearchQueryContext, SSBullseyeTopHitsManager, PRSRankingConfiguration, NSMutableSet, SPMetadataQuery, SFStartLocalSearchFeedback, NSArray, SPApplicationQuery, SSRankingManager, SFMutableResultSection;
@protocol OS_dispatch_queue, SPQueryTaskDelegate, OS_dispatch_source;

@interface SPQueryTask : NSObject <SPKQueryDelegate> {
    SFMutableResultSection *_topHitSection;
    double _queryStartTime;
    BOOL _shortcutResultChecked;
    BOOL _canceled;
    BOOL _willSendPerformanceFeedback;
    unsigned int _qosClass;
    NSObject<OS_dispatch_source> *_timer;
    SPKQuery *_timerQuery;
    NSArray *_timerSections;
    NSMutableSet *_timerSupportedFilters;
    NSArray *_timerServerSuggestions;
    NSArray *_timerLocalSuggestions;
    int _timerResponseKind;
    int _timerSourceKind;
    int _timerTopHitIsIn;
    double _lastResponseTime;
    double _lastUpdateTime;
    unsigned int _updateDelaySeconds;
    unsigned long long _responseCount;
    struct __MDAppRankEvaluator { } *_appRankEvaluator;
    NSMutableArray *_serverSuggestionResults;
    NSMutableArray *_localSuggestionResults;
    NSMutableDictionary *_syndicatedResultSections;
    unsigned long long _event;
}

@property (retain, nonatomic) NSObject<OS_dispatch_queue> *dispatchQueue;
@property (retain, nonatomic) NSArray *sections;
@property (retain, nonatomic) NSMutableSet *supportedFilters;
@property BOOL suggestionsAreBlended;
@property BOOL finished;
@property BOOL live;
@property (retain, nonatomic) NSMutableArray *ioQueries;
@property (retain) NSString *userQueryString;
@property double timeOfLastResponse;
@property unsigned long long countOfLastResponse;
@property BOOL topHitIsInOfLastResponse;
@property (retain, nonatomic) SSBullseyeTopHitsManager *topHitsManager;
@property (retain) SPMetadataQuery *mainQuery;
@property (retain) SPApplicationQuery *appQuery;
@property (retain) NSMutableArray *auxQueries;
@property (retain) NSMutableDictionary *responses;
@property (retain) NSString *fbq;
@property long long delta;
@property (readonly) BOOL isCanceled;
@property (nonatomic) BOOL prefersLocalUserTypedSuggestion;
@property (nonatomic) BOOL wantsSuggestions;
@property (retain) NSString *shortcutUserQueryString;
@property (retain) PRSRankingConfiguration *rankingConfiguration;
@property (retain) SFStartLocalSearchFeedback *startLocalSearchFeedback;
@property (retain, nonatomic) NSString *client;
@property (weak, nonatomic) NSObject<SPQueryTaskDelegate> *delegate;
@property (retain, nonatomic) SPSearchQueryContext *queryContext;
@property (readonly) unsigned long long queryGroupId;
@property (retain, nonatomic) NSString *keyboardLanguage;
@property (nonatomic) BOOL forceStableResults;
@property BOOL isAdvancedQuerySyntax;
@property BOOL isMath;
@property BOOL isPeopleSearch;
@property (retain) NSDictionary *nlpQueryCategoryPreference;
@property (retain) NSString *nlpQueryConfidence;
@property (readonly) BOOL parsecFinished;
@property (readonly) BOOL metadataFinished;
@property (readonly) BOOL corespotlightFinished;
@property (retain, nonatomic) NSArray *rankedSections;
@property (retain, nonatomic) NSObject<OS_dispatch_queue> *queue;
@property (retain, nonatomic) NSArray *currentResultsArray;
@property (retain) SFSearchResult_SpotlightExtras *shortcutResult;
@property (retain, nonatomic) NSDate *shortcutLastUsedDate;
@property (nonatomic) BOOL parsecCameLaterThanSRT;
@property (nonatomic) BOOL hasSentTopHit;
@property int source;
@property unsigned long long triggerSearchRequestEvent;
@property (retain, nonatomic) SSRankingManager *rankingManager;

+ (void)preheat;
+ (void)fillRankingPosition:(id)a0;
+ (void)activateSync;
+ (void)initialize;
+ (void)initialize;
+ (void)deactivate;
+ (void)activate;
+ (id)_askLLMResult;
+ (id)_askSiriResult;
+ (id)_filtersForRankedSections:(id)a0 response:(id)a1 task:(id)a2 config:(id)a3;
+ (id)_getResultArraysForTask:(id)a0 response:(id)a1 queryId:(unsigned long long)a2 sections:(id)a3 allResultsArray:(id)a4 config:(id)a5;
+ (id)_makeMixedRankingRelatedSearchedSectionForContext:(id)a0 query:(id)a1 queryId:(unsigned long long)a2 sections:(id)a3 response:(id)a4 config:(id)a5;
+ (id)_queriesForUserQuery:(id)a0 queryContext:(id)a1;
+ (id)_queriesForUserQuery:(id)a0 updatedQueries:(id)a1 otherQueries:(id)a2 keyboardLanguage:(id)a3;
+ (id)_ttrMixedRankingResultForContext:(id)a0 query:(id)a1 queryId:(unsigned long long)a2 sections:(id)a3;
+ (BOOL)blendFirstResultOnly:(id)a0 config:(id)a1;
+ (id)blendServerSectionsInline:(id)a0 serverSection:(id)a1 queryId:(unsigned long long)a2 config:(id)a3;
+ (void)blendSuggestions:(id)a0 sections:(id)a1;
+ (BOOL)canUseNLPSignalFromGroupName:(id)a0;
+ (void)dedupeOnenessResults:(id)a0 config:(id)a1;
+ (id)insertStoredSectionsInline:(id)a0 storedSectionByResult:(id)a1;
+ (BOOL)isCommandEntity:(id)a0;
+ (BOOL)isResponseEligibleForUpdateForSections:(id)a0 config:(id)a1 response:(id)a2;
+ (BOOL)keepSectionTitle:(id)a0 config:(id)a1;
+ (void)preprocessSection:(id)a0 response:(id)a1 referenceTime:(double)a2 pruningStats:(id)a3 config:(id)a4;
+ (id)rankForTask:(id)a0 response:(id)a1 queryId:(unsigned long long)a2 allResultsArray:(id)a3 shortcutInfo:(id)a4 config:(id)a5;
+ (void)rankL2ForTask:(id)a0 response:(id)a1 shortcutInfo:(id)a2 config:(id)a3;
+ (void)registerModelUpdatingActivity;
+ (void)resultQualityAcceptanceCheck:(id)a0 config:(id)a1;
+ (unsigned long long)sectionLimit:(id)a0 config:(id)a1 task:(id)a2;
+ (BOOL)shouldLimitSection:(id)a0 config:(id)a1;
+ (BOOL)shouldShowTopResultAboveFilterBarFor:(id)a0 config:(id)a1;
+ (BOOL)shouldSortSection:(id)a0 config:(id)a1;
+ (BOOL)supportsCoreSpotlightSearchContinuationForBundle:(id)a0 orURL:(id)a1;
+ (id)syntheticLocalSections;
+ (id)topWebSuggestionsResultsFromResponse:(id)a0;
+ (void)trackTopResultsForTask:(id)a0 response:(id)a1 sections:(id)a2 config:(id)a3;
+ (id)webAsTypedSearchResultWithQuery:(id)a0 queryId:(unsigned long long)a1 isSearchTool:(BOOL)a2;

- (void)start;
- (void)dealloc;
- (id)initWithQueryContext:(id)a0;
- (void)cancel;
- (double)startTime;
- (id)description;
- (void).cxx_destruct;
- (id)allSections;
- (void)buildSyndicatedSectionWithSections:(id)a0 queryContext:(id)a1 isPeopleSearch:(BOOL)a2;
- (void)dedupeIndistinguishableResults:(id)a0;
- (void)finishResponse:(id)a0;
- (id)URLRepresentedByBookmarkResult:(id)a0;
- (void)sendPerformanceFeedback:(id)a0 forKey:(id)a1;
- (void)_addParsecQueryResults:(id)a0 toSections:(id)a1;
- (void)_cleanupAuxQueries;
- (void)_initQueries;
- (BOOL)_isInternallyCompleted;
- (void)_loadSyndicatedSectionsWithQueryContext:(id)a0;
- (id)_makeRelatedSearchSectionWithQuery:(id)a0 queryId:(unsigned long long)a1 sections:(id)a2 rankingManager:(id)a3;
- (void)_processResponse:(id)a0 toQuery:(id)a1;
- (void)_responseTimerCancel;
- (void)_sendResponseKind:(int)a0 sourceKind:(int)a1 withSections:(id)a2 withServerSuggestions:(id)a3 withLocalSuggestions:(id)a4 withSupportedFilters:(id)a5 toQuery:(id)a6 topHitIsIn:(BOOL)a7 delay:(double)a8 internal:(BOOL)a9;
- (id)_showAllInFinderResultForSections:(id)a0 query:(id)a1 queryID:(unsigned long long)a2;
- (void)_startMetadata;
- (void)_startNonMetadata;
- (BOOL)_topHitIsIn;
- (id)_ttrResultWithQuery:(id)a0 queryId:(unsigned long long)a1 sections:(id)a2 rankingManager:(id)a3;
- (long long)addResultsForGroup:(id)a0 toArray:(id)a1 resultIdSet:(id)a2 focusString:(id)a3 currentLocale:(id)a4;
- (void)buildSyndicatedPhotosSectionsWithSections:(id)a0 queryContext:(id)a1;
- (void)deDuplicateCalendarResults:(id)a0;
- (void)deDuplicateContactResults:(id)a0;
- (void)deDuplicateFileProviderServerSections:(id)a0 coreSpotlightIdMapping:(id)a1;
- (void)deDuplicateMailResults:(id)a0;
- (void)deDuplicateResultSetWithSections:(id)a0 duplicatedDictResults:(id *)a1 originalDictResults:(id *)a2 parsecOverLocalDictionary:(BOOL)a3 queryKind:(unsigned long long)a4;
- (void)deDuplicateSettingsResults:(id)a0;
- (void)dedupCalendarRecurringResults:(id)a0;
- (void)dedupeQuickWebsiteResultsForSections:(id)a0;
- (void)dedupeResults:(id)a0;
- (void)deduplicateResults:(id)a0 duplicatedDictResults:(id)a1 originalDictResults:(id)a2 config:(id)a3;
- (void)delayResponse:(id)a0 forQuery:(id)a1;
- (void)filterMixedGroup:(id)a0 sectionLimit:(unsigned long long)a1;
- (void)filterPreferedSectionResults:(id)a0 isAdvancedQuerySyntax:(BOOL)a1;
- (id)findDistinctPathIdentifiers;
- (void)finishMixedResponse:(id)a0;
- (void)finishWithResponseKind:(int)a0 sourceKind:(int)a1 sections:(id)a2 serverSuggestions:(id)a3 localSuggestions:(id)a4 groupedResults:(id)a5 supportedFilters:(id)a6 userQueryString:(id)a7 topHitIsIn:(BOOL)a8;
- (void)markAsEngaged:(id)a0 forQueryString:(id)a1 timestamp:(double)a2 preview:(BOOL)a3;
- (void)markAsUsed:(id)a0 subItem:(BOOL)a1;
- (id)mergeResultSet:(id)a0 withResultSet:(id)a1;
- (void)mergeSectionsWithRankedSections:(id)a0 localSectionBundleID:(id)a1 serverSectionBundleIDs:(id)a2 mergedSectionBundleID:(id)a3 mergedSectionTitle:(id)a4;
- (void)queryTask:(id)a0 gotResponse:(id)a1;
- (void)rankAndPrune:(id)a0 maxResults:(unsigned long long)a1 totalResultCount:(long long *)a2 query:(id)a3 currentLocale:(id)a4 isAdvancedQuerySyntax:(BOOL)a5 currentTime:(double)a6;
- (id)resultRankingFeedbackWithResult:(id)a0 duplicateResults:(id)a1 originalResultsId:(id)a2;
- (BOOL)sectionCanBeVisuallyDeduped:(id)a0;
- (id)sectionRankingFeedbackWithSections:(id)a0 duplicateResults:(id)a1 originalResultsId:(id)a2;
- (id)sectionWithBundleId:(id)a0;
- (id)sectionWithBundleId:(id)a0;
- (void)sendRankingFeedbackForResultsArray:(id)a0 withSections:(id)a1;
- (void)sendResultsDidFinishWithSections:(id)a0 withQueryString:(id)a1;
- (void)sendTTRLogsWithSections:(id)a0 rankingManager:(id)a1;
- (void)setTopHitSection:(id)a0;
- (id)suggestionsWithSearchString:(id)a0 sections:(id)a1 topHitSection:(id)a2 highestLocalScore:(double)a3 rankingManager:(id)a4;
- (id)topHitSection;
- (id)topHitSection;
- (BOOL)topHitStillExistsInSections:(id)a0;
- (void)updateAppBundleIDList:(id)a0;
- (void)willSendPerformanceFeedback;

@end
