@class NSMutableDictionary, NSArray, NSURL, NSMutableSet, NSMutableArray, NSString;
@protocol CalBookmarkMigrator, CalContactsProviderProtocol, CalCalendarMigrationDefaultsProvider, CalCancellationToken, CalCalendarMigrationFailureRecorder, CalMigrationAccountStore, CalMigrationKeychain, CalCalendarDataContainerProvider, CalMigrationAccount;

@interface CalTruthFilesCalendarMigrationContext : NSObject <CDBRecordIDMap, CalCalendarDatabaseIntegrityErrorReportingDelegate, CalPrivacySafePathProvider> {
    void *_localStore;
    void *_birthdayStore;
    void *_subscribedCalendarStore;
    void *_suggestedEventsCalendar;
    void *_naturalLanguageSuggestedEventsCalendar;
    id<CalMigrationAccount> _holidayAccount;
    NSMutableArray *_keychainEntriesToDelete;
}

@property (readonly, nonatomic) NSURL *sourceCalendarDirectory;
@property (readonly, nonatomic) NSURL *destinationCalendarDirectory;
@property (nonatomic) struct CalDatabase { struct __CFRuntimeBase { unsigned long long x0; _Atomic unsigned long long x1; } x0; int x1; struct CPRecordStore *x2; struct CalEventOccurrenceCache *x3; struct CalScheduledTaskCache *x4; void *x5; void *x6; struct __CFDictionary *x7; struct __CFDictionary *x8; struct os_unfair_lock_s { unsigned int x0; } x9; unsigned int x10; unsigned int x11; struct __CFArray *x12; struct __CFString *x13; struct __CFArray *x14; int x15; int x16; struct __CFString *x17; struct __CFURL *x18; struct __CFString *x19; struct __CFString *x20; unsigned long long x21; int x22; int x23; int x24; id /* block */ x25; struct _opaque_pthread_mutex_t { long long x0; char x1[56]; } x26; BOOL x27; struct __CFArray *x28; BOOL x29; struct __CFSet *x30; id x31; id x32; id x33; id x34; id x35; char *x36; unsigned int x37; unsigned int x38; int x39; unsigned long long x40; BOOL x41; BOOL x42; BOOL x43; BOOL x44; BOOL x45; BOOL x46; BOOL x47; } *database;
@property (nonatomic) BOOL recordedAnyFatalFailures;
@property (nonatomic) BOOL haveMigratedAnySyncingAccounts;
@property (nonatomic) BOOL haveMigratedAnyLocalCalendarsOrGroups;
@property (readonly, nonatomic) NSMutableDictionary *accounts;
@property (retain, nonatomic) id<CalMigrationAccount> holidayAccount;
@property (readonly, nonatomic) NSMutableSet *accountIdentifiersToDelete;
@property (readonly, nonatomic) NSMutableDictionary *calDAVPrincipalsPerAccount;
@property (readonly, nonatomic) NSMutableDictionary *exchangePrincipalsPerAccount;
@property (readonly, nonatomic) NSMutableDictionary *accountIdentifiersPerPrincipalUid;
@property (readonly, nonatomic) NSMutableDictionary *calDAVDelegatePrincipalsPerOwnerUid;
@property (readonly, nonatomic) NSMutableDictionary *exchangeDelegatePrincipalsPerOwnerUid;
@property (readonly, nonatomic) NSMutableDictionary *subscriptionInfosPerOwnerUid;
@property (readonly, nonatomic) NSMutableArray *publicationInfos;
@property (readonly, nonatomic) NSMutableDictionary *storesPerPrincipalUid;
@property (readonly, nonatomic) NSMutableDictionary *storesPerLocalCalendarUid;
@property (readonly, nonatomic) NSMutableDictionary *notificationCalendarsPerPrincipalUid;
@property (readonly, nonatomic) NSMutableDictionary *subscribedCalendarsPerPrincipalUid;
@property (readonly, nonatomic) NSMutableDictionary *publishedCalendarsByUid;
@property (readonly, nonatomic) NSMutableDictionary *uniqueIdentifierRecordIDMap;
@property (readonly, nonatomic) NSMutableDictionary *externalIdentifierRecordIDMap;
@property (nonatomic) BOOL haveDeletedExistingLocalCalendars;
@property (readonly, nonatomic) NSMutableSet *directoriesToDelete;
@property (readonly, nonatomic) NSMutableSet *filesToDelete;
@property (readonly, nonatomic) id<CalCalendarMigrationDefaultsProvider> defaultsProvider;
@property (readonly, nonatomic) id<CalCalendarMigrationFailureRecorder> failureRecorder;
@property (readonly, nonatomic) id<CalMigrationAccountStore> accountStore;
@property (readonly, nonatomic) id<CalMigrationKeychain> keychain;
@property (readonly, nonatomic) id<CalContactsProviderProtocol> contactsProvider;
@property (readonly, nonatomic) id<CalCalendarDataContainerProvider> calendarDataContainerProvider;
@property (readonly, nonatomic) id<CalBookmarkMigrator> bookmarkMigrator;
@property (readonly, nonatomic) id<CalCancellationToken> cancellationToken;
@property (readonly, nonatomic) void *localStore;
@property (readonly, nonatomic) void *birthdayStore;
@property (readonly, nonatomic) void *subscribedCalendarStore;
@property (readonly, nonatomic) void *suggestedEventsCalendar;
@property (readonly, nonatomic) void *naturalLanguageSuggestedEventsCalendar;
@property (readonly, nonatomic) NSArray *itemsToDelete;
@property (readonly, nonatomic) NSArray *keychainEntriesToDelete;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

+ (id)_notificationServerURLWithFilename:(id)a0 calDAVPrincipal:(id)a1;
+ (void)_removeItemsToDeleteContainedByDirectory:(id)a0 fromSet:(id)a1;
+ (id)_serverURLWithPath:(id)a0 forCalDAVPrincipal:(id)a1;
+ (id)_subscriptionCalDavURLForSubscriptionInfo:(id)a0 owningPrincipal:(id)a1;
+ (id)migrationContextWithDefaultsProvider:(id)a0 failureRecorder:(id)a1 accountStore:(id)a2 keychain:(id)a3 contactsProvider:(id)a4 calendarDataContainerProvider:(id)a5 bookmarkMigrator:(id)a6 sourceCalendarDirectory:(id)a7 destinationCalendarDirectory:(id)a8 cancellationToken:(id)a9;

- (void)dealloc;
- (id)_accountWithIdentifier:(id)a0;
- (void)reportIntegrityErrors:(id)a0;
- (void).cxx_destruct;
- (void)setDefaultCalendar:(void *)a0;
- (struct CalRecordID { } *)recordIDForExternalIdentifier:(id)a0;
- (struct CalRecordID { } *)recordIDForUniqueIdentifier:(id)a0;
- (void)setExternalIdentifier:(id)a0 forRecordID:(struct CalRecordID { } *)a1;
- (void)setUniqueIdentifier:(id)a0 forRecordID:(struct CalRecordID { } *)a1;
- (void)addPublicationInfo:(id)a0 forCalendar:(void *)a1;
- (id)subscriptionCalDavURLForSubscriptionInfo:(id)a0 withOwnerPrincipalUid:(id)a1;
- (id)_accountForPrincipleUid:(id)a0 principal:(id *)a1;
- (id)_attachmentsDirectoryForEventWithUniqueId:(id)a0 importedFromICSFile:(id)a1;
- (id)_childAccountsForAccount:(id)a0 withTypeIdentifier:(id)a1;
- (BOOL)_createAccountsForSubscriptionInfos:(id)a0 inParentAccount:(id)a1;
- (BOOL)_createChildAccountForDelegatePrincipals:(id)a0 withParentAccount:(id)a1;
- (BOOL)_createChildDelegateAccounts;
- (BOOL)_createPublicationAccounts;
- (void)_createSpecialCalendarsForCalDAVPrincipal:(id)a0 inStore:(void *)a1;
- (void *)_createStoreForPrincipalWithUid:(id)a0;
- (BOOL)_createSubscriptionAccounts;
- (id)_createUnsavedHolidayAccount;
- (void)_didEndMigrationWithSuccess:(BOOL)a0;
- (id)_etagCacheForEventAttachmentsDirectory:(id)a0;
- (id)_existingChildDelegateAccountsForParentAccount:(id)a0;
- (id)_existingPublishedCalendarAccounts;
- (id)_existingSubscribedCalendarInParentAccount:(id)a0;
- (id)_homeRelativePathForURL:(id)a0;
- (id)_initWithDefaultsProvider:(id)a0 failureRecorder:(id)a1 accountStore:(id)a2 keychain:(id)a3 contactsProvider:(id)a4 calendarDataContainerProvider:(id)a5 bookmarkMigrator:(id)a6 sourceCalendarDirectory:(id)a7 destinationCalendarDirectory:(id)a8 cancellationToken:(id)a9;
- (BOOL)_isURLSubpathOfExistingDirectoryToDelete:(id)a0;
- (void)_markAllAlertedsAsClearedFromNotificationCenter;
- (void)_migrateAlarmBookmarksForImportedEvent:(void *)a0;
- (void)_moveAttachmentsForImportedEvent:(void *)a0 forICSFile:(id)a1;
- (struct CalDatabase { struct __CFRuntimeBase { unsigned long long x0; _Atomic unsigned long long x1; } x0; int x1; struct CPRecordStore *x2; struct CalEventOccurrenceCache *x3; struct CalScheduledTaskCache *x4; void *x5; void *x6; struct __CFDictionary *x7; struct __CFDictionary *x8; struct os_unfair_lock_s { unsigned int x0; } x9; unsigned int x10; unsigned int x11; struct __CFArray *x12; struct __CFString *x13; struct __CFArray *x14; int x15; int x16; struct __CFString *x17; struct __CFURL *x18; struct __CFString *x19; struct __CFString *x20; unsigned long long x21; int x22; int x23; int x24; id /* block */ x25; struct _opaque_pthread_mutex_t { long long x0; char x1[56]; } x26; BOOL x27; struct __CFArray *x28; BOOL x29; struct __CFSet *x30; id x31; id x32; id x33; id x34; id x35; char *x36; unsigned int x37; unsigned int x38; int x39; unsigned long long x40; BOOL x41; BOOL x42; BOOL x43; BOOL x44; BOOL x45; BOOL x46; BOOL x47; } *)_newDatabaseReference;
- (BOOL)_patchAccountIdsForCreatedPublishedCalendars;
- (BOOL)_patchAccountIdsForCreatedSubscribedCalendars;
- (BOOL)_patchDelegateOwnersForCreatedStores;
- (BOOL)_patchExternalIdsForCreatedStores;
- (BOOL)_processAccountChanges;
- (BOOL)_processAccountsToDelete;
- (void)_recordAccountIdentifierToBeDeleted:(id)a0;
- (void)_recordMigrationFailure:(id)a0 isFatal:(BOOL)a1;
- (void)_recordMigrationFailureWithDescription:(id)a0 inStage:(unsigned long long)a1 underlyingError:(id)a2 relatedTo:(id)a3;
- (void)_recordMigrationFailureWithDescription:(id)a0 inStage:(unsigned long long)a1 underlyingError:(id)a2 relatedTo:(id)a3 isFatal:(BOOL)a4;
- (void)_removeItemsToDeleteContainedByDirectory:(id)a0;
- (BOOL)_saveAccountChanges;
- (BOOL)_saveCalendarDatabase:(struct CalDatabase { struct __CFRuntimeBase { unsigned long long x0; _Atomic unsigned long long x1; } x0; int x1; struct CPRecordStore *x2; struct CalEventOccurrenceCache *x3; struct CalScheduledTaskCache *x4; void *x5; void *x6; struct __CFDictionary *x7; struct __CFDictionary *x8; struct os_unfair_lock_s { unsigned int x0; } x9; unsigned int x10; unsigned int x11; struct __CFArray *x12; struct __CFString *x13; struct __CFArray *x14; int x15; int x16; struct __CFString *x17; struct __CFURL *x18; struct __CFString *x19; struct __CFString *x20; unsigned long long x21; int x22; int x23; int x24; id /* block */ x25; struct _opaque_pthread_mutex_t { long long x0; char x1[56]; } x26; BOOL x27; struct __CFArray *x28; BOOL x29; struct __CFSet *x30; id x31; id x32; id x33; id x34; id x35; char *x36; unsigned int x37; unsigned int x38; int x39; unsigned long long x40; BOOL x41; BOOL x42; BOOL x43; BOOL x44; BOOL x45; BOOL x46; BOOL x47; } *)a0;
- (BOOL)_setAccountProperties;
- (BOOL)_setCalDAVPrincipalsAccountProperties;
- (BOOL)_setExchangePrincipalsAccountProperties;
- (BOOL)_setPublishedCalendarAccountProperties;
- (void)_setSelfAttendeeOnEvent:(void *)a0 withAccountInfo:(id)a1;
- (BOOL)_setSubscribedCalendarAccountProperties;
- (BOOL)_updateAccount:(id)a0 withCalDAVPrincipal:(id)a1;
- (BOOL)_updateAccount:(id)a0 withExchangePrincipal:(id)a1 delegatePrincipals:(id)a2;
- (BOOL)_updateCreatedDatabaseItems;
- (void)_updateOrganizerIsSelfOnEvent:(void *)a0 withAccountInfo:(id)a1;
- (void)addCalDAVPrincipal:(id)a0 forAccountWithIdentifier:(id)a1 store:(void *)a2;
- (void)addCalDAVPrincipalForDelegate:(id)a0 withOwnerPrincipalUid:(id)a1 store:(void *)a2;
- (void)addDirectoryToDelete:(id)a0;
- (void)addEventActionWithServerPath:(id)a0 toEventWithUniqueIdentifier:(id)a1 inStore:(void *)a2;
- (void)addExchangePrincipal:(id)a0 forAccountWithIdentifier:(id)a1;
- (void)addExchangePrincipalForDelegate:(id)a0 withOwnerPrincipalUid:(id)a1 store:(void *)a2;
- (void)addFileToDelete:(id)a0;
- (void)addKeychainEntryToDelete:(id)a0;
- (void)addSubscriptionInfo:(id)a0 withOwnerPrincipalUid:(id)a1;
- (void)closeCalendarDatabase;
- (void *)copyCalendarWithUUID:(id)a0;
- (void *)createCalendar;
- (void *)createLocalGroupStore;
- (void *)createStoreForPrincipalWithUid:(id)a0 expectingExistingAccountWithIdentifier:(id)a1;
- (void *)createStoreForPrincipalWithUid:(id)a0 expectingExistingParentStoreWithUid:(id)a1;
- (void)deleteExistingLocalCalendarsIfNeeded;
- (BOOL)finishMigrationWithSave:(BOOL)a0;
- (void *)localGroupStoreForLocalCalendarWithUid:(id)a0;
- (void)performBlockWithBatchedOperation:(id /* block */)a0;
- (id)privacySafePathForURLInCalendarDirectory:(id)a0;
- (void)processNotificationData:(id)a0 withFilename:(id)a1 forCalDAVPrincipal:(id)a2 inStore:(void *)a3;
- (void)processiTIPMessages:(id)a0 inStore:(void *)a1 inboxPath:(id)a2 accountInfo:(id)a3;
- (void)recordMigrationFailureWithDescription:(id)a0 inStage:(unsigned long long)a1 underlyingError:(id)a2;
- (void)recordMigrationFailureWithDescription:(id)a0 inStage:(unsigned long long)a1 underlyingError:(id)a2 relatedToURL:(id)a3;
- (void)recordMigrationFailureWithDescription:(id)a0 inStage:(unsigned long long)a1 underlyingError:(id)a2 relatedToURL:(id)a3 isFatal:(BOOL)a4;
- (BOOL)saveCalendarDatabase;
- (void)setCalendar:(void *)a0 forSubscriptionWithPrincipalUid:(id)a1;
- (void)setContainedCalendarUids:(id)a0 forLocalGroupStore:(void *)a1;
- (void)setHolidayAccountEnabled:(BOOL)a0;
- (void)setHolidayCalendar:(void *)a0;

@end
