@class NSString, PLPhotoLibraryPathManager, PSIStatement, NSMutableString, PSIIntArray, NSObject, NSMutableArray, PSITokenizer;
@protocol OS_dispatch_queue;

@interface PSIDatabase : NSObject <PSIGroupCacheDelegate, PSIQueryDelegate, PSITableDelegate> {
    struct sqlite3 { } *_inqDatabase;
    BOOL _databaseIsValid;
    struct __CFDictionary { } *_inqPreparedStatements;
    PSIIntArray *_matchingIds;
    PSIIntArray *_matchingValues;
    PSIStatement *_assetUUIDByAssetIdWithAssetIdsStatement;
    PSIStatement *_collectionResultByCollectionIdWithCollectionIdsStatement;
    PSIStatement *_inqAssetIdsByGroupIdForAssetIdsStatement;
    PSIStatement *_inqCollectionIdsByGroupIdForCollectionIdsStatement;
    PSIStatement *_inqNumberOfAssetsMatchingGroupWithIdStatement;
    PSIStatement *_inqNumberOfAssetsByGroupIdMatchingGroupsWithIdsStatement;
    PSIStatement *_inqNumberOfCollectionsMatchingGroupWithIdStatement;
    PSIStatement *_inqNumberOfCollectionsByGroupIdMatchingGroupsWithIdsStatement;
    PSIStatement *_inqIdsOfAllGroupsStatement;
    PSIStatement *_inqIdsOfAllGroupsInPrefixStatement;
    struct __CFDictionary { } *_inqGroupObjectsById;
    NSObject<OS_dispatch_queue> *_serialQueue;
    NSObject<OS_dispatch_queue> *_searchQueue;
    PSITokenizer *_tokenizer;
    NSMutableString *_tokenizerOutputString;
    NSMutableArray *_tokenizerOutputTokens;
    NSMutableArray *_tokenizerOutputNormalizedTokens;
    struct { long long location; long long length; } _tokenizerOutputRanges[8];
}

@property (readonly) PSITokenizer *tokenizer;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;
@property (readonly, copy, nonatomic) NSString *path;
@property (readonly, nonatomic) long long options;
@property (readonly, nonatomic) PLPhotoLibraryPathManager *pathManager;

+ (void)dropDatabaseAtPath:(id)a0 withCompletion:(id /* block */)a1;
+ (BOOL)_integrityCheckDatabase:(struct sqlite3 { } *)a0;
+ (void)_dropDatabase:(struct sqlite3 { } *)a0 withCompletion:(id /* block */)a1;
+ (struct sqlite3 { } *)_openDatabaseAtPath:(id)a0 options:(long long)a1;
+ (id)searchDatabaseLog;

- (void)_inqUpdateInitialSuggestionWithTemplateKey:(id)a0 firstGroupId:(unsigned long long)a1 secondGroupId:(unsigned long long)a2 dateLastUsed:(id)a3;
- (void)collectionIdsFromUUIDs:(id)a0 completion:(id /* block */)a1;
- (void)exqExecuteStatementFromString:(id)a0 withResultEnumerationBlock:(id /* block */)a1;
- (unsigned long long)_inqUpdateGroupForText:(id)a0 identifier:(id)a1 category:(short)a2 owningGroupId:(unsigned long long)a3;
- (double)_inqScoreForGroupID:(unsigned long long)a0;
- (void)removeCollectionsWithUUIDs:(id)a0 deferRemovingUnusedGroups:(BOOL)a1 completion:(id /* block */)a2;
- (id)_inqAssetUUIDsForAssetIds:(struct __CFSet { } *)a0;
- (BOOL)assetExistsWithUUID:(id)a0;
- (void)_ingRebuildPrefixTableIfNeeded;
- (void)executeStatement:(id)a0;
- (void)_inqAsync:(id /* block */)a0;
- (void)addCollections:(id)a0 withCompletion:(id /* block */)a1;
- (void)_inqGetTokensFromString:(id)a0 category:(short)a1 tokenOutput:(struct tokenOutput_t { id x0; id x1; id x2; struct *x3; long long x4; long long x5; struct *x6; long long x7; long long x8; } *)a2;
- (id)_inqCollectionUUIDsForGroupID:(unsigned long long)a0;
- (id)fetchInitialSuggestions;
- (void)dealloc;
- (struct __CFSet { } *)_inqNewGroupIdsForCollectionIds:(struct __CFSet { } *)a0;
- (void)removeAssetsWithUUIDs:(id)a0 completion:(id /* block */)a1;
- (void)bindMatchingValues:(struct __CFArray { } *)a0 range:(struct _NSRange { unsigned long long x0; unsigned long long x1; })a1;
- (BOOL)_inqVerifyTablesExistInDatabase;
- (id)groupsForSearchIndexCategories:(id)a0 searchResultTypes:(unsigned long long)a1 dateFilter:(id)a2;
- (void)addAsset:(id)a0 withCompletion:(id /* block */)a1;
- (void)addCollection:(id)a0 withCompletion:(id /* block */)a1;
- (void)unprepareMatchingIds;
- (long long)insertGroup:(id)a0;
- (id)_inqAssetUUIDsForAssetIds:(struct __CFArray { } *)a0 range:(struct _NSRange { unsigned long long x0; unsigned long long x1; })a1 creationDateSorted:(BOOL)a2;
- (void)_inqRemoveUUID:(id)a0 objectType:(unsigned long long)a1 isInBatch:(BOOL)a2;
- (id)_inqAssetIdsByGroupIdForAssetIds:(id)a0;
- (void)executeStatementFromString:(id)a0 withResultEnumerationBlock:(id /* block */)a1;
- (void)bindMatchingIds:(struct __CFSet { } *)a0;
- (void)_inqRemoveUnusedGroups;
- (void)addAssets:(id)a0 deferRemovingUnusedGroups:(BOOL)a1 withCompletion:(id /* block */)a2;
- (void)saveInitialSuggestions:(id)a0;
- (void)_inSearchQueueAsync:(id /* block */)a0;
- (void)prepareForNumberOfMatchingIds:(unsigned long long)a0;
- (void)prepareForNumberOfMatchingValues:(unsigned long long)a0;
- (id)_inqCollectionIdsByGroupIdForCollectionIds:(id)a0;
- (void)deleteAllInitialSuggestions;
- (id)groupForText:(id)a0 identifier:(id)a1 category:(unsigned long long)a2 resultTypes:(unsigned long long)a3;
- (void)_inqInsertInitialSuggestion:(id)a0;
- (struct __CFArray { } *)_inqNewAssetIdsWithDateFilter:(id)a0;
- (unsigned long long)_inqGroupIdForCategory:(short)a0 contentString:(id)a1 identifier:(id)a2 outOwningGroupId:(unsigned long long *)a3 outScore:(double *)a4;
- (id)uuidsForLookupIdentifier:(id)a0 resultTypes:(unsigned long long)a1;
- (id)_inqGroupWithMatchingGroupId:(unsigned long long)a0 dateFilter:(id)a1 searchResultTypes:(unsigned long long)a2;
- (void)_inqExecutePreparedStatement:(struct sqlite3_stmt { } *)a0 allowError:(int)a1 withStatementBlock:(id /* block */)a2;
- (id)_inqDequeueGroupObjectWithId:(unsigned long long)a0 isCachedGroup:(BOOL *)a1;
- (struct __CFArray { } *)mostRecentSortedAssetIdsWithLimit:(unsigned long long)a0;
- (void)bindMatchingValues:(const long long *)a0 numberOfMatchingValues:(unsigned long long)a1;
- (struct __CFSet { } *)_inqAssetIdsForGroupIds:(struct __CFSet { } *)a0;
- (void)removeAssetWithUUID:(id)a0 completion:(id /* block */)a1;
- (id)assetUUIDsForAssetIds:(struct __CFSet { } *)a0;
- (void)_inqRemoveUUID:(id)a0 categories:(id)a1 objectType:(unsigned long long)a2 isInBatch:(BOOL)a3;
- (id)assetUUIDsForAssetIdsArray:(struct __CFArray { } *)a0;
- (void)_inqUpdateGATableWithGroupId:(unsigned long long)a0 assetId:(unsigned long long)a1;
- (id)groupArraysFromGroupIdSets:(id)a0 dateFilter:(id)a1 searchResultTypes:(unsigned long long)a2 progressBlock:(id /* block */)a3;
- (void)addCollections:(id)a0 deferRemovingUnusedGroups:(BOOL)a1 withCompletion:(id /* block */)a2;
- (void)updateInitialSuggestionsWithIdentifiers:(id)a0 dateLastUsed:(id)a1;
- (struct sqlite3 { } *)databaseConnection;
- (void)_removeUUID:(id)a0 categories:(id)a1 objectType:(unsigned long long)a2 completion:(id /* block */)a3;
- (void)unprepareMatchingValues;
- (id)_inqGroupsWithMatchingGroupIds:(struct __CFSet { } *)a0 dateFilter:(id)a1 includeObjects:(BOOL)a2 searchResultTypes:(unsigned long long)a3 matchingPredicateBlock:(id /* block */)a4;
- (id)dumpGroupsInfoForAssetUUID:(id)a0 indexCategories:(id)a1 includeUUIDs:(BOOL)a2;
- (struct __CFSet { } *)_inqNewGroupIdsWithCategories:(id)a0;
- (void)unbindMatchingValues;
- (void)linkCollectionWithId:(long long)a0 toGroupWithId:(long long)a1;
- (void)_sortedSearchIndexRowIdsFromUUIDs:(id)a0 searchResultType:(unsigned long long)a1 completion:(id /* block */)a2;
- (void)unbindMatchingIds;
- (void)removeCategories:(id)a0 forAssetUUID:(id)a1 completion:(id /* block */)a2;
- (unsigned long long)_inqNumberOfCollectionsMatchingGroupWithId:(unsigned long long)a0;
- (void)_inqUpdateGCTableWithGroupId:(unsigned long long)a0 collectionId:(unsigned long long)a1;
- (id)_inqGroupWithFilenameStatement:(struct sqlite3_stmt { } *)a0 dateFilter:(id)a1 excludingGroupId:(unsigned long long)a2 searchResultTypes:(unsigned long long)a3;
- (long long)insertAsset:(id)a0;
- (id)_inqGenerateGroupsInfoDictionaryFromContentString:(const char *)a0 normalizedString:(const char *)a1 identifier:(const char *)a2 category:(short)a3 score:(double)a4 groupId:(unsigned long long)a5 owningGroupId:(unsigned long long)a6 includeUUIDs:(BOOL)a7;
- (unsigned long long)countOfAssets;
- (struct __CFSet { } *)_inqNewGroupIdsMatchingFTSString:(id)a0 categories:(id)a1 textIsSearchable:(BOOL)a2;
- (id)groupsForGroupIds:(struct __CFSet { } *)a0 includeObjectIds:(BOOL)a1 searchResultTypes:(unsigned long long)a2;
- (id)allGroupIds;
- (void)_finalizeEverything;
- (void)assetIdsFromUUIDs:(id)a0 completion:(id /* block */)a1;
- (id)_inqGroupForLookupIdentifier:(id)a0 searchResultTypes:(unsigned long long)a1;
- (void)_inqGroupIdsForAssetOrCollectionIds:(struct __CFArray { } *)a0 resultType:(unsigned long long)a1 completion:(id /* block */)a2;
- (BOOL)_prepareSearchIndexAtPath:(id)a0 options:(long long)a1;
- (struct __CFArray { } *)_inqNewCollectionIdsForGroupId:(unsigned long long)a0 dateFilter:(id)a1;
- (void)bindMatchingIds:(struct __CFArray { } *)a0 range:(struct _NSRange { unsigned long long x0; unsigned long long x1; })a1;
- (struct __CFSet { } *)_inqNewGroupIdsForAssetId:(unsigned long long)a0;
- (void)bindMatchingIds:(const long long *)a0 numberOfMatchingIds:(unsigned long long)a1;
- (id)_inqNumberOfCollectionsByGroupIdMatchingGroupsWithIds:(id)a0;
- (id)_inqGroupWithStatement:(struct sqlite3_stmt { } *)a0 dateFilter:(id)a1 includeObjects:(BOOL)a2 searchResultTypes:(unsigned long long)a3;
- (void)executeStatement:(id)a0 withResultEnumerationBlock:(id /* block */)a1;
- (unsigned long long)_inqAssetIdForUUID:(id)a0;
- (id)_inqGroupWithStatement:(struct sqlite3_stmt { } *)a0 dateFilter:(id)a1 includeObjects:(BOOL)a2 isFilenameStatement:(BOOL)a3 excludingGroupId:(unsigned long long)a4 searchResultTypes:(unsigned long long)a5;
- (long long)lastInsertedRowID;
- (void)removeCollectionWithUUID:(id)a0 completion:(id /* block */)a1;
- (id)statementFromString:(id)a0;
- (id)_inqGroupArraysFromGroupIdSets:(id)a0 dateFilter:(id)a1 searchResultTypes:(unsigned long long)a2 progressBlock:(id /* block */)a3;
- (id)_inqNumberOfAssetsByGroupIdMatchingGroupsWithIds:(id)a0;
- (void)_inqPrepareAndExecuteStatement:(const char *)a0;
- (struct __CFDictionary { } *)_inqPrepareStatementsForOptions:(long long)a0 tokenizerName:(id)a1;
- (void)groupsForAssetIds:(struct __CFArray { } *)a0 completion:(id /* block */)a1;
- (id)_inqSelectInitialSuggestions;
- (struct __CFSet { } *)_inqNewGroupIdsForCollectionId:(unsigned long long)a0;
- (struct __CFArray { } *)_inqNewAssetIdsForGroupId:(unsigned long long)a0 dateFilter:(id)a1;
- (void)_inqSync:(id /* block */)a0;
- (void)_inqExecutePreparedStatement:(struct sqlite3_stmt { } *)a0 withCancelableStatementBlock:(id /* block */)a1;
- (id)assetUUIDsForGroupIDs:(struct __CFSet { } *)a0;
- (void)executeStatementFromString:(id)a0;
- (void)removeUnusedGroups;
- (unsigned long long)_inqAssetIdForUUID:(id)a0 uuid_0:(unsigned long long *)a1 uuid_1:(unsigned long long *)a2;
- (struct __CFArray { } *)assetIdsWithDateFilter:(id)a0;
- (void)_removeUUIDs:(id)a0 objectType:(unsigned long long)a1 deferRemovingUnusedGroups:(BOOL)a2 completion:(id /* block */)a3;
- (void)addAssets:(id)a0 withCompletion:(id /* block */)a1;
- (void)removeCollectionsWithUUIDs:(id)a0 completion:(id /* block */)a1;
- (void)linkAssetWithId:(long long)a0 toGroupWithId:(long long)a1;
- (id)groupForLookupIdentifier:(id)a0 searchResultTypes:(unsigned long long)a1;
- (unsigned long long)updateGroupForText:(id)a0 identifier:(id)a1 category:(short)a2 owningGroupId:(unsigned long long)a3;
- (void)removeAssetsWithUUIDs:(id)a0 deferRemovingUnusedGroups:(BOOL)a1 completion:(id /* block */)a2;
- (id)_inqNewSynonymTextsByOwningGroupIdWithGroupIds:(struct __CFSet { } *)a0;
- (id)groupsForAssetIds:(struct __CFArray { } *)a0 indexCategories:(id)a1 includeObjects:(BOOL)a2;
- (id)initWithPathManager:(id)a0 options:(long long)a1;
- (unsigned long long)_inqGroupIdForCategory:(short)a0 normalizedString:(id)a1 identifier:(id)a2 outOwningGroupId:(unsigned long long *)a3 outScore:(double *)a4;
- (void)_inqPerformBatch:(id /* block */)a0;
- (struct __CFSet { } *)groupIdsMatchingFTSString:(id)a0 categories:(id)a1 textIsSearchable:(BOOL)a2;
- (id)_inqCollectionUUIDsForCollectionIds:(struct __CFArray { } *)a0 range:(struct _NSRange { unsigned long long x0; unsigned long long x1; })a1;
- (id)_inqContentStringForGroupId:(unsigned long long)a0;
- (unsigned long long)_inqCollectionIdForUUID:(id)a0 uuid_0:(unsigned long long *)a1 uuid_1:(unsigned long long *)a2;
- (id)dumpLookupStringsWithIndexCategories:(id)a0;
- (unsigned long long)_inqCollectionIdForUUID:(id)a0;
- (struct sqlite3_stmt { } *)_inqPrepareStatement:(const char *)a0;
- (unsigned long long)_inqCollectionIdWithCollection:(id)a0;
- (void)dropDatabaseWithCompletion:(id /* block */)a0;
- (struct __CFSet { } *)groupIdsForNormalizedText:(id)a0 wildcardSearch:(BOOL)a1 leadingAnchored:(BOOL)a2 searchIndexCategories:(id)a3;
- (void)_inqExecutePreparedStatement:(struct sqlite3_stmt { } *)a0 withStatementBlock:(id /* block */)a1;
- (id)_inqAssetUUIDsForGroupID:(unsigned long long)a0;
- (id)initForTestingWithOptions:(long long)a0;
- (id)groupIdsInPrefixTable;
- (void)updateRankingScoreForGroups:(id)a0 withCompletion:(id /* block */)a1;
- (id)_inqNonFilenameGroupsWithMatchingGroupIds:(struct __CFSet { } *)a0 dateFilter:(id)a1 includeObjects:(BOOL)a2 searchResultTypes:(unsigned long long)a3 matchingPredicateBlock:(id /* block */)a4;
- (unsigned long long)_inqNumberOfAssetsMatchingGroupWithId:(unsigned long long)a0;
- (id)_inqFilenameGroupsWithMatchingGroupIds:(struct __CFSet { } *)a0 dateFilter:(id)a1 searchResultTypes:(unsigned long long)a2 matchingPredicateBlock:(id /* block */)a3;
- (void)_runWithMatchingIDs:(id)a0 block:(id /* block */)a1;
- (struct __CFSet { } *)_inqNewGroupIdsForAssetIds:(struct __CFSet { } *)a0;
- (void)groupsForCollectionIds:(struct __CFArray { } *)a0 completion:(id /* block */)a1;
- (void)_inqRecycleGroups;
- (void)resetGroupsCache;
- (void).cxx_destruct;
- (void)_inqDeleteGroupsWithGraphCollectionsForPersonUUID:(id)a0;
- (unsigned long long)_inqGroupIdForCategory:(short)a0 contentString:(id)a1;
- (unsigned long long)_inqGroupIdForCategory:(short)a0 owningGroupId:(unsigned long long)a1 contentString:(id)a2 normalizedString:(id)a3 identifier:(id)a4 rankingScore:(double)a5 insertIfNeeded:(BOOL)a6 tokenOutput:(const struct tokenOutput_t { id x0; id x1; id x2; struct *x3; long long x4; long long x5; struct *x6; long long x7; long long x8; } *)a7 shouldUpdateOwningGroupId:(BOOL)a8 shouldUpdateRankingScore:(BOOL)a9;
- (void)bindMatchingValues:(struct __CFSet { } *)a0;
- (unsigned long long)_inqGroupIdForCategory:(short)a0 identifier:(id)a1 outOwningGroupId:(unsigned long long *)a2 outScore:(double *)a3;
- (void)performSyncOnDBQueue:(id /* block */)a0;
- (long long)insertCollection:(id)a0;
- (id)dumpGroupsInfoWithIndexCategories:(id)a0 includeUUIDs:(BOOL)a1;
- (void)_prepareTokenOutput:(struct tokenOutput_t { id x0; id x1; id x2; struct *x3; long long x4; long long x5; struct *x6; long long x7; long long x8; } *)a0 forIndexing:(BOOL)a1;
- (unsigned long long)_inqAssetIdWithAsset:(id)a0;

@end
