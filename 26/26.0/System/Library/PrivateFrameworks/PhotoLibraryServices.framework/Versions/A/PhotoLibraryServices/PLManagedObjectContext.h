@class PLDelayedSaveActions, NSString, PLPhotoLibraryPathManager, NSError, PLManagedObjectContextDelegate, NSMutableDictionary, PLChangeHandlingContainer, NSMutableSet, PLDelayedFiledSystemDeletions, PLBackgroundJobWorkerTypes, PLPhotoLibrary;
@protocol PLManagedObjectContextPTPNotificationDelegate;

@interface PLManagedObjectContext : NSManagedObjectContext {
    BOOL _isConnectedToChangeHandling;
    BOOL _isObservingChangesForPTPNotificationDelegate;
    PLBackgroundJobWorkerTypes *_workerTypesForBackgroundJobProcessing;
    PLManagedObjectContextDelegate *_photosDelegate;
    NSMutableSet *_avalancheUUIDsForUpdate;
    NSMutableDictionary *_uuidsForCloudDeletion;
    BOOL _syncChangeMarker;
    NSMutableDictionary *_updatedObjectsAttributes;
    NSMutableDictionary *_updatedObjectsRelationships;
    PLPhotoLibrary *_photoLibrary;
    PLPhotoLibraryPathManager *_pathManager;
    PLDelayedSaveActions *_delayedSaveActions;
    PLChangeHandlingContainer *_changeHandlingContainer;
    struct os_unfair_lock_s { unsigned int _os_unfair_lock_opaque; } _invalidationStateLock;
    NSError *_invalidationReason;
    double _lastResetTimestamp;
    BOOL _initFinished;
    NSMutableSet *_backgroundWorkItemIdentifiers;
}

@property (readonly, nonatomic) BOOL mergingChanges;
@property (readonly, nonatomic) BOOL savingDuringMerge;
@property (nonatomic) BOOL isInitializingSingletons;
@property (retain, nonatomic) PLDelayedFiledSystemDeletions *delayedDeletions;
@property (weak, nonatomic) id<PLManagedObjectContextPTPNotificationDelegate> ptpNotificationDelegate;
@property (nonatomic) BOOL isBackingALAssetsLibrary;
@property (readonly, nonatomic) PLDelayedSaveActions *delayedSaveActions;
@property (nonatomic) long long resetCloudLibraryMode;
@property (nonatomic, getter=isLocalOnlyDelete) BOOL localOnlyDelete;
@property (copy, nonatomic) NSString *pl_basename;
@property (nonatomic) BOOL pl_suppressUnhandledErrorDuringPerform;
@property (weak, nonatomic) PLPhotoLibrary *photoLibrary;
@property (readonly, nonatomic) BOOL isUserInterfaceContext;
@property (nonatomic) BOOL regenerateVideoThumbnails;
@property (nonatomic) int changeSource;
@property (nonatomic) BOOL nonCoalescing;
@property (copy, nonatomic) id /* block */ postDelayedSaveActionsReply;

+ (id)managedObjectModelURL;
+ (id)contextForUninitializedPhotoLibrary:(id)a0 automaticallyMerges:(BOOL)a1 automaticallyPinToFirstFetch:(BOOL)a2;
+ (id)sanitizedErrorFromError:(id)a0;
+ (BOOL)shouldHavePhotoLibrary;
+ (id)changeNotificationObjectKeys;
+ (BOOL)assetsLibraryLoggingEnabled;
+ (void)_pl_megamoc_contextPerformDepthPush;
+ (id)managedObjectModel;
+ (void)_pl_megamoc_contextPerformDepthPop;
+ (id)changeNotificationObjectMutationKeys;
+ (BOOL)_pl_megamoc_isInPLMocPerform;
+ (id)changeNotificationObjectIDKeys;
+ (BOOL)_shouldRetryNewPersistentStoreCoordinatorWithError:(id)a0;
+ (BOOL)_isAssetLibraryFetchingAlbum:(id)a0;
+ (id)_loadingPersistentStoreCoordinatorWithReason:(id)a0 error:(id *)a1 workBlock:(id /* block */)a2;
+ (void)getPersistentStoreURL:(id *)a0 options:(id *)a1 forDatabasePath:(id)a2;
+ (void)_setupInitialQueryGenerationForContext:(id)a0;
+ (id)changeNotificationObjectIDMutationKeys;
+ (void)removePhotosDatabaseWithPathManager:(id)a0;
+ (void)_setupNameForContext:(id)a0 withLibrary:(id)a1;
+ (id)loadingPersistentStoreWithReason:(id)a0 error:(id *)a1 workBlock:(id /* block */)a2;
+ (BOOL)canMergeRemoteChanges;
+ (id)newContextForPhotoLibrary:(id)a0 automaticallyMerges:(BOOL)a1;
+ (void)_pl_megamoc_runWithPerformWarningsSuppressed:(id /* block */)a0;
+ (id)contextForRepairingSingletonObjectsWithReason:(id)a0 libraryURL:(id)a1 error:(id *)a2;
+ (BOOL)_coreDataWorkWithRetryForReason:(id)a0 error:(id *)a1 retryBlock:(id /* block */)a2;

- (id)pl_graphCache;
- (id)storeUUID;
- (BOOL)isReadOnly;
- (void)invalidateWithReason:(id)a0;
- (void)recordNeedsBackgroundJobProcessingForWorkerTypes:(id)a0;
- (void)_resetName;
- (void)reset;
- (BOOL)obtainPermanentIDsForObjects:(id)a0 error:(id *)a1;
- (id)executeRequest:(id)a0 error:(id *)a1;
- (BOOL)_adjustmentTimestampChangedChangedAttribute:(id)a0 from:(id)a1;
- (id)_pl_executeFetchRequest:(id)a0 error:(id *)a1;
- (void)dealloc;
- (void)setupLocalChangeNotifications;
- (id)initWithConcurrencyType:(unsigned long long)a0 libraryBundle:(id)a1;
- (id)pathManager;
- (void)_pl_setupStalenessInterval;
- (BOOL)isValidForSelector:(SEL)a0 error:(id *)a1;
- (void)_mergeChangesFromDidSaveDictionary:(id)a0 usingObjectIDs:(BOOL)a1;
- (void)performBlock:(id /* block */)a0;
- (id)pl_fetchObjectsWithIDs:(id)a0 rootEntity:(id)a1;
- (void)recordNeedsBackgroundJobProcessing;
- (void)tearDownLocalChangeNotifications;
- (void)setName:(id)a0;
- (void)_addCloudUUID:(id)a0 forDeletionType:(long long)a1;
- (id)getAndClearRecordedAvalancheUUIDsForUpdate;
- (void)recordBackgroundJobWorkItemCreated:(id)a0;
- (void)_destroyDelayedSaveActions;
- (unsigned long long)countForFetchRequest:(id)a0 error:(id *)a1;
- (id)pl_fetchObjectsWithIDs:(id)a0;
- (BOOL)save:(id *)a0;
- (double)lastResetTimestamp;
- (id)pl_libraryBundle;
- (void)getAndClearUpdatedObjectsAttributes:(id *)a0 relationships:(id *)a1;
- (BOOL)shouldMergeFromRemoteContextWithChanges:(id)a0;
- (void)recordManagedObjectWillSave:(id)a0;
- (id)getAndClearRecordedObjectsForCloudDeletion;
- (BOOL)pl_performWithOptions:(unsigned long long)a0 andBlock:(id /* block */)a1;
- (void)disconnectFromChangeHandling;
- (void)updateTransactionAuthor;
- (BOOL)hasPreviouslyMergedDeleteForObject:(id)a0;
- (BOOL)getAndClearSyncChangeMarker;
- (void)_logDatabaseDirectoryDiagnosticInfo;
- (void)resetAllFetchingAlbums;
- (void)_createDelayedSaveActionsWithTransaction:(id)a0;
- (id)executeFetchRequest:(id)a0 error:(id *)a1;
- (BOOL)_tooManyAssetChangesToHandle:(unsigned long long)a0;
- (BOOL)hasRecordedBackgroundWorkItemWithIdentifier:(id)a0 jobType:(short)a1 jobFlags:(long long)a2;
- (void)connectToChangeHandling;
- (void)setupDelegateWithBundle:(id)a0;
- (void)_getInsertedIDs:(id)a0 deletedIDs:(id)a1 changedIDs:(id)a2 adjustedIDs:(id)a3 ofEntityKind:(id)a4 fromRemoteContextDidSaveObjectIDsNotification:(id)a5;
- (void)appendDelayedDeletionsToXPCMessage:(id)a0;
- (void)recordCloudDeletionForObject:(id)a0;
- (void)registerFilesystemDeletionInfo:(id)a0;
- (void)_recordChangedKeys:(id)a0 forObjectID:(id)a1;
- (void)_directPerformBlock:(id /* block */)a0;
- (void)pl_wrapperForPerformBlock:(id /* block */)a0;
- (void)recordChangesFromTriggerModifiedObjectIDs:(id)a0;
- (void)_setNameFromCurrentQoS;
- (void)_directPerformBlockAndWait:(id /* block */)a0;
- (id)existingObjectWithID:(id)a0 error:(id *)a1;
- (void)performBlockAndWait:(id /* block */)a0;
- (id)initWithConcurrencyType:(unsigned long long)a0 libraryBundle:(id)a1 changeHandlingContainer:(id)a2 coordinator:(id)a3;
- (void)refreshAllObjects;
- (BOOL)isDatabaseCreationContext;
- (void)_notifyALAssetsLibraryWithChanges:(id)a0 usingObjectIDs:(BOOL)a1;
- (void).cxx_destruct;
- (void)recordSyncChangeMarker;
- (void)_informPTPDelegateAboutChangesFromRemoteContextSaveNotification:(id)a0;
- (void)recordAvalancheUUIDForUpdate:(id)a0;

@end
