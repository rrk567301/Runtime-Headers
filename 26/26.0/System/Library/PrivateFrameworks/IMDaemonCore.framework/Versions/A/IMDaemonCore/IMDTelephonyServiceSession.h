@class IMDRelayAttachmentController, NSString, NSArray, IMDService, NSMutableDictionary, IMDRelayServiceController, IMDFilteringController, NSMutableSet, IMDPlainTextTapbackInterpreter, IMMultiQueue, IMDRelayEnrollmentController;

@interface IMDTelephonyServiceSession : IMDServiceSession <IMDRelayPushHandlerListener>

@property (readonly, nonatomic) IMDService *service;
@property (readonly, nonatomic) NSArray *accounts;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;
@property (retain, nonatomic) NSMutableDictionary *outgoingRelayMessageTimerMap;
@property (retain, nonatomic) NSMutableSet *originatedMessages;
@property (nonatomic) BOOL pendingOriginatedMessagesTimer;
@property (retain, nonatomic) IMMultiQueue *incomingMessageMultiQueue;
@property (nonatomic) BOOL isRegisteredForCTPhoneNumberNotifications;
@property (retain, nonatomic) IMDRelayAttachmentController *attachmentController;
@property (retain, nonatomic) IMDRelayServiceController *relayController;
@property (retain, nonatomic) IMDRelayEnrollmentController *relayEnrollmentController;
@property (readonly, nonatomic) IMDPlainTextTapbackInterpreter *tapbackInterpreter;
@property (readonly, nonatomic) IMDFilteringController *filteringController;

+ (id)backwardCompatibilityPrefixForLanguageCode:(id)a0;
+ (id)createCompatibleBodyForMessage:(id)a0 processedMessageItem:(id)a1;
+ (void)createFallbackTextForMessage:(id)a0 processedMessageItem:(id)a1 leadingFallbackText:(id)a2 trailingFallbackText:(id)a3;
+ (id)getPlainTextForMessage:(id)a0 processedMessageItem:(id)a1;

- (void)logoutServiceSessionWithAccount:(id)a0;
- (id)chatForOutgoingMessage:(id)a0 fromIdentifier:(id)a1 isInProxyMode:(BOOL)a2 createIfNotExists:(BOOL)a3;
- (id)chatRegistry;
- (void)loginServiceSessionWithAccount:(id)a0;
- (void)handler:(id)a0 outgoingPlainTextMessage:(id)a1 toIdentifier:(id)a2 fromIdentifier:(id)a3 fromToken:(id)a4 messageGUID:(id)a5 timeStamp:(id)a6 isBeingReplayed:(BOOL)a7 storageContext:(id)a8;
- (void).cxx_destruct;
- (void)sendBrandLogoUpdate:(id)a0 toChatID:(id)a1 identifier:(id)a2 style:(unsigned char)a3 account:(id)a4;
- (void)sendEditedMessage:(id)a0 previousMessage:(id)a1 partIndex:(long long)a2 editType:(unsigned long long)a3 toChatIdentifier:(id)a4 style:(unsigned char)a5 account:(id)a6 backwardCompatabilityText:(id)a7;
- (void)sendGroupPhotoUpdate:(id)a0 toChatID:(id)a1 identifier:(id)a2 style:(unsigned char)a3 account:(id)a4;
- (void)sendRepositionStickerMessage:(id)a0 chatIdentifier:(id)a1 accountID:(id)a2 style:(unsigned char)a3;
- (void)enrollDeviceInSMSRelay:(id)a0;
- (void)enrollSelfDeviceInSMSRelay;
- (void)unEnrollDeviceInSMSRelay:(id)a0;
- (id)_resolveHandlesFor:(id)a0 withMessage:(id)a1;
- (void)sendRecoverCommand:(id)a0 forChatGUID:(id)a1;
- (BOOL)_canLocallySendWithPhoneNumber:(id)a0;
- (BOOL)_replicationDisabledByServerBag;
- (id)findChatAndLinkMessage:(id)a0 context:(id)a1;
- (void)_addOriginatedMessage:(id)a0;
- (BOOL)_allowedToGeneratePreviewForTransfer:(id)a0 smsMessage:(id)a1;
- (BOOL)_allowedToProcessMessageFromToken:(id)a0 fromID:(id)a1 reflectOnly:(BOOL)a2 isInProxyMode:(BOOL)a3;
- (id)_businessNameForIndiaShortCodeSender:(id)a0;
- (id)_callerIDForChatWithChatIdentifier:(id)a0 chatStyle:(unsigned char)a1 foundChat:(id)a2;
- (id)_callerIDUsingFromIdentifier:(id)a0;
- (BOOL)_canSendWithCallerID:(id)a0;
- (void)_carrierReportJunkMetricsForSMSWithSubject:(id)a0 isGroupchat:(BOOL)a1 hasAttachments:(BOOL)a2;
- (id)_chatForGroupID:(id)a0 originalGroupID:(id)a1;
- (id)_chatForSendingMessageItem:(id)a0 chatIdentifier:(id)a1 chatStyle:(unsigned char)a2;
- (void)_clearInactivityTimer;
- (void)_clearTimoutTimerForRelayMessageID:(id)a0;
- (id)_countryCodeForIncomingTextMessage:(id)a0;
- (void)_deferredReplicatedMessageReleaseWithAllowedMessage:(id)a0 outgoingProxyBlock:(id /* block */)a1;
- (BOOL)_disableScreenTimeRestrictionsForMessageItem:(id)a0 chat:(id)a1 watchSendsOverCellular:(BOOL)a2 emergencyNumbersFoundInRecipients:(long long *)a3;
- (void)_enqueueBlock:(id /* block */)a0 withTimeout:(double)a1;
- (id)_extractSMSSenderAddress:(id)a0;
- (void)_findUnsubscribeTextForChat:(id)a0 inMessageBody:(id)a1;
- (void)_finishSendingMessageItem:(id)a0 chatIdentifier:(id)a1 chatStyle:(unsigned char)a2 foundChat:(id)a3 didSendSMS:(BOOL)a4 attemptingReplication:(BOOL)a5 shouldForceFail:(BOOL)a6 watchSendsOverCellular:(BOOL)a7 forceReflection:(BOOL)a8 forceRelay:(BOOL)a9 callerID:(id)a10;
- (void)_generatePreviewForTransfer:(id)a0 message:(id)a1;
- (long long)_iMessageCapabilityForSIMID:(id)a0;
- (id)_identifierForMergedBusinessThread:(id)a0;
- (void)_markMessageAsSent:(id)a0;
- (void)_markMessageAsSent:(id)a0 wasInterworked:(BOOL)a1;
- (id)_messageDictionaryToRelayWithIncomingMessageDictionary:(id)a0 smsMessage:(id)a1;
- (void)_messageTimedOut:(id)a0;
- (BOOL)_newFeatureRequiredByMessageItem:(id)a0 chatIdentifier:(id)a1;
- (double)_periodicReplicationTimeInterval;
- (void)_processReceivedDictionary:(id)a0 storageContext:(id)a1 receivedViaRelay:(BOOL)a2 withCompletionBlock:(id /* block */)a3;
- (void)_processReceivedDictionaryInBlastDoor:(id)a0 storageContext:(id)a1 receivedViaRelay:(BOOL)a2 withCompletionBlock:(id /* block */)a3;
- (void)_processReceivedSMSMessage:(id)a0 storageContext:(id)a1 receivedViaRelay:(BOOL)a2 serviceName:(id)a3 completionBlock:(id /* block */)a4;
- (void)_registerChatForIncomingMessageWithContext:(id)a0;
- (void)_registerForCTNotifications;
- (void)_registerForIncomingMessages:(id)a0;
- (void)_relayMessage:(id)a0 chat:(id)a1 didSendSMS:(BOOL)a2 attemptingReplication:(BOOL)a3 forceReflection:(BOOL)a4 relayToWatchOnly:(BOOL)a5 shouldDisableScreenTimeRestrictions:(BOOL)a6 callerID:(id)a7;
- (void)_releasePendingMessagesAndProcessReceivedSMSMessage:(id)a0 storageContext:(id)a1 receivedViaRelay:(BOOL)a2 serviceName:(id)a3 completionBlock:(id /* block */)a4;
- (void)_removeOriginatedMessage:(id)a0;
- (id)_replicatedMessageGUIDToReleaseFromMessageDictionary:(id)a0;
- (BOOL)_replicationRequiredForFeaturesUsedByMessageBody:(id)a0;
- (void)_resetAndBroadcastBlackholeErrorStateIfNeededForChatIdentifier:(id)a0 chatStyle:(unsigned char)a1;
- (BOOL)_sendMessageOverAlternatePath:(id)a0 toChat:(id)a1;
- (unsigned long long)_sendingDecisionForMessageItem:(id)a0 callerID:(id)a1 chat:(id)a2;
- (void)_setClearMessageSendTimer;
- (void)_setMessageItemToStandaloneIfNeeded:(id)a0 chatIdentifier:(id)a1;
- (void)_setTimeoutTimerForRelayMessageID:(id)a0 timeout:(double)a1;
- (void)_setupCoreTelephonyObservation;
- (BOOL)_shouldFailSMSMessageForTesting:(id)a0 chatIdentifier:(id)a1 chatStyle:(unsigned char)a2;
- (BOOL)_shouldForceReplicationForStaleChatWithLastKnownReplicationDate:(id)a0;
- (BOOL)_shouldReplicateMessageItem:(id)a0 chatStyle:(unsigned char)a1 lastKnownReplicationDate:(id)a2 callerID:(id)a3;
- (BOOL)_sosReplicationDisabledByServerBag;
- (void)_teardownCoreTelephonyObservation;
- (void)_updateCategoryForChat:(id)a0 andMessage:(id)a1 category:(long long)a2 subCategory:(long long)a3 spamExtensionName:(id)a4;
- (void)_updateLastAddressedIDsIfNeededForChatWithIdentifier:(id)a0 style:(unsigned char)a1 lastAddressedHandle:(id)a2 lastAddressedSIMID:(id)a3;
- (void)_updateLastAddressedIDsIfNeededForChatWithIdentifier:(id)a0 style:(unsigned char)a1 lastAddressedHandle:(id)a2 lastAddressedSIMID:(id)a3 iMessageCapability:(long long)a4;
- (void)_updatePhoneNumberCallerID;
- (void)_updateShouldForceToSMSForChatWithIdentifier:(id)a0 style:(unsigned char)a1 shouldForceToSMS:(BOOL)a2;
- (id)_updatedMessageContextForJunkProcessing:(id)a0;
- (BOOL)acceptsIncomingReplicatedMessagesFromAccount:(id)a0 toIdentifier:(id)a1 isSOS:(BOOL)a2;
- (BOOL)allowedToSendMessage:(id)a0 toChat:(id)a1;
- (id)chatForIncomingMessageContext:(id)a0 createIfNotExists:(BOOL)a1;
- (id)compatibleMessageToSendForMessageItem:(id)a0;
- (id)createHandleInfoFor:(id)a0;
- (id)createHandleInfoForParticipants:(id)a0 unformattedIDs:(id)a1 countryCodes:(id)a2 isGroupChat:(BOOL)a3;
- (void)didReceiveDisplayNameChange:(id)a0 guid:(id)a1 fromID:(id)a2 toIdentifier:(id)a3 forChat:(id)a4 style:(unsigned char)a5 account:(id)a6;
- (void)didReceiveDisplayNameChange:(id)a0 guid:(id)a1 fromID:(id)a2 toIdentifier:(id)a3 forChat:(id)a4 style:(unsigned char)a5 account:(id)a6 shouldRelay:(BOOL)a7;
- (void)didReceiveMessages:(id)a0 forChat:(id)a1 style:(unsigned char)a2 account:(id)a3 fromIDSID:(id)a4 completion:(id /* block */)a5;
- (void)didSendMessage:(id)a0 forChat:(id)a1 style:(unsigned char)a2 account:(id)a3 forceDate:(id)a4 itemIsComingFromStorage:(BOOL)a5;
- (id)getLabelFor:(long long)a0 subCategory:(long long)a1;
- (void)handler:(id)a0 incomingDownloadMessage:(id)a1 toIdentifier:(id)a2 fromIdentifier:(id)a3 fromToken:(id)a4 timeStamp:(id)a5 storageContext:(id)a6;
- (void)handler:(id)a0 incomingGroupMutationMessage:(id)a1 timeStamp:(id)a2 storageContext:(id)a3 fromToken:(id)a4 fromID:(id)a5 isInProxyMode:(BOOL)a6;
- (void)handler:(id)a0 incomingPlainTextMessage:(id)a1 toIdentifier:(id)a2 fromIdentifier:(id)a3 fromToken:(id)a4 timeStamp:(id)a5 storageContext:(id)a6;
- (void)handler:(id)a0 localFileRequest:(id)a1 storageContext:(id)a2;
- (void)handler:(id)a0 localFileResponse:(id)a1 storageContext:(id)a2;
- (void)handler:(id)a0 localIncomingDownloadMessage:(id)a1 storageContext:(id)a2;
- (void)handler:(id)a0 localIncommingMessage:(id)a1 storageContext:(id)a2;
- (void)handler:(id)a0 localMessageError:(id)a1 storageContext:(id)a2;
- (void)handler:(id)a0 localMessageRead:(id)a1 readByMe:(BOOL)a2 timeStamp:(id)a3 storageContext:(id)a4;
- (void)handler:(id)a0 localMessageSent:(id)a1 wasInterworked:(BOOL)a2 storageContext:(id)a3;
- (void)handler:(id)a0 localOutgoingDownloadMessage:(id)a1 isBeingReplayed:(BOOL)a2 storageContext:(id)a3;
- (void)handler:(id)a0 localOutgoingMessage:(id)a1 isBeingReplayed:(BOOL)a2 storageContext:(id)a3;
- (void)handler:(id)a0 messageGUIDToReport:(id)a1;
- (void)handler:(id)a0 messageIDRead:(id)a1 readByMe:(BOOL)a2 timeStamp:(id)a3 toIdentifier:(id)a4 fromIdentifier:(id)a5 fromToken:(id)a6 reflectOnly:(BOOL)a7 storageContext:(id)a8;
- (void)handler:(id)a0 messageIDSendFailure:(id)a1 toIdentifier:(id)a2 fromIdentifier:(id)a3 timeStamp:(id)a4 storageContext:(id)a5;
- (void)handler:(id)a0 messageIDSent:(id)a1 wasInterworked:(BOOL)a2 toIdentifier:(id)a3 fromIdentifier:(id)a4 timeStamp:(id)a5 storageContext:(id)a6;
- (void)handler:(id)a0 outgoingDownloadMessage:(id)a1 toIdentifier:(id)a2 fromIdentifier:(id)a3 fromToken:(id)a4 messageGUID:(id)a5 timeStamp:(id)a6 isBeingReplayed:(BOOL)a7 isInProxyMode:(BOOL)a8 storageContext:(id)a9;
- (void)handler:(id)a0 outgoingPlainTextMessage:(id)a1 toIdentifier:(id)a2 fromIdentifier:(id)a3 fromToken:(id)a4 messageGUID:(id)a5 timeStamp:(id)a6 isBeingReplayed:(BOOL)a7 isInProxyMode:(BOOL)a8 storageContext:(id)a9;
- (void)handler:(id)a0 receivedPriorityMessageCommand:(id)a1 fromIdentifier:(id)a2 toIdentifier:(id)a3 fromToken:(id)a4;
- (BOOL)incomingMessageHasTooManyRecipients:(id)a0;
- (id)initWithAccount:(id)a0 service:(id)a1 replicatingForSession:(id)a2;
- (BOOL)isGroupMessagingEnabledFor:(id)a0;
- (BOOL)isOutgoingReplicationEnabled;
- (void)joinChat:(id)a0 handleInfo:(id)a1 style:(unsigned char)a2 groupID:(id)a3 joinProperties:(id)a4;
- (void)joinChat:(id)a0 handleInfo:(id)a1 style:(unsigned char)a2 groupID:(id)a3 lastAddressedHandle:(id)a4 lastAddressedSIMID:(id)a5 joinProperties:(id)a6;
- (void)joinChat:(id)a0 handleInfo:(id)a1 style:(unsigned char)a2 joinProperties:(id)a3;
- (id)makeSenderFor:(id)a0 forChat:(id)a1 chatStyle:(unsigned char)a2 recipients:(id)a3;
- (unsigned long long)maxRecipientsForPhoneNumber:(id)a0 simID:(id)a1;
- (long long)maxSizePerAttachmentWithCount:(int)a0 lastAddressHandle:(id)a1 lastAddressedSIMID:(id)a2;
- (id)outgoingReplicationCallerIDForChat:(id)a0;
- (id)preferredAccountForReplicationOnService:(id)a0 eligibleAccounts:(id)a1;
- (void)processMessageForSending:(id)a0 toChat:(id)a1 style:(unsigned char)a2 allowWatchdog:(BOOL)a3 completionBlock:(id /* block */)a4;
- (void)processMessageSendFailure:(id)a0;
- (void)refetchChatBackgroundIfNeededForChatIdentifier:(id)a0 chatStyle:(unsigned char)a1;
- (BOOL)reflectPriorityMessageToPeerDevicesForMessageGUIDs:(id)a0;
- (void)relayDisplayNameChange:(id)a0 forChat:(id)a1 fromID:(id)a2 messageID:(id)a3 didOccurLocally:(BOOL)a4;
- (BOOL)replicateMessage:(id)a0 chatIdentifier:(id)a1 chatStyle:(unsigned char)a2 lastKnownReplicationDate:(id)a3 callerID:(id)a4;
- (id)replicationPhoneNumbers;
- (BOOL)replicationRequiredForFeaturesUsedByMessageItem:(id)a0;
- (BOOL)replicationRequiredForMessageBodyAttributeName:(id)a0;
- (BOOL)replicationRequiredForMultipleMessageParts;
- (BOOL)replicationRequirementsSatisfiedForPhoneNumber:(id)a0 simID:(id)a1;
- (void)requestTranscriptBackground:(id)a0 toIdentifier:(id)a1 fromIdentifier:(id)a2 messageIsFromStorage:(BOOL)a3;
- (void)requestTranscriptBackgroundIfNecessary:(id)a0 incomingVersion:(unsigned long long)a1 toIdentifier:(id)a2 fromIdentifier:(id)a3 messageIsFromStorage:(BOOL)a4;
- (BOOL)responsibleForMessageID:(id)a0;
- (void)retryGroupPhotoUpload:(id)a0 toChatID:(id)a1 identifier:(id)a2 style:(unsigned char)a3 account:(id)a4 isPhotoRefresh:(BOOL)a5;
- (void)retryTranscriptBackgroundUpload:(id)a0 chatIdentifier:(id)a1 style:(unsigned char)a2 transferID:(id)a3;
- (void)sendDeleteCommand:(id)a0 forChatGUID:(id)a1;
- (void)sendMessage:(id)a0 toChat:(id)a1 style:(unsigned char)a2 account:(id)a3;
- (void)sendMessageFromIMMessageItem:(id)a0 forChat:(id)a1 chat:(id)a2 style:(unsigned char)a3;
- (void)sendReportJunkMessageGUID:(id)a0 shouldRelay:(BOOL)a1;
- (void)sendUnapproveToToken:(id)a0 messageGUID:(id)a1 completion:(id /* block */)a2;
- (void)setServiceCompatibleContentOn:(id)a0 forChat:(id)a1 style:(unsigned char)a2 from:(id)a3 completionBlock:(id /* block */)a4;
- (void)setTranscriptBackground:(id)a0 andSendToChatIdentifier:(id)a1 chatStyle:(unsigned char)a2 transferID:(id)a3 isRefresh:(BOOL)a4;
- (void)setTranscriptBackground:(id)a0 andSendToChatIdentifier:(id)a1 chatStyle:(unsigned char)a2 transferID:(id)a3 isRefresh:(BOOL)a4;
- (BOOL)shouldExcludeChatFromRelay:(id)a0;
- (void)updateDisplayName:(id)a0 fromDisplayName:(id)a1 fromID:(id)a2 forChatID:(id)a3 identifier:(id)a4 style:(unsigned char)a5 messageID:(id)a6;
- (void)waitForChatRelayReadiness:(id)a0 withBlock:(id /* block */)a1;

@end
