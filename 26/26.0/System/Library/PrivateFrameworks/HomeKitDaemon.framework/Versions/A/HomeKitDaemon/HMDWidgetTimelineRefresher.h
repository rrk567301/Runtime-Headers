@class NSUUID, NSString, _TtCE13HomeKitDaemonCSo26HMDWidgetTimelineRefresherP33_E4AFB2A25343A8F5063AD1A14CCEA93715SwiftExtensions, HMDHomeManager, HMDWidgetConfigurationReader, NSSet, HMDWidgetTimelineController, NSMutableDictionary, NSMutableSet, NSObject, NSMapTable, NSNotificationCenter;
@protocol HMFTimerManagerTimerContext, OS_dispatch_queue, HMDWidgetAccessoryReachabilityMonitor, HMDarwinNotificationProvider, HMMLogEventSubmitting, HMFTimerManager;

@interface HMDWidgetTimelineRefresher : HMFObject <HMFTimerManagerDelegate, HMFMessageReceiver, HMFLogging, MTRDeviceDelegate, HMDActionSetStateSubscriptionManagerObserver> {
    int _homeSensingChangedNotificationToken;
    int _selectedHomeChangedNotificationToken;
}

@property (nonatomic, readonly) _TtCE13HomeKitDaemonCSo26HMDWidgetTimelineRefresherP33_E4AFB2A25343A8F5063AD1A14CCEA93715SwiftExtensions *_swiftExtensions;
@property (nonatomic, readonly) id<HMDWidgetAccessoryReachabilityMonitor> reachabilityMonitor;
@property (weak) HMDHomeManager *homeManager;
@property (readonly, copy) NSString *clientIdentifier;
@property (readonly) id<HMDarwinNotificationProvider> darwinNotificationProvider;
@property (readonly) HMDWidgetConfigurationReader *widgetConfigurationReader;
@property (readonly) HMDWidgetTimelineController *timelineController;
@property (readonly) id<HMMLogEventSubmitting> logEventSubmitter;
@property (readonly, nonatomic) id<HMFTimerManager> timerManager;
@property (copy) NSUUID *currentHomeUUID;
@property (copy) NSSet *widgetKindsToUpdate;
@property (readonly, copy, nonatomic) NSString *clientIdentifierForExplicitlyMonitoredCharacteristics;
@property (readonly, nonatomic) NSMutableDictionary *monitoredCharacteristicsMapByWidget;
@property (readonly, nonatomic) NSMutableDictionary *monitoredMTRAttributesByWidget;
@property (readonly, nonatomic) NSMutableDictionary *monitoredActionSetsMapByWidget;
@property (readonly, nonatomic) NSMapTable *cachedValueByCharacteristic;
@property (readonly, nonatomic) NSMapTable *cachedIsOnStateByActionSet;
@property (readonly, nonatomic) NSMapTable *deviceControllersByID;
@property (readonly, nonatomic) NSMapTable *devicesByController;
@property (readonly, nonatomic) NSMapTable *pendingRequestValueByUUID;
@property (readonly, nonatomic) NSMutableDictionary *cachedActionSetExecuteErrorByUUID;
@property (readonly, nonatomic) NSMutableDictionary *cachedActionSetExecuteErrorTimerContextByUUID;
@property (retain, nonatomic) id<HMFTimerManagerTimerContext> actionSetPrimaryStateUpdateCoalesceTimerContext;
@property (readonly) NSMutableSet *actionSetsPendingPrimaryResidentStateUpdates;
@property (retain, nonatomic) id<HMFTimerManagerTimerContext> widgetRefreshCoalesceTimerContext;
@property (copy, nonatomic) NSString *widgetRefreshCoalesceReason;
@property (retain, nonatomic) NSSet *widgetRefreshCoalesceKinds;
@property (readonly) long long reachabilityUpdateDispatchDelayNs;
@property (readonly) long long forceUpdateTimelineDispatchDelayNs;
@property (readonly) NSMutableDictionary *characteristicsToPreviouslySeenValues;
@property (retain) id swiftExtensions;
@property (readonly) NSNotificationCenter *notificationCenter;
@property (readonly) NSObject<OS_dispatch_queue> *workQueue;
@property (readonly) NSMutableDictionary *characteristicsToPreviouslySeenValues;
@property (retain) id swiftExtensions;
@property (readonly) NSNotificationCenter *notificationCenter;
@property (readonly) NSObject<OS_dispatch_queue> *workQueue;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;
@property (readonly, nonatomic) NSUUID *messageTargetUUID;
@property (readonly, retain, nonatomic) NSObject<OS_dispatch_queue> *messageReceiveQueue;

+ (id)logCategory;

- (void)configure;
- (void)initSwiftExtensions;
- (void)_startActionSetPrimaryStateUpdateCoalesceTimerContextForActionSetUUID:(id)a0 expectedState:(id)a1;
- (id)reachabilityByAccessorySPIClientIdentifierForCharacteristics:(id)a0;
- (id)actionSetsByHome:(id)a0;
- (void)updateReachabilityMonitorWithPreviousAccessories:(id)a0 currentAccessories:(id)a1 completion:(id /* block */)a2;
- (id)_firstErrorFromCharacteristicWriteResponsePayload:(id)a0;
- (void)handleRestrictedGuestScheduleStartedNotification:(id)a0;
- (void)handleMonitorCharacteristicsForWidget:(id)a0;
- (void)monitorDeviceNodeID:(id)a0 controller:(id)a1 attributes:(id)a2;
- (void)processCharacteristicsChangedNotification:(id)a0;
- (void)dealloc;
- (void)handleFetchState:(id)a0;
- (void)registerForDarwinNotifications;
- (void)registerForMessagesWithMessageDispatcher:(id)a0;
- (void)handleRestrictedGuestScheduleEndedNotification:(id)a0;
- (void)handleResidentDeviceChangedNotification:(id)a0;
- (void)handleAccessoryAddedNotification:(id)a0;
- (id)thresholdForCharacteristic:(id)a0;
- (void)handleRestrictedGuestScheduleEventForUser:(id)a0;
- (id)_getPendingWriteValueForUUID:(id)a0;
- (BOOL)evaluateActionSetStateOnPrimaryEnabledForHome:(id)a0;
- (void)handleCurrentHomeChangeNotification:(id)a0;
- (id)initWithHomeManager:(id)a0 queue:(id)a1 notificationCenter:(id)a2 darwinNotificationProvider:(id)a3 widgetConfigurationReader:(id)a4 timelineController:(id)a5 logEventSubmitter:(id)a6 timerManager:(id)a7 reachabilityUpdateDispatchDelayNs:(long long)a8 forceUpdateTimelineDispatchDelayNs:(long long)a9;
- (void)handleSelectedHomeChangedNotification;
- (void)_setPendingRequestValue:(id)a0 forUUID:(id)a1 messageIdentifier:(id)a2;
- (void)handleCurrentOrPrimaryHomeChangedNotification:(id)a0;
- (void)handleTimerFiredForActionSet:(id)a0;
- (BOOL)_value:(id)a0 isApproximatelyEqualToValue:(id)a1 forMinimumValue:(id)a2 maximumValue:(id)a3;
- (void)handleAccessoryReachabilityChanged:(id)a0;
- (void)timerManager:(id)a0 didFireForTimerContext:(id)a1;
- (id)valueByCharacteristicSPIClientIdentifierForCharacteristics:(id)a0;
- (void)handleResidentDeviceAddedOrRemovedNotification:(id)a0;
- (void)didUpdateStateActionSetUUID:(id)a0 state:(BOOL)a1;
- (void)_removePendingRequestValueForUUID:(id)a0 messageIdentifier:(id)a1;
- (void)device:(id)a0 stateChanged:(unsigned long long)a1;
- (BOOL)_getRequestsFromMessage:(id)a0 outCharacteristicWriteValueByUUUIDs:(id *)a1 outExecuteActionSetUUUIDs:(id *)a2 outExecuteTurnOffActionSetUUIDs:(id *)a3;
- (void)handleMonitorMTRAttributes:(id)a0;
- (id)accessoriesMonitoredForReachability;
- (void)_clearExpiredActionSetPrimaryStateUpdates;
- (void)handleFetchStateForActionSets:(id)a0;
- (void)device:(id)a0 receivedEventReport:(id)a1;
- (void)handleHomeSensingChangedNotification;
- (void)writeCharacteristicsWithWriteValueBySPIClientIdentifier:(id)a0 widgetKind:(id)a1 message:(id)a2 completionGroup:(id)a3 completion:(id /* block */)a4;
- (id)initWithHomeManager:(id)a0;
- (void)handleHomeRemovedNotification:(id)a0;
- (BOOL)actionSetIsOn:(id)a0;
- (void)handleAccessoryCharacteristicsChangedNotification:(id)a0;
- (void)accessoryReachabilityDidChange:(id)a0;
- (void)configureSwiftExtensions;
- (void)handleMonitorActionSetsForWidget:(id)a0;
- (void)handleHomeAddedNotification:(id)a0;
- (void)updateMonitoredMTRAttributes:(id)a0 forWidget:(id)a1;
- (void)handleNotifiedXPCClientsOfHomeConfigurationChangeNotification:(id)a0;
- (id)modifiedCharacteristicsFromNotification:(id)a0;
- (void)updateMonitoredScenesAccessoriesAndCharacteristicsWithQOS:(long long)a0 afterChangesFromBlock:(id /* block */)a1;
- (void)device:(id)a0 receivedAttributeReport:(id)a1;
- (void)updateMonitoredCharacteristicsAndRefreshWidgetTimelines;
- (void)handleAccessoryRemovedNotification:(id)a0;
- (void).cxx_destruct;
- (void)handlePerformRequests:(id)a0;
- (void)_refreshWidgetsIfActionSetsHaveChanged:(id)a0;

@end
