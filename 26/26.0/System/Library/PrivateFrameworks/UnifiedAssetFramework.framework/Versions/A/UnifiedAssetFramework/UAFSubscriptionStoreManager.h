@class NSString, RBSAssertion;

@interface UAFSubscriptionStoreManager : NSObject {
    struct sqlite3 { } *_store;
    struct sqlite3_stmt { } *_writeSubscription;
    struct sqlite3_stmt { } *_readSubscriptionsForSubscriber;
    struct sqlite3_stmt { } *_readSubscription;
    struct sqlite3_stmt { } *_readAllSubscriptions;
    struct sqlite3_stmt { } *_readAllSubscriptionsAndSubscribers;
    struct sqlite3_stmt { } *_readSubscriptionsForUser;
    struct sqlite3_stmt { } *_readAllSubscribers;
    struct sqlite3_stmt { } *_readAllUsers;
    struct sqlite3_stmt { } *_removeSubscription;
    struct sqlite3_stmt { } *_removeAllSubscriptions;
    struct sqlite3_stmt { } *_fetchExpiredSubscriptions;
    struct sqlite3_stmt { } *_setSystemAssetSetUsages;
    struct sqlite3_stmt { } *_fetchSystemAssetSetUsages;
    struct sqlite3_stmt { } *_fetchAllSystemAssetSetUsages;
    struct sqlite3_stmt { } *_clearSystemAssetSetUsages;
    struct sqlite3_stmt { } *_removeAllSystemAssetSetUsages;
    struct sqlite3_stmt { } *_setDbVersion;
    struct sqlite3_stmt { } *_deleteDbVersion;
    struct sqlite3_stmt { } *_readDbVersion;
    struct sqlite3_stmt { } *_readConfigurationKey;
    struct sqlite3_stmt { } *_writeConfigurationKey;
    struct sqlite3_stmt { } *_fetchAllConfiguration;
    struct sqlite3_stmt { } *_readUser;
    struct sqlite3_stmt { } *_writeUserLastSeen;
    struct sqlite3_stmt { } *_readUsersOlderThan;
    struct sqlite3_stmt { } *_removeUser;
    struct sqlite3_stmt { } *_removeAllUsers;
    NSString *_oldDatabaseName;
    BOOL _dbUpToDate;
    BOOL _readOnly;
    BOOL _allowCreate;
    RBSAssertion *_rbassertion;
}

@property (readonly) unsigned long long updateCount;
@property (readonly) NSString *databaseName;

+ (id)defaultManager;
+ (id)_getManagerReadOnly:(BOOL)a0;
+ (id)flattenSubscriptions:(id)a0;
+ (id)getSerialQueue;
+ (void)sendNotificationDBReset;
+ (id)writeManager;

- (void)_releaseAssertion;
- (void)dealloc;
- (id)removeUser:(id)a0;
- (int)executeSQL:(const char *)a0;
- (void).cxx_destruct;
- (void *)_store;
- (void)_closeDatabase;
- (int)_prepareStatements;
- (BOOL)_openDatabase:(id)a0;
- (int)_removeUser:(id)a0;
- (id)removeAllUsers;
- (int)_setUserLastSeenTime:(id)a0 node:(id)a1 time:(id)a2;
- (id)readString:(struct sqlite3_stmt { } *)a0 col:(int)a1;
- (void)_acquireAssertion;
- (int)_beginDatabaseTransaction;
- (BOOL)_checkDbVersion:(BOOL *)a0 storedVersion:(int *)a1;
- (id)_dataFromSystemAssetSetUsages:(id)a0;
- (id)_dataFromUAFAssetSubscription:(id)a0;
- (int)_dropTable:(id)a0;
- (int)_endDatabaseTransaction;
- (void)_finalizeStatements;
- (id)_getAllSubscriptions:(int *)a0;
- (int)_getSubscribers:(id)a0 subscribers:(id *)a1;
- (id)_getSubscription:(struct sqlite3_stmt { } *)a0;
- (id)_getSubscription:(id)a0 subscription:(id)a1 user:(id)a2;
- (id)_getSubscriptions:(struct sqlite3_stmt { } *)a0 subscriptionsFor:(id)a1;
- (id)_getSubscriptions:(id)a0 user:(id)a1;
- (int)_getUser:(id)a0 lastSeen:(id *)a1 nodeName:(id *)a2;
- (BOOL)_isUsageLimitExceeded:(id)a0;
- (BOOL)_moveDatabase;
- (id)_openDatabaseFile:(id)a0 existed:(BOOL *)a1;
- (int)_performDbUpgrade:(int)a0;
- (BOOL)_removeAllSubscriptions;
- (BOOL)_removeAllSystemAssetSetUsages;
- (int)_rollbackDatabaseTransaction;
- (int)_setDbVersion:(int)a0;
- (int)_setSystemAssetSetUsages:(id)a0;
- (int)_setSystemAssetSetUsages:(id)a0 usages:(id)a1;
- (BOOL)_subscribeSubscription:(id)a0 subscriptionName:(id)a1 assetSetSubscription:(id)a2 expires:(id)a3 user:(id)a4;
- (id)_subscriptionTime:(id)a0;
- (id)_systemAssetSetUsagesFromData:(id)a0;
- (id)_uafAssetSetSubscriptionFromData:(id)a0;
- (BOOL)_unsubscribeSubscription:(id)a0 subscription:(id)a1 user:(id)a2;
- (int)_updateSystemAssetSetUsages:(id *)a0 assetSetUsages:(id *)a1 configurationManager:(id)a2;
- (int)bindData:(struct sqlite3_stmt { } *)a0 col:(int)a1 data:(id)a2;
- (int)bindDate:(struct sqlite3_stmt { } *)a0 col:(int)a1 date:(id)a2;
- (int)bindString:(struct sqlite3_stmt { } *)a0 col:(int)a1 string:(id)a2;
- (BOOL)clearSystemAssetSetUsages:(id)a0;
- (int)doDatabaseOperation:(id /* block */)a0 useTransaction:(BOOL)a1 logDescription:(id)a2 error:(id *)a3;
- (void)expireSubscriptions;
- (id)getAllSubscriptions:(id *)a0;
- (id)getAllSystemAssetSetUsages:(id *)a0;
- (id)getAllSystemConfiguration:(id *)a0;
- (id)getSubscribers:(id)a0 error:(id *)a1;
- (id)getSubscription:(id)a0 subscriber:(id)a1 user:(id)a2 error:(id *)a3;
- (id)getSubscriptions:(id)a0 user:(id)a1 error:(id *)a2;
- (id)getSystemAssetSetUsages:(id)a0;
- (id)getSystemConfigurationForKey:(id)a0;
- (id)getUserLastSeenTime:(id)a0 error:(id *)a1;
- (id)getUserNodeName:(id)a0 error:(id *)a1;
- (id)getUsers:(id *)a0;
- (id)getUsersOlderThanDate:(id)a0 error:(id *)a1;
- (id)initWithDbDirPath:(id)a0 dbName:(id)a1;
- (id)initWithDbDirPath:(id)a0 dbName:(id)a1 readOnly:(BOOL)a2 allowCreate:(BOOL)a3;
- (BOOL)performDbUpgrade;
- (id)readData:(struct sqlite3_stmt { } *)a0 col:(int)a1;
- (id)readDate:(struct sqlite3_stmt { } *)a0 col:(int)a1;
- (BOOL)removeAllSubscriptions;
- (BOOL)removeAllSystemAssetSetUsages;
- (void)setSystemConfigurationForKey:(id)a0 withValue:(id)a1;
- (id)setUserLastSeenTime:(id)a0 node:(id)a1 time:(id)a2;
- (BOOL)subscribe:(id)a0 subscriptions:(id)a1 user:(id)a2 node:(id)a3;
- (BOOL)unsubscribe:(id)a0 subscriptions:(id)a1 user:(id)a2 node:(id)a3;
- (id)updateSystemAssetSetUsages:(id *)a0;
- (id)updateSystemAssetSetUsages:(id *)a0 configurationManager:(id)a1;

@end
