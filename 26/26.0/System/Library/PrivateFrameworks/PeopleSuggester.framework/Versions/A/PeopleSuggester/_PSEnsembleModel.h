@class _CDInteractionCache, _PSFeatureCache, _CDInteractionStore, NSDictionary, _PSHeuristics, _PSFTZKWOrchestrator, _PSContactResolver, NSObject, _PSCoreMLScoringModel, NSString, NSSet, _PSFTZKWTrialData, _PSKNNModel, NSUserDefaults, NSNumber, CNContactStore, _PSInteractionAndContactMonitor, NSArray;
@protocol OS_dispatch_queue, _DKKnowledgeSaving, _DKKnowledgeQuerying;

@interface _PSEnsembleModel : NSObject {
    struct os_unfair_lock_s { unsigned int _os_unfair_lock_opaque; } _lock;
    struct os_unfair_lock_s { unsigned int _os_unfair_lock_opaque; } _visualIdentifierLock;
    struct os_unfair_lock_s { unsigned int _os_unfair_lock_opaque; } _populateCacheLock;
    _PSFeatureCache *_featureCache;
    NSObject<OS_dispatch_queue> *_queue;
}

@property (retain) NSNumber *maxCandidatesFromShareSheetCache;
@property (retain) NSNumber *maxCandidatesFromMessageCache;
@property (retain) _PSCoreMLScoringModel *coreMLScoringModel;
@property BOOL PSConfidenceModelInUse;
@property BOOL useSyntheticSharingInteractions;
@property (retain) _PSKNNModel *knnModel;
@property (retain) _PSKNNModel *knnMapsModel;
@property (retain) _PSKNNModel *knnZkwModel;
@property (retain) _PSKNNModel *knnNameOrContactRankerModel;
@property (retain) _PSKNNModel *knnSiriNLContactRankerModel;
@property (retain) _PSHeuristics *heuristics;
@property (retain, nonatomic) _PSInteractionAndContactMonitor *contactMonitor;
@property (retain) NSSet *cachedSupportedBundleIDs;
@property (retain) _PSContactResolver *contactResolver;
@property (retain, nonatomic) _PSFTZKWOrchestrator *zkwFTOrchestrator;
@property (retain, nonatomic) _PSFTZKWTrialData *zkwFTTrialData;
@property (nonatomic) BOOL allowNonSupportedBundleIDs;
@property (retain) NSDictionary *psConfig;
@property (retain) NSString *traceId;
@property (retain) NSString *currentSpanId;
@property (retain, nonatomic) id<_DKKnowledgeQuerying, _DKKnowledgeSaving> knowledgeStore;
@property (retain, nonatomic) _CDInteractionStore *interactionStore;
@property (retain) _CDInteractionCache *messageInteractionCache;
@property (retain) _CDInteractionCache *shareInteractionCache;
@property (retain) _CDInteractionCache *allOtherInteractionCache;
@property (retain, nonatomic) NSUserDefaults *peopleSuggesterDefaults;
@property (retain, nonatomic) CNContactStore *contactStore;
@property (retain, nonatomic) NSArray *defaultContactKeysToFetch;
@property (retain, nonatomic) NSString *trialID;
@property (retain, nonatomic) NSString *trialExperimentId;
@property (retain, nonatomic) NSString *trialDeploymentId;
@property (retain, nonatomic) NSString *trialTreatmentId;
@property (retain, nonatomic) NSArray *shareSheetMechanisms;
@property (retain, nonatomic) NSArray *messageDirections;
@property (retain, nonatomic) NSNumber *messageMechanism;
@property (retain, nonatomic) NSArray *allOtherInteractionCacheMechanism;
@property (retain, nonatomic) NSArray *allOtherInteractionCacheDirections;

+ (id)orderedSuggestionProxiesWithProxyOrder:(id)a0 suggestionProxies:(id)a1 suggestionsWithSharePlayAddedBlock:(id /* block */)a2;
+ (id)_suggestionInteractionPredicatesForFirstPartyMessages:(BOOL)a0 bundleID:(id)a1 interactionRecipients:(id)a2;
+ (id)_feedbackDictionary;

- (id)trialIdentifier;
- (void)intializeKNNContactRankerModelWithInteractionStore:(id)a0 knowledgeStore:(id)a1;
- (void)psrDataCollectionForContext:(id)a0 timeToWaitInSeconds:(int)a1 interactionStatisticsConfig:(id)a2 interactionStatistics:(id)a3;
- (void)getOtherSuggestionProxies:(id)a0 supportedBundleIDs:(id)a1 modelSuggestionProxiesDict:(id)a2;
- (void)populateCachesWithSupportedBundleIDs:(id)a0;
- (id)_knnZKWSuggestionsWithPredictionContext:(id)a0 modelConfiguration:(id)a1 maxSuggestions:(unsigned long long)a2;
- (BOOL)_updateInteractionStatisticsForImplicitEngagement:(id)a0 interactionStatisticsConfig:(id)a1 interactionStatistics:(id)a2 sessionFeedback:(id)a3;
- (void)freeCachesIfNotCoreDuetDaemon;
- (BOOL)_updateInteractionStatisticsForExplicitEngagement:(id)a0 interactionStatisticsConfig:(id)a1 interactionStatistics:(id)a2 sessionFeedback:(id)a3;
- (id)suggestZKWSuggestionsWithPredictionContext:(id)a0 maxSuggestions:(unsigned long long)a1;
- (id)rankedGlobalSuggestionsWithPredictionContext:(id)a0 contactsOnly:(BOOL)a1 maxSuggestions:(unsigned long long)a2;
- (id)rankedGlobalSuggestionsForSiriNLWithPredictionContext:(id)a0 maxSuggestions:(unsigned long long)a1 interactionId:(id)a2;
- (void)addTrialInfoToPredictionContext:(id)a0 withExperiment:(id)a1;
- (id)rankedAutocompleteSuggestionsFromContext:(id)a0 candidates:(id)a1;
- (id)suggestionsFromSuggestionProxies:(id)a0 supportedBundleIDs:(id)a1 contactKeysToFetch:(id)a2 meContactIdentifier:(id)a3 maxSuggestions:(unsigned long long)a4;
- (void)sendDataCollectionMessageWith:(id)a0;
- (void)loadDefaultPSConfig;
- (id)psr_suggestionsFromSuggestionProxies:(id)a0 interactionsStatistics:(id)a1 maxSuggestions:(unsigned long long)a2 predictionContext:(id)a3;
- (id)candidatesForShareSheetRanking;
- (id)getReasonTypesFromObjects:(id)a0 limit:(unsigned long long)a1;
- (id)_defaultPredictionsWithPredictionContext:(id)a0 trialClient:(id)a1 config:(id)a2 parentSpanId:(id)a3;
- (void)updateTrialID:(id)a0;
- (BOOL)allowConcurrentReads;
- (void)addUTIInfo:(id)a0 predictionContext:(id)a1;
- (id)_conversationIdForFirstInteractionAfterSharingStartDate:(id)a0 targetBundleId:(id)a1;
- (void)addSupportedBundleIDs:(id)a0;
- (void)populateCaches;
- (BOOL)loadPSConfigPath:(id)a0;
- (void)refreshCaches;
- (id)deviceIdentifier;
- (unsigned long long)pruneCandidatesForRanking:(id)a0;
- (id)init;
- (id)getMeContactIdentifier;
- (void)getHeuristicSuggestionProxies:(id)a0 supportedBundleIDs:(id)a1 modelSuggestionProxiesDict:(id)a2;
- (BOOL)excludeSuggestionWithConversationId:(id)a0;
- (void)evaluateCandidates:(id)a0 psrMLModel:(id)a1;
- (id)finalSuggestionProxiesForInteractionStatistics:(id)a0 config:(id)a1 trialClient:(id)a2 context:(id)a3;
- (id)getSuggestionsFromInteractionsStatistics:(id)a0 withConfig:(id)a1 trialClient:(id)a2 andPredictionContext:(id)a3;
- (id)familyPredictionsWithMaxSuggestions:(unsigned long long)a0 predictionContext:(id)a1;
- (BOOL)shouldUseLegacyUI;
- (void)addExtraInformationWithSuggestions:(id)a0 modelSuggestionProxiesDict:(id)a1;
- (id)rerankMapsSuggestions:(id)a0 usingPredictionContext:(id)a1 contactResolver:(id)a2;
- (id)initWithInteractionStore:(id)a0 knowledgeStore:(id)a1;
- (void)sendDataToPETAsync:(id)a0 withConfig:(id)a1 andContext:(id)a2;
- (id /* block */)getPhotoBasedFeaturesAsync:(id)a0 shouldProcessPicturesLive:(BOOL)a1 shouldUseVIPModel:(BOOL)a2 withTimeout:(double)a3;
- (void)initializeEnsembleModelsWithInteractionStore:(id)a0 knowledgeStore:(id)a1;
- (id)appExtensionSuggestionsFromContext:(id)a0;
- (id)getModelSuggestionsProxyDictWithModelProxiesArray:(id)a0;
- (void)logPipeline:(id)a0 withPipelineStage:(id)a1 andSessionID:(id)a2 andCandidateNames:(id)a3;
- (id)autocompleteSearchResultsWithPredictionContext:(id)a0;
- (void)freeCaches;
- (BOOL)loadPSConfig:(id)a0;
- (void)addSuggestedRankFeature:(id)a0 interactionsStatistics:(id)a1;
- (id)_reMapContentTypes:(int *)a0 count:(unsigned long long)a1;
- (id)_fallbackPredictionWithPredictionContext:(id)a0 config:(id)a1 parentSpanId:(id)a2;
- (id)rankedSiriMLCRHandles:(id)a0 context:(id)a1;
- (id)rankedHandlesFromCandidateHandles:(id)a0;
- (id)mapsSuggestionArrayWithArray:(id)a0 appendingUniqueElementsFromArray:(id)a1 contactResolver:(id)a2 meContactId:(id)a3;
- (int)_remapSingleContentTypeValue:(int)a0;
- (void)logPipelineWithSuggestions:(id)a0 interactionsStatistics:(id)a1 pipelineStage:(id)a2 sessionID:(id)a3;
- (id)fetchSupportedBundleIDsWithPredictionContextFilters:(id)a0;
- (id)predictWithMapsPredictionContext:(id)a0 maxSuggestions:(unsigned long long)a1;
- (BOOL)coreMLModelNeedsDurableFeatures;
- (id)mergedSuggestionsWithFamilySuggestions:(id)a0 shareSheetSuggestions:(id)a1 maxSuggestions:(unsigned long long)a2 supportedBundleIds:(id)a3;
- (id)getReasonTypesFromObjects:(id)a0;
- (id)rankedNameSuggestionsWithPredictionContext:(id)a0 name:(id)a1;
- (id)predictWithPredictionContext:(id)a0 maxSuggestions:(unsigned long long)a1;
- (void)setupAeroMLPipelineLoggerWithModel:(id)a0;
- (id)getModelProxiesArrayWithPredictionContext:(id)a0;
- (id)rankedGlobalSuggestionsWithPredictionContext:(id)a0 contactsOnly:(BOOL)a1 maxSuggestions:(unsigned long long)a2 excludeBackfillSuggestions:(BOOL)a3;
- (BOOL)_updateInteractionStatisticsForSpeculativeEngagement:(id)a0 interactionStatisticsConfig:(id)a1 interactionStatistics:(id)a2 sessionFeedback:(id)a3;
- (id)predictWithPredictionContext:(id)a0 maxSuggestions:(unsigned long long)a1 contactKeysToFetch:(id)a2;
- (id)fetchShareSheetSupportedBundleIDs;
- (void)getCoreMLSuggestionProxiesWithPredictionContext:(id)a0 modelSuggestionProxiesDict:(id)a1 candidateToFeatureVectorDictGetter:(id /* block */)a2;
- (void)getKnnSuggestionProxies:(id)a0 supportedBundleIDs:(id)a1 modelSuggestionProxiesDict:(id)a2;
- (BOOL)supportsDirectAutocompleteModelInit;
- (void).cxx_destruct;
- (id)getPETMessageFrom:(id)a0 withConfig:(id)a1 andContext:(id)a2;
- (int)modelProxyToVirtualFeatureStoreFeature:(id)a0;

@end
