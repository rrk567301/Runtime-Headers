@class NSString, NSMapTable, NSObject, CKContainer;
@protocol DNDSSyncEngineSynchronizing, DNDSSyncEngineLastChanceDataStoring, DNDSKeybagStateProviding, DNDSSyncEngineMetadataStoring, OS_dispatch_queue, OS_dispatch_source;

@interface DNDSSyncEngine : NSObject <DNDSKeybagStateObserver, DNDSSysdiagnoseDataProvider, CKSyncEngineDataSource> {
    id<DNDSSyncEngineMetadataStoring> _store;
    id<DNDSSyncEngineSynchronizing> _syncEngine;
    struct os_unfair_lock_s { unsigned int _os_unfair_lock_opaque; } _lock;
    NSObject<OS_dispatch_queue> *_syncEngineQueue;
    NSObject<OS_dispatch_source> *_accountUpdateSource;
    NSMapTable *_sourcesByZoneName;
    id<DNDSSyncEngineMetadataStoring> _metadataStore;
    id<DNDSSyncEngineLastChanceDataStoring> _lastChanceStore;
    struct { char syncEnabled; char featureEnabled; char accountAvailable; char encryptionAvailable; char supportedDevice; char testing; } _state;
    char _allowSyncEngineCreation;
    CKContainer *_container;
    id<DNDSKeybagStateProviding> _keybag;
}

@property (nonatomic, getter=isSyncPreferenceEnabled) char syncPreferenceEnabled;
@property (readonly, nonatomic, getter=isSyncEnabled) char syncEnabled;
@property (readonly, nonatomic, getter=isSyncAvailable) char syncAvailable;
@property (readonly, nonatomic) unsigned long long cloudSyncState;
@property (readonly, nonatomic) char hasLocalChanges;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;
@property (readonly, copy, nonatomic) NSString *sysdiagnoseDataIdentifier;

+ (id)sharedInstance;

- (void).cxx_destruct;
- (void)setTesting:(char)a0;
- (void)syncEngine:(id)a0 zoneWithIDWasPurged:(id)a1;
- (void)addRecordIDsToSave:(id)a0 recordIDsToDelete:(id)a1;
- (void)addRecordZonesToSave:(id)a0 recordZoneIDsToDelete:(id)a1;
- (void)sendChangesWithCompletionHandler:(id /* block */)a0;
- (void)syncEngine:(id)a0 didDeleteRecordWithID:(id)a1;
- (void)syncEngine:(id)a0 didFetchRecord:(id)a1;
- (void)syncEngine:(id)a0 didSaveRecord:(id)a1;
- (void)syncEngine:(id)a0 didUpdateMetadata:(id)a1;
- (void)syncEngine:(id)a0 failedToDeleteRecordWithID:(id)a1 error:(id)a2;
- (void)syncEngine:(id)a0 failedToSaveRecord:(id)a1 error:(id)a2;
- (id)syncEngine:(id)a0 recordToSaveForRecordID:(id)a1;
- (void)syncEngine:(id)a0 recordWithIDWasDeleted:(id)a1 recordType:(id)a2;
- (char)syncEngine:(id)a0 shouldFetchChangesForZoneID:(id)a1;
- (void)syncEngine:(id)a0 zoneWithIDWasDeleted:(id)a1;
- (void)removeZoneWithID:(id)a0;
- (void)_lock_purgeData;
- (void)keybagDidUnlockForTheFirstTime:(id)a0;
- (void)_cloudKitAccountChanged:(id)a0;
- (void)_fetchAccountStateWithCompletionHandler:(id /* block */)a0;
- (void)_handleAccountFetchWithUpdatedUserRecordID:(id)a0 updatedAccountStatus:(long long)a1 updatedEncryptionAvailable:(char)a2 updatedSyncEnabled:(char)a3;
- (void)_initialSyncForDataSource:(id)a0 withZoneName:(id)a1;
- (void)_initialSyncForDataSources;
- (long long)_lock_currentAccountStatus;
- (id)_lock_currentUserRecordID;
- (id)_lock_dataSourceForRecord:(id)a0;
- (id)_lock_dataSourceForZoneID:(id)a0;
- (id)_lock_dataSources;
- (void)_lock_destroySyncEngine;
- (char)_lock_encryptionAvailable;
- (char)_lock_isSyncAvailable;
- (char)_lock_isSyncEnabled;
- (char)_lock_isSyncPreferenceEnabled;
- (void)_lock_setCurrentAccountStatus:(long long)a0;
- (void)_lock_setCurrentUserRecordID:(id)a0;
- (void)_lock_setEncryptionAvailable:(char)a0;
- (id)_lock_syncEngine;
- (void)_migrateOldStoresWithSyncEnabledState:(char)a0;
- (void)_purgeDataFromDataSources;
- (void)_retryLastChanceRecords;
- (void)_retryLastChanceRecordsForDataSource:(id)a0 withZoneName:(id)a1;
- (void)_syncEngineQueue_updateAccountWithSyncEnabledState:(char)a0;
- (void)_updateAccountWithCurrentSyncEnabledState;
- (void)_updateAccountWithSyncEnabledState:(char)a0;
- (id)_zoneIDForRecord:(id)a0;
- (void)fetchChanges:(char)a0 withCompletionHandler:(id /* block */)a1;
- (void)handleDeletedRecordID:(id)a0;
- (void)handleFetchedRecord:(id)a0;
- (id)initWithMetadataStore:(id)a0 lastChanceDataStore:(id)a1 keybag:(id)a2 syncEnabled:(char)a3;
- (id)initWithMetadataStore:(id)a0 lastChanceDataStore:(id)a1 syncEngine:(id)a2 keybag:(id)a3 syncEnabled:(char)a4;
- (id)lastChanceRecordForRecordID:(id)a0;
- (void)pairedDeviceDidChange;
- (void)purgeZoneWithID:(id)a0;
- (void)setDataSource:(id)a0 forZoneName:(id)a1;
- (void)sync:(char)a0 withCompletionHandler:(id /* block */)a1;
- (id)sysdiagnoseDataForDate:(id)a0 redacted:(char)a1;

@end
