@class NSDate, NSObject, NSString, HMDBackgroundOperationManager, HMDHomeData, NSMutableSet, HMDHH2MigratorRecord, HMDCoreData, HMDCoreDataCloudTransform, HMDHH2FrameworkSwitch;
@protocol OS_dispatch_queue, HMDDatabase;

@interface HMDHH2Migrator : HMFObject <HMFLogging>

@property (readonly, nonatomic) HMDHH2MigratorRecord *migratorRecord;
@property (readonly, nonatomic) HMDHH2FrameworkSwitch *hh2FrameworkSwitch;
@property (readonly, nonatomic) NSMutableSet *scheduledKeyRollOperationsDuringMigration;
@property (readonly, nonatomic) NSMutableSet *v5ModelUpdateFutures;
@property (readonly, nonatomic) NSMutableSet *openedZones;
@property (readonly, nonatomic) HMDCoreData *coreData;
@property (readonly, nonatomic) HMDCoreDataCloudTransform *cloudTransform;
@property (readonly, nonatomic) HMDBackgroundOperationManager *backgroundOpsManager;
@property (readonly, nonatomic) id<HMDDatabase> defaultDatabase;
@property (readonly, nonatomic) id<HMDDatabase> cameraClipsDatabase;
@property (readonly, nonatomic) NSDate *migrationStartTime;
@property (readonly, nonatomic) NSObject<OS_dispatch_queue> *queue;
@property (retain, nonatomic) HMDHomeData *homeData;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

+ (id)logCategory;
+ (id)arrayByRemovingElementsInArray:(id)a0 fromArray:(id)a1;
+ (id)auditedHomeAccessCodeModelsFromModels:(id)a0 userAccessCodeModelsAndInvites:(id)a1;
+ (id)auditedUserAccessCodeModelsAndInvitesFromModels:(id)a0;
+ (long long)compareUserAccessCodeInModel:(id)a0 withModel:(id)a1;
+ (id)modelsByDroppingEmptyStringAccessCodesOnModels:(id)a0;
+ (char)shouldIgnoreModel:(id)a0;
+ (id)userAccessCodeFromModel:(id)a0;

- (void)dealloc;
- (id)init;
- (void).cxx_destruct;
- (void)_fixupActionSetUnlocalizedName:(id)a0;
- (void)_fixupUserUUID:(id)a0;
- (id)_auditAccessCodesByRemovingIllegalDuplicatesFromModels:(id)a0;
- (void)_createResidentModelsDuringMigrationForAppleMediaAccessory:(id)a0 context:(id)a1;
- (void)_fixUpHomeWithoutOwner:(id)a0 withHH2ControllerKey:(id)a1 context:(id)a2;
- (void)_fixupAccessoryWithNoInitialValues:(id)a0;
- (void)_fixupAccessoryWithNoRoom:(id)a0 coreDataModelObject:(id)a1;
- (void)_fixupActionSetInvalidName:(id)a0 context:(id)a1;
- (void)_fixupAppleMediaAccessory:(id)a0 context:(id)a1;
- (void)_fixupAssistantAccessControlForUserModel:(id)a0;
- (void)_fixupCharacteristicEventTriggerInvalidService:(id)a0 context:(id)a1;
- (void)_fixupCharacteristicWriteActionWithInvalidService:(id)a0 context:(id)a1;
- (void)_fixupGuestAccessCodeWithInvalidLabel:(id)a0 context:(id)a1;
- (void)_fixupHomeInvalidName:(id)a0 context:(id)a1;
- (void)_fixupHomeManagerPairingIdentity:(id)a0 withHH2ControllerKey:(id)a1 context:(id)a2;
- (void)_fixupInvalidCharacteristicFormat:(id)a0 context:(id)a1;
- (void)_fixupOutgoingInvitationModel:(id)a0;
- (void)_fixupSoftwareUpdateModelWithNoAccessory:(id)a0 coreDataModelObject:(id)a1;
- (void)_fixupTriggerInvalidName:(id)a0 context:(id)a1;
- (void)_fixupUserAccessCodeWithInvalidValue:(id)a0 context:(id)a1;
- (void)_fixupUserAuthorizationDataForUserModel:(id)a0;
- (void)_fixupUserPairingIdentity:(id)a0 withHH2ControllerKey:(id)a1 context:(id)a2;
- (char)_performMigrationFromTestDirectoryUsingHH2ControllerKey:(id)a0;
- (char)_saveAndResetWithContext:(id)a0 errorMessage:(id)a1;
- (char)_startMigratingHomeDataFromLocation:(id)a0 usingHH2PairingKey:(id)a1;
- (void)_updatePairingIdentityForHome:(id)a0 withHH2ControllerKey:(id)a1 context:(id)a2;
- (id)allObjectIDsFromTransactions:(id)a0 cloudStoreIdentifier:(id)a1;
- (id)backingStoreObjectsForAccountsAndDevices:(id)a0;
- (char)didCoreDataPushAllModelsToCloudKit:(id)a0 previousToken:(id)a1 cloudStore:(id)a2;
- (char)fetchAndMigrateCameraSettingsFromAccessory:(id)a0 fromLocalZone:(id)a1 managedObjectContext:(id)a2;
- (char)fetchAndMigrateCompositeSettingsFromAccessory:(id)a0 fromLocalZone:(id)a1 managedObjectContext:(id)a2;
- (id)findAndRemoveAllModelsWithInvalidAccessCodes:(id)a0;
- (void)fixupModelForMigration:(id)a0 backingStoreModelObject:(id)a1 hh2ControllerKey:(id)a2;
- (char)handlePostMigration;
- (id)initWithMigratorRecord:(id)a0 hh2FrameworkSwitch:(id)a1 coreData:(id)a2 cloudTransform:(id)a3 backgroundOperationManager:(id)a4 defaultDatabase:(id)a5 cameraClipsDatabase:(id)a6;
- (id)makeListOfArchivesToMigrate:(id)a0;
- (char)makeSureToCreateHH2SentinelZoneWithError:(id *)a0;
- (char)migrateAccessoryV5Models:(id)a0 fromLocalZone:(id)a1 forHome:(id)a2 owner:(id)a3;
- (char)migrateCameraProfileSettingModel:(id)a0 accessory:(id)a1 managedObjectContext:(id)a2;
- (char)migrateCompositeAccessorySettingModel:(id)a0 accessory:(id)a1 managedObjectContext:(id)a2;
- (char)migrateHome:(id)a0 primaryHomeUUID:(id)a1 managedObjectContext:(id)a2 hh2ControllerKey:(id)a3;
- (char)migrateHomeData:(id)a0 managedObjectContext:(id)a1 hh2ControllerKey:(id)a2;
- (char)migrateHomeManager:(id)a0 managedObjectContext:(id)a1 hh2ControllerKey:(id)a2;
- (char)migrateHomePersonModelsForHomeUUID:(id)a0 localZone:(id)a1 managedObjectContext:(id)a2;
- (char)migrateHomeToCoreData:(id)a0 primaryHomeUUID:(id)a1 managedObjectContext:(id)a2 hh2ControllerKey:(id)a3;
- (char)migrateMediaContentProfileAccessControl:(id)a0 forOwnerUser:(id)a1 fromLocalZone:(id)a2;
- (char)migratePersonFaceCropModelsForLocalZone:(id)a0;
- (char)migratePhotosPersonManagerSettingsFromLocalZone:(id)a0 owner:(id)a1 managedObjectContext:(id)a2;
- (char)migrateUserListeningHistoryControl:(id)a0 forOwnerUser:(id)a1 fromLocalZone:(id)a2;
- (char)migrateUserSettingsToCoreData:(id)a0 forUser:(id)a1 fromLocalZone:(id)a2;
- (char)migrateV5Models:(id)a0 forHome:(id)a1;
- (char)migrateV5PersonDataForHome:(id)a0 managedObjectContext:(id)a1;
- (id)openZoneWithName:(id)a0 inDatabase:(id)a1;
- (char)populateAndSaveCDModelsFrom:(id)a0 managedObjectContext:(id)a1 hh2ControllerKey:(id)a2 tag:(id)a3;
- (id)privateZoneForOwnerUser:(id)a0;
- (void)revertChangesPerformedDuringMigration;
- (char)rollAccessoryKeysToHH2:(id)a0 hh2ControllerKey:(id)a1;
- (char)saveUserSettingsToCoreData:(id)a0 forUser:(id)a1 privateSettingsMap:(id)a2;
- (char)scheduleAccessoryKeyMigration:(id)a0 oldPairingIdentity:(id)a1 hh2PairingIdentity:(id)a2;
- (id)sharedZoneForOwnerUser:(id)a0;
- (char)startMigratingHomeDataFromLocation:(id)a0;
- (char)startMigrationFromLocation:(id)a0;
- (char)startMigrationIfNeeded;
- (void)submitABCEventForFailedMigrationWithReason:(unsigned long long)a0 withError:(id)a1;
- (char)waitForCDToExportModelsToCloudKit:(id)a0;
- (char)waitForCloudKitSyncForProcessingResult:(id)a0 error:(id *)a1;
- (char)waitForCloudTransformToRun;
- (char)waitForFirstImportToFinish;
- (char)waitForStartupForCloudZone:(id)a0;
- (char)waitForV5UpdatesToSyncToCloudKit;

@end
