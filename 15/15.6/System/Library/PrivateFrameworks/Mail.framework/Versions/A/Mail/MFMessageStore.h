@class NSDate, NSString, MFMailbox, MFMailAccount, NSArray, NSOperationQueue, MCActivityMonitor, MCInvocationQueue, NSTimer, NSMutableArray, NSMutableSet, NSCache;

@interface MFMessageStore : NSObject <MCMessageDataSource> {
    id _retainCountLock;
    char _isWritingChangesToDisk;
    char _isTryingToClose;
    id _cacheLock;
    NSCache *_headerCache;
    NSCache *_bodyCache;
    _Atomic int _storeState;
    NSTimer *_timer;
    MFMailbox *_mailbox;
    NSMutableArray *_allMessages;
    MFMailAccount *_account;
    NSMutableSet *_uniqueStrings;
    char _compactOnClose;
}

@property (retain) MCActivityMonitor *openMonitor;
@property (readonly, nonatomic) NSOperationQueue *deleteQueue;
@property (readonly, nonatomic) MCInvocationQueue *openAndCloseMailboxQueue;
@property char isReadOnly;
@property char hasUnsavedChangesToMessageData;
@property char forceInvalidation;
@property (readonly, nonatomic) char shouldCallCompactWhenClosing;
@property (readonly) int storeState;
@property char isFirstTimeSync;
@property (readonly) NSDate *lastSyncDate;
@property (readonly, nonatomic) MFMailAccount *account;
@property (readonly, nonatomic) MFMailbox *mailbox;
@property (readonly, copy, nonatomic) NSArray *allMailboxRepresentations;
@property (readonly, nonatomic) char isOpened;
@property (readonly, copy, nonatomic) NSString *status;
@property (readonly, nonatomic) const char *displayNameForLogging;
@property (readonly, nonatomic) char isTrash;
@property (readonly) char canRebuild;
@property (readonly, nonatomic) char allowsAppend;
@property (readonly, nonatomic) char allowsOverwrite;
@property (readonly, nonatomic) char allowsDeleteInPlace;
@property (readonly) unsigned long long totalCount;
@property (readonly, copy, nonatomic) NSString *sortOrder;
@property (readonly) char isSortedAscending;
@property (readonly, nonatomic) char canCompact;
@property (readonly, copy, nonatomic) NSString *displayName;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

+ (void)initialize;
+ (id)log;
+ (void)_autosaveMessageStore:(id)a0;
+ (id)_copyRawAvailableStoreForMailbox:(id)a0 creationBlock:(id /* block */)a1;
+ (char)createEmptyStoreIfNeededForPath:(id)a0 notIndexable:(char)a1;
+ (id)currentlyAvailableStoreForMailbox:(id)a0;
+ (id)currentlyAvailableStoresForAccount:(id)a0;
+ (id)descriptionOfOpenStores;
+ (unsigned long long)numberOfCurrentlyOpenStores;
+ (void)removeStoreFromCache:(id)a0;
+ (void)test_invalidateStoresAndMailboxes;

- (oneway void)release;
- (void)dealloc;
- (id)copyWithZone:(struct _NSZone { } *)a0;
- (id)init;
- (id)retain;
- (unsigned long long)retainCount;
- (void).cxx_destruct;
- (id)objectSpecifier;
- (void)_invalidate;
- (void)saveChanges;
- (id)initWithAccount:(id)a0;
- (void)setAllMessages:(id)a0;
- (void)invalidateMessage:(id)a0;
- (void)willOpen;
- (void)messagesWereAdded:(id)a0;
- (id)moveMessages:(id)a0 destinationMailboxURL:(id)a1 userInitiated:(char)a2;
- (void)test_tearDown;
- (id)async_setLocalFlagsForMessages:(id)a0;
- (void)_cancelAutosave;
- (id)_cachedBodyForMessage:(id)a0 valueIfNotPresent:(id)a1;
- (id)_cachedHeadersForMessage:(id)a0 valueIfNotPresent:(id)a1;
- (id)_defaultRouterDestination;
- (void)_flushAllMessageData;
- (void)_invalidateInBackground;
- (void)_invalidateObjectCachesForKey:(id)a0;
- (char)_isReadyToBeInvalidated;
- (void)_messageStoreCommonInit;
- (unsigned long long)_numberOfMessagesToCache;
- (id)_routeMessages:(id)a0 fetchingBodies:(char)a1 messagesNeedingBodies:(id)a2;
- (void)_selectedDecoderHasChanged:(id)a0;
- (void)_setBackgroundColorForMessages:(id)a0 textColorForMessages:(id)a1;
- (void)_setFlagsAndColorForMessages:(id)a0;
- (void)_setNeedsAutosave;
- (id)_setOrGetValue:(id)a0 forKey:(id)a1 inCache:(id *)a2;
- (char)_updateFlagColor:(char)a0 forMessage:(id)a1;
- (char)_updateFlagForMessage:(id)a0 key:(id)a1 value:(char)a2;
- (void)addMessagesToAllMessages:(id)a0;
- (void)addUniquedStrings:(id)a0;
- (void)async_deleteMessages:(id)a0 moveToTrash:(char)a1;
- (void)async_setFlagsFromDictionary:(id)a0 forMessages:(id)a1;
- (id)bodyDataForMessage:(id)a0 andHeaderDataIfReadilyAvailable:(id *)a1 fetchIfNotAvailable:(char)a2 allowPartial:(char)a3;
- (id)bodyDataForMessage:(id)a0 fetchIfNotAvailable:(char)a1 allowPartial:(char)a2;
- (id)colorForMessage:(id)a0;
- (id)copyOfAllMessages;
- (id)copyOfAllMessagesWithOptions:(unsigned int)a0;
- (void)createDummyMailboxIfNecessary;
- (void)deleteMessages:(id)a0 moveToTrash:(char)a1;
- (void)deleteMessagesOlderThanNumberOfDays:(long long)a0 compact:(char)a1;
- (void)didOpenWithMessages:(id)a0;
- (void)doCompact;
- (id)finishRoutingMessages:(id)a0 routed:(id)a1;
- (void)flushAllCaches;
- (void)getTopLevelMimePart:(id *)a0 headers:(id *)a1 body:(id *)a2 forMessage:(id)a3 fetchIfNotAvailable:(char)a4 updateFlags:(char)a5 allowPartial:(char)a6 skipSignatureVerification:(char)a7 decodeContext:(id)a8;
- (id)headerDataForMessage:(id)a0 fetchIfNotAvailable:(char)a1 allowPartial:(char)a2;
- (unsigned long long)indexOfMessageInAllMessages:(id)a0;
- (id)initWithMailbox:(id)a0 readOnly:(char)a1;
- (id)initWithMailbox:(id)a0 readOnly:(char)a1 createEmptyStore:(char)a2;
- (void)invalidateMessages:(id)a0;
- (void)invalidateSavingChanges:(char)a0;
- (void)messageFlagsDidChange:(id)a0 flags:(id)a1;
- (id)messageForMessageID:(id)a0;
- (id)messagesForDocumentID:(id)a0;
- (void)messagesWereAdded:(id)a0 secondaryMessages:(id)a1 duringOpen:(char)a2;
- (void)messagesWereCompacted:(id)a0;
- (void)messagesWereUpdated:(id)a0;
- (void)muteConversationForMessages:(id)a0;
- (id)objectSpecifierForMessage:(id)a0;
- (void)openAsynchronously;
- (void)openAsynchronouslyWithOptions:(unsigned int)a0;
- (void)openSynchronously;
- (void)queueSaveChangesInvocation;
- (void)rebuildTableOfContentsAsynchronously;
- (id)recentMessageWithValue:(id)a0 forHeader:(id)a1;
- (void)removeAllMessagesAtIndexes:(id)a0;
- (void)removeMessageFromAllMessages:(id)a0;
- (id)routeMessages:(id)a0 fetchingBodies:(char)a1 messagesNeedingBodies:(id)a2;
- (void)saveSnippetsForMessages:(id)a0;
- (void)sendResponseType:(char)a0 forMeetingMessage:(id)a1 completionHandler:(id /* block */)a2;
- (void)setColor:(id)a0 highlightTextOnly:(char)a1 forMessages:(id)a2;
- (void)setFlagWithKey:(id)a0 state:(char)a1 forMessages:(id)a2;
- (id)setFlagsFromDictionary:(id)a0 forMessages:(id)a1;
- (id)setJunkMailLevel:(long long)a0 forMessages:(id)a1 trainJunkMailDatabase:(char)a2 userRecorded:(char)a3;
- (void)setNumberOfAttachments:(unsigned int)a0 isSigned:(char)a1 isEncrypted:(char)a2 forMessage:(id)a3;
- (id)setPersistenceConversationFlags:(unsigned long long)a0 forMessages:(id)a1;
- (id)setPrimitiveConversationFlags:(unsigned long long)a0 forMessages:(id)a1;
- (id)setPrimitiveFlagsFromDictionary:(id)a0 forMessages:(id)a1;
- (char)setStoreState:(int)a0 fromState:(int)a1;
- (void)setUniquedStrings:(id)a0;
- (char)shouldSendUserNotificationForMessage:(id)a0;
- (void)structureDidChange;
- (void)suggestSortOrder:(id)a0 ascending:(char)a1;
- (id)uniquedString:(id)a0;
- (void)unmuteConversationForMessages:(id)a0;
- (void)updateBodyFlagsForMessage:(id)a0 topLevelMimePart:(id)a1;
- (void)updateMessages:(id)a0 updateColor:(char)a1 updateNumberOfAttachments:(char)a2;
- (long long)updateMessages:(id)a0 withLibraryIDs:(id)a1 newMessages:(id *)a2;
- (void)updateMetadataAsynchronously;
- (id)willDeallocPerformingInStoreCacheLock:(char *)a0;

@end
