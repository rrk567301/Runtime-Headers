@class CBAnalyticsNightShiftTracker, SunriseSunsetProvider, NSMutableDictionary, NSDictionary, NSString, NSObject, NSMutableArray;
@protocol OS_os_log, OS_dispatch_queue, OS_dispatch_source;

@interface NightModeControl : NSObject {
    NSObject<OS_os_log> *_logHandle;
    NSMutableDictionary *_properties;
    SunriseSunsetProvider *_sunriseSunsetProvider;
    int _sunriseSunsetInfoQueryTimeout;
    NSDictionary *_sunriseSunsetInfo;
    NSMutableArray *_supportObjs;
    NSObject<OS_dispatch_queue> *_queue;
    NSObject<OS_dispatch_source> *_nextTransitionTimer;
    NSObject<OS_dispatch_source> *_transitionTimer;
    CBAnalyticsNightShiftTracker *_modeTracker;
    int _algoState;
    float _transitionLength;
    float _transitionLengthActual;
    float _transitionsTimesCoeff;
    float _transitionRate;
    float _minFactor;
    float _maxFactor;
    struct NMFactorState { double rampStartTime; float factor; float target; float start; float rampLength; } _factorState;
    struct __CFTimeZone { } *_currentTimeZone;
    double _sunsetAbsolute;
    double _sunsetPreviousAbsolute;
    double _sunriseAbsolute;
    double _sunrisePreviousAbsolute;
    double _offTransitionTimeAbsoluteUnrestricted;
    double _offTransitionTimeAbsoluteUnrestrictedPrev;
    char _transitionTimesValid;
    char _isDaylight;
    int _currentScheduledTransitionType;
    double _displayOffTimestamp;
    double _untilNexTransitionTimestamp;
    float _inactivityTimeout;
    char _checkInactivity;
    char _displayOff;
    id /* block */ _callbackBlock;
    struct { char active; char enabled; char sunSchedulePermitted; int mode; struct { struct { int hour; int minute; } fromTime; struct { int hour; int minute; } toTime; } schedule; unsigned long long disableFlags; char available; } _status;
    struct { struct { int hour; int minute; } fromTime; struct { int hour; int minute; } toTime; } _backupSchedule;
    char _statusUpdated;
    NSString *_currentSunriseKey;
    NSString *_currentSunsetKey;
    NSString *_previousSunriseKey;
    NSString *_previousSunsetKey;
    NSString *_nextSunriseKey;
    NSString *_nextSunsetKey;
    NSString *_isDaylightKey;
    int _notifyUserAboutScheduleCounter;
    struct __CFUserNotification { } *_enableNotification;
    char _notificationInProgress;
    char _revertToSunriseSunset;
    struct __CFString { } *_userName;
}

- (void)dealloc;
- (void)setMode:(int)a0;
- (char)setProperty:(id)a0 forKey:(id)a1;
- (void)initiateRestrictedMaxTransition;
- (void)timeZoneChanged;
- (void)addSupportObject:(id)a0;
- (void)cancelSchedule;
- (void)cancelTransition;
- (void)clockChanged;
- (id)copyDictionaryFromStatus:(struct { char x0; char x1; char x2; int x3; struct { struct { int x0; int x1; } x0; struct { int x0; int x1; } x1; } x4; unsigned long long x5; char x6; } *)a0;
- (id)copyLowPowerModeState;
- (id)copyPreferenceForKey:(id)a0 user:(id)a1;
- (id)copyStatusDictionaryFromPrefs;
- (id)copyTimeStringWithHour:(int)a0 minute:(int)a1 second:(int)a2;
- (void)displayAlertInteractive:(char)a0;
- (void)enableBlueLightReduction:(char)a0 withOption:(int)a1;
- (id)getPropertyForKey:(id)a0;
- (id)initWithSupportObject:(id)a0 queue:(id)a1 callback:(id /* block */)a2;
- (void)initiateFullMaxTransition;
- (void)initiateFullMinTransition;
- (void)initiateTransitionTo:(float)a0 andRampLength:(float)a1;
- (char)parseStatusDictionary:(id)a0 intoStruct:(struct { char x0; char x1; char x2; int x3; struct { struct { int x0; int x1; } x0; struct { int x0; int x1; } x1; } x4; unsigned long long x5; char x6; } *)a1 shouldUpdatePrefs:(char *)a2;
- (void)reevaluateCurrentState;
- (void)reevaluateCurrentStateWithFactorFadeOption:(float)a0;
- (void)removeSupportObject:(id)a0;
- (void)retrieveSunriseSunsetTimesFromBackup:(double)a0;
- (void)saveStatusToPrefs:(id)a0;
- (void)scheduleNextTransition:(double)a0 withType:(int)a1;
- (void)setAlgoState:(int)a0;
- (void)setNightModeFactor:(float)a0;
- (void)setNightModeFactor:(float)a0 withFadePeriod:(float)a1;
- (void)setNightShiftFactorDictionary:(id)a0;
- (void)setPreference:(id)a0 forKey:(id)a1 user:(id)a2;
- (void)setSchedule:(id)a0;
- (void)setSunPermitted:(char)a0;
- (void)switchToUser:(struct __CFString { } *)a0;
- (void)tearDownAllTimers;
- (void)transitionTimerHandler;
- (void)updateLowPowerModeState:(id)a0;
- (void)updateOptionTimestamp:(double)a0;
- (void)updateStatusDictionaryWithValue:(id)a0 forKey:(id)a1;
- (void)updateSunriseSunsetBackup;
- (void)updateSunriseSunsetInfo:(id)a0;
- (void)updateTransitionTimes:(double)a0;
- (char)updateTransitionTimesFromSchedule:(double)a0;
- (char)updateTransitionTimesFromSunriseSunset:(double)a0;

@end
