@class IMDSyncTelemetryReporter, NSString, FTDeviceSupport, IMLockdownManager, IMDefaults, IDSServerBag, IMDCKSyncState;

@interface IMDCKUtilities : NSObject <IMDCKSyncStateDelegate>

@property (nonatomic) char didKeyRollPendingCheck;
@property (retain, nonatomic) IMLockdownManager *lockdownManager;
@property (retain, nonatomic) IDSServerBag *serverBag;
@property (retain, nonatomic) FTDeviceSupport *deviceSupport;
@property (retain, nonatomic) IMDefaults *imDefaults;
@property (retain, nonatomic) IMDSyncTelemetryReporter *telemetryReporter;
@property (readonly, nonatomic) char isInCloudKitDemoMode;
@property (nonatomic) char useDeprecatedApi;
@property (readonly, nonatomic) IMDCKSyncState *syncState;
@property (readonly, nonatomic) char isSyncingPaused;
@property (readonly, nonatomic, getter=isDeviceCharging) char deviceCharging;
@property (readonly, nonatomic, getter=isDeviceOnWifi) char deviceOnWifi;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

+ (id)sharedInstance;
+ (id)logHandle;
+ (id)_idsAccountController;
+ (void)addConditionChecks:(unsigned long long)a0 toCriteria:(id)a1;
+ (id)calculateAliasesForDefaults;
+ (void)calculateAndSaveAliasesToDefaults;
+ (id)im_AKSecurityLevelKey;
+ (id)readAliasesFromDefaults;
+ (id)restoreFailuresDirectory;

- (id)init;
- (void).cxx_destruct;
- (id)internalQueue;
- (id)dsid;
- (void)setCloudKitEnabled:(char)a0;
- (id)_primaryiCloudAccount;
- (id)_accountStore;
- (id)logHandle;
- (id)_primaryAccountCountryCode;
- (void)broadcastCloudKitState;
- (void)broadcastCloudKitStateAfterClearingErrors;
- (void)broadcastCloudKitStateAfterFetchingAccountStatus;
- (void)fetchAccountStatusAndUpdateMiCSwitchEligibility;
- (char)PCSKeyRollPending;
- (void)PCSReportManateeStatusAsync:(id /* block */)a0 timeout:(double)a1;
- (id)_accountManager;
- (id)findRootCauses:(id)a0;
- (char)shouldForceArchivedMessagesSync;
- (char)shouldPresentTTROnCloudKitError;
- (void)PCSKeyRollPendingAsync:(id /* block */)a0 timeout:(double)a1;
- (unsigned int)PCSReportManateeStatus;
- (id)_truthContainer;
- (char)_accountNeedsRepairOverride;
- (char)_allowDestructiveMOCFeaturesBasedOnDSID;
- (void)_askToTapToRadarWithString:(id)a0 internalOnly:(char)a1;
- (id)_authenticationController;
- (char)_checkEligibilityWithAccountInfo:(id)a0;
- (char)_checkIfEnabledByServerBagOrDefault:(id)a0;
- (id)_createAccountError:(id)a0;
- (char)_deviceActive;
- (void)_didAttemptToUpdateCloudKitEnablementTo:(char)a0 result:(char)a1;
- (void)_fetchPrimaryAccountWithCompletion:(id /* block */)a0;
- (id)_getKeepMessagesValue;
- (double)_iCloudStorageSizeFudgeFactorBagValue;
- (char)_isInExitState;
- (char)_isLogDumpAllowed;
- (char)_isRunningInAutomation;
- (char)_isSyncingPausedOverride;
- (long long)_mininimumServerBagClientValue;
- (char)_mocFeatureEnabled;
- (id)_personIdFromAccount:(id)a0;
- (id)_primaryiCloudAccountAltDSID;
- (unsigned long long)_primaryiCloudAccountSecurityLevel;
- (void)_resetKeepMessagesSettingandBroadcastToAllDevices;
- (char)_serverAllowsCacheDelete;
- (char)_serverAllowsRemovalFromBackUp;
- (char)_serverAllowsSync;
- (void)_setEligibleToToggleMiCSwitch:(char)a0;
- (void)_setiCloudSettingsSwitchEnabled:(char)a0;
- (char)_shouldDisplayPopUpForResettingKeepMessages;
- (char)_shouldiCloudSwitchBeEnabled;
- (void)_showCKLogNotificationWithCompletion:(id /* block */)a0;
- (id)_truthDatabase;
- (char)accountIsVerifiedForMOCAndSafeForCacheDelete;
- (char)cacheDeleteEnabled;
- (void)checkiCloudQuota:(id /* block */)a0;
- (id)ckStatisticCalculations;
- (void)clearLocalCloudKitSyncState:(unsigned long long)a0;
- (char)cloudKitSyncDownloadAssetsOnly;
- (char)cloudKitSyncingEnabled;
- (unsigned long long)currentStorageOnDevice;
- (id)deviceActiveString;
- (id)deviceConditions;
- (char)deviceConditionsAllowPeriodicSync;
- (char)deviceIsPhoneOrWatch;
- (void)disableAllDevicesWithCompletion:(id /* block */)a0;
- (void)downgradingFromHSA2AndDisablingMOC;
- (void)eligibleForTruthZoneWithCompletion:(id /* block */)a0;
- (char)enableAttachmentMetricCollection;
- (void)estimateQuotaAvailability:(id /* block */)a0;
- (void)evalToggleiCloudSettingsSwitch;
- (id)exitManager;
- (id)extractServerRecordFromCKServerErrorRecordChanged:(id)a0;
- (void)fetchAccountStatusAndUpdateMiCSwitchEligibilityIfNeededOnImagentLaunch;
- (void)fetchCloudKitAccountStatusAndUpdateEligibilityAndNeedsRepairStatusWithCompletion:(id /* block */)a0;
- (void)fetchCloudKitAccountStatusWithCompletion:(id /* block */)a0;
- (void)fetchiCloudAccountPersonID:(id /* block */)a0;
- (id)finalSyncStateFor:(long long)a0;
- (char)iCloudAccountMatchesiMessageAccount;
- (id)initWithServerBag:(id)a0 lockDownmanager:(id)a1 deviceSupport:(id)a2 imDefaults:(id)a3;
- (BOOL)isCKPartialError:(id)a0;
- (void)isFirstSyncWithActivity:(id)a0 completion:(id /* block */)a1;
- (char)isLocalCachedSaltPresent;
- (void)keyRollPendingStateDidChange;
- (id)lastDeviceBackUpDate;
- (void)logCloudKitSyncToPowerLogForSyncType:(long long)a0 isCoreDuetSync:(char)a1 didCompleteChatSync:(char)a2 didSucceedSyncingChats:(char)a3 didCompleteMessageSync:(char)a4 didSucceedSyncingMessages:(char)a5 didCompleteAttachmentSync:(char)a6 didSucceedSyncingAttachments:(char)a7 didCompleteRecoverableMessageSync:(char)a8 didSucceedSyncingRecoverableMessageSync:(char)a9 syncAttemptCount:(unsigned long long)a10;
- (void)logCloudKitSyncToPowerLogForSyncType:(long long)a0 isCoreDuetSync:(char)a1 didStartSync:(char)a2 didFinishSync:(char)a3 didSucceedSyncing:(char)a4;
- (id)logCollectorAddress;
- (void)logDumpAndSendMessageTo:(id)a0 forHours:(int)a1 reason:(id)a2;
- (void)logDumpAndSendMessageTo:(id)a0 forHours:(int)a1 reason:(id)a2 isInitialSync:(char)a3 requirePreviousPrompt:(char)a4 willSendBlock:(id /* block */)a5;
- (void)logDumpAndSendMessageTo:(id)a0 forHours:(int)a1 reason:(id)a2 requirePreviousPrompt:(char)a3 willSendBlock:(id /* block */)a4;
- (char)logDumpIsExpected;
- (char)logDumpIsNecessaryAfterSync;
- (void)logToPowerLogForLogDumpGUID:(id)a0 logDumpCompleted:(char)a1 logDumpSucceeded:(char)a2 logDumpSendingCompleted:(char)a3 logDumpSendingSucceeded:(char)a4 reason:(id)a5;
- (unsigned long long)messageDatabaseSize;
- (id)newfilteredArrayRemovingCKRecordDupes:(id)a0;
- (id)newfilteredArrayRemovingCKRecordIDDupes:(id)a0;
- (long long)overrideNumberOfChatsToFetch;
- (long long)overrideNumberOfChatsToWrite;
- (void)postSyncStateToCloudKit:(id)a0;
- (void)postSyncStateToRTC:(id)a0 category:(long long)a1 reportDictionary:(id)a2;
- (void)primaryAccountHasiCloudBackupEnabledWithCompletion:(id /* block */)a0;
- (char)readServerBagBoolForKey:(id)a0 defaultValue:(char)a1;
- (id)recordNameForMessageWithGUID:(id)a0 usingSalt:(id)a1;
- (char)removeFromBackUpAllowed;
- (void)repairACAccountEnablementStatusIfNeeded;
- (void)reportCompletionForSyncType:(long long)a0 isCoreDuetSync:(char)a1 onAttempt:(unsigned long long)a2 wasSuccessful:(char)a3 duration:(double)a4;
- (void)reportErrorForSyncType:(long long)a0 syncStep:(id)a1 response:(long long)a2 error:(id)a3;
- (void)reportMOCDebuggingErrorWithString:(id)a0 internalOnly:(char)a1;
- (void)reportMOCDebuggingErrorWithString:(id)a0 internalOnly:(char)a1 initialSync:(char)a2;
- (void)reportMOCDebuggingErrorWithString:(id)a0 internalOnly:(char)a1 initialSync:(char)a2 sendToHandle:(id)a3;
- (void)reportMOCDebuggingErrorWithString:(id)a0 internalOnly:(char)a1 initialSync:(char)a2 sendToHandle:(id)a3 reasonString:(id)a4;
- (void)reportZoneCreation:(id)a0;
- (void)resetLastSyncDate;
- (char)serverAllowsAnalyticDetailsSubmission;
- (char)serverAllowsAnalyticSubmission;
- (char)serverAllowsMetricSubmission;
- (void)setCloudKitSyncingEnabled:(char)a0;
- (char)shouldAttemptMiCOnByDefault;
- (char)shouldCollectDailyLogDump;
- (char)shouldCollectDailyLogDumpForRestoreFailures;
- (char)shouldKickOffWriteForSyncType:(long long)a0;
- (char)shouldLogDumpOnCloudKitError;
- (char)shouldRepairAccountWithAccountStatus:(long long)a0 securityLevel:(unsigned long long)a1;
- (char)shouldReportToAnalytics;
- (char)shouldReportToRTC;
- (char)shouldUseDevContainer;
- (char)shouldUseDevNickNameContainer;
- (char)signedIntoiCloudAccount;
- (char)signedIntoiCloudAndiMessageAndiCloudAccountMatchesiMessageAccount;
- (char)signedIntoiMessageAccount;
- (id)simplifiedError:(id)a0;
- (id)syncFailureMetricString:(id)a0 isRecoverable:(char)a1 error:(id)a2;
- (void)syncStateWillUpdate:(id)a0;

@end
