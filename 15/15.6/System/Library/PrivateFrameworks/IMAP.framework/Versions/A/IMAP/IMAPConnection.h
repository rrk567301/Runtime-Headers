@class NSString, NSRecursiveLock, NSArray, NSMutableDictionary, MCInvocationQueue, NSMutableSet, IMAPMailbox, NSObject;
@protocol OS_os_log, IMAPAccount, IMAPConnectionResponseDelegate;

@interface IMAPConnection : MCConnection {
    NSRecursiveLock *_imapConnectionLock;
    unsigned long long _capabilityFlags;
    unsigned long long _enabledCapabilityFlags;
    long long _connectionState;
    NSMutableSet *_capabilities;
    NSString *_separatorChar;
    NSString *_selectedMailboxName;
    IMAPMailbox *_selectedIMAPMailbox;
    char _selectedMailboxIsReadOnly;
    unsigned long long _commandNumber;
    unsigned int _readBufferSize;
    double _expirationTime;
    MCInvocationQueue *_streamEventQueue;
    NSMutableDictionary *_unhandledTaggedResponses;
    unsigned long long _lastIdleSequenceNumber;
    unsigned long long _lastIdleSessionNumber;
    char _createsGateway;
    char _executingInternalReconnect;
}

@property (class, readonly, nonatomic) NSObject<OS_os_log> *log;

@property char sentID;
@property (copy, nonatomic) NSString *selectedMailboxNameForLogging;
@property (readonly, copy, nonatomic) NSString *separatorCharIfAvailable;
@property (weak) id<IMAPAccount> account;
@property (retain, nonatomic) IMAPMailbox *selectedIMAPMailbox;
@property (readonly, copy, nonatomic) NSString *selectedMailboxName;
@property (weak) id<IMAPConnectionResponseDelegate> responseDelegate;
@property (nonatomic) char canStartIdle;
@property (readonly, nonatomic) char isIdle;
@property (readonly, copy, nonatomic) NSString *displayName;
@property (readonly, nonatomic) long long connectionState;
@property (readonly, nonatomic) long long currentConnectionState;
@property (readonly, nonatomic) char isDisconnected;
@property (readonly, copy) NSArray *capabilities;
@property (copy) NSString *separatorChar;
@property (nonatomic) unsigned int readBufferSize;

+ (id)capabilityNameForCapability:(unsigned long long)a0;
+ (char)_defaultsToBackground;
+ (char)automaticallyNotifiesObserversOfSelectedMailboxName;
+ (id)keyPathsForValuesAffecting_gateway;

- (id)description;
- (id)init;
- (void).cxx_destruct;
- (void)disconnect;
- (void)quit;
- (id)initWithAccount:(id)a0;
- (char)_reconnect;
- (void)_setupConnection;
- (char)authenticate;
- (void)_transitionToState:(long long)a0;
- (char)supportsCapability:(unsigned long long)a0;
- (char)isNonAppInitiated;
- (id)authenticationMechanisms;
- (id)_authenticateWithPlainTextSchemes;
- (char)_authenticateWithSASLClient:(id)a0;
- (char)_completeConnectionWithResult:(char)a0;
- (char)_readLineIntoData:(id)a0 error:(id *)a1;
- (char)_startTLS;
- (char)_writeData:(id)a0 dontLogBytesInRange:(struct _NSRange { unsigned long long x0; unsigned long long x1; })a1 error:(id *)a2;
- (void)discoverAccountSettings;
- (id)errorURLScheme;
- (char)isValidAllowNetworking:(char)a0;
- (char)sendIDIfNeeded;
- (char)supportsPlainTextSchemes;
- (id)_getErrorFromFailedAuthenticationResponse:(id)a0 forCommand:(id)a1 usingSASL:(char)a2;
- (void)_addToCapabilities:(id)a0;
- (char)_capability:(unsigned long long *)a0 forCapabilityName:(id)a1;
- (void)_clearCapabilities;
- (id)_copyNextServerResponse:(id *)a0 fetchResponseLog:(id *)a1;
- (id)_copyNextTaggedOrContinuationResponseForCommand:(id)a0;
- (id)_copyNextTaggedOrContinuationResponseForCommand:(id)a0 exists:(unsigned long long *)a1 receivedExists:(char *)a2;
- (char)_correctMailboxIsSelectedForCommand:(id)a0;
- (void)_didEnableCapability:(unsigned long long)a0;
- (void)_enableCapabilities;
- (id)_errorForResponse:(id)a0 command:(id)a1;
- (void)_fetchCapabilitiesIfNeeded;
- (void)_fetchSeparatorCharIfNeeded;
- (void)_handleBytesAvailable;
- (char)_isTemporaryError:(id)a0;
- (char)_readBytesIntoData:(id)a0 desiredLength:(long long)a1 error:(id *)a2;
- (char)_readDataWithRemainingByteCount:(long long)a0 intoData:(id)a1 error:(id *)a2;
- (char)_recordMailboxResponse:(id)a0 forCommand:(id)a1;
- (char)_recordMailboxResponse:(id)a0 forCommand:(id)a1 exists:(unsigned long long *)a2 receivedExists:(char *)a3 fromIDLE:(char)a4;
- (void)_recordResponse:(id)a0 forCommand:(id)a1;
- (char)_recordUntaggedResponse:(id)a0 forCommand:(id)a1;
- (char)_recordUntaggedResponse:(id)a0 forCommand:(id)a1 exists:(unsigned long long *)a2 receivedExists:(char *)a3 fromIDLE:(char)a4;
- (id)_responseFromSendingCommand:(id)a0 receivedExists:(char *)a1;
- (id)_responseFromSendingCommand:(id)a0 tryCreate:(char *)a1 receivedExists:(char *)a2;
- (char)_sendCommand:(id)a0 response:(id *)a1;
- (void)_setSelectedMailboxName:(id)a0;
- (char)_socketDiedError:(id *)a0;
- (id)_stateString;
- (char)_synchronouslyExecuteDoneWithSequence:(unsigned long long)a0 session:(unsigned long long)a1;
- (void)_transitionToState:(long long)a0 selectedMailbox:(id)a1 readOnly:(char)a2;
- (char)capabilityIsEnabled:(unsigned long long)a0;
- (void)disconnectAndNotify:(char)a0;
- (char)executeAggregateStatus:(id)a0;
- (char)executeAppend:(id)a0;
- (char)executeAuthenticate:(id)a0;
- (char)executeCapability:(id)a0;
- (char)executeClientCommand:(id)a0;
- (char)executeDone:(id)a0;
- (char)executeEnable:(id)a0;
- (char)executeFetch:(id)a0;
- (char)executeID:(id)a0;
- (char)executeIdle:(id)a0;
- (char)executeListOrLSub:(id)a0;
- (char)executeLogin:(id)a0;
- (char)executeLogout:(id)a0;
- (char)executeNamespace:(id)a0;
- (char)executeNoop:(id)a0;
- (char)executeSelectCommand:(id)a0;
- (char)executeStartTLS:(id)a0;
- (char)executeStatus:(id)a0;
- (char)executeSubscribeCommand:(id)a0;
- (char)executeUIDCopyOrMove:(id)a0;
- (char)executeUIDExpunge:(id)a0;
- (char)executeUIDStore:(id)a0;
- (char)executeUnselect:(id)a0;
- (char)exitIdle;
- (id)mailboxNameIfSelected:(char)a0;
- (char)needsSelectForMailboxName:(id)a0;
- (char)prepareAndExecuteCommand:(id)a0;
- (char)startIdle;

@end
