@class NSString, PLPhotoLibraryPathManager, PSIStatement, PLSearchMetadataStore, PSIIntArray, NSObject, NSDictionary, NSMutableString, NSMutableArray, PSITokenizer;
@protocol OS_dispatch_queue;

@interface PSIDatabase : NSObject <PSIGroupCacheDelegate, PSIQueryDelegate, PSITableDelegate> {
    struct sqlite3 { } *_inqDatabase;
    char _databaseIsValid;
    struct __CFDictionary { } *_inqPreparedStatements;
    PSIIntArray *_matchingIds;
    PSIStatement *_assetUUIDByAssetIdWithAssetIdsStatement;
    PSIStatement *_collectionResultByCollectionIdWithCollectionIdsStatement;
    PSIStatement *_inqAssetIdsByGroupIdForAssetIdsStatement;
    PSIStatement *_inqCollectionIdsByGroupIdForCollectionIdsStatement;
    PSIStatement *_inqNumberOfAssetsMatchingGroupWithIdStatement;
    PSIStatement *_inqNumberOfAssetsByGroupIdMatchingGroupsWithIdsStatement;
    PSIStatement *_inqNumberOfCollectionsMatchingGroupWithIdStatement;
    PSIStatement *_inqNumberOfCollectionsByGroupIdMatchingGroupsWithIdsStatement;
    PSIStatement *_inqIdsOfAllGroupsStatement;
    PSIStatement *_inqIdsOfAllGroupsInPrefixStatement;
    struct __CFDictionary { } *_inqGroupObjectsById;
    NSObject<OS_dispatch_queue> *_serialQueue;
    NSObject<OS_dispatch_queue> *_searchQueue;
    NSObject<OS_dispatch_queue> *_groupResultsQueue;
    PLSearchMetadataStore *_inqSearchMetadataStore;
    NSDictionary *_inqSearchMetadata;
    PSITokenizer *_tokenizer;
    NSMutableString *_tokenizerOutputString;
    NSMutableArray *_tokenizerOutputTokens;
    NSMutableArray *_tokenizerOutputNormalizedTokens;
    struct { long long location; long long length; } _tokenizerOutputRanges[8];
}

@property (readonly) PSITokenizer *tokenizer;
@property (readonly) NSObject<OS_dispatch_queue> *groupResultsQueue;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;
@property (readonly, nonatomic) PLPhotoLibraryPathManager *pathManager;
@property (readonly, copy, nonatomic) NSString *path;
@property (readonly, nonatomic) long long options;

+ (void)_dropDatabase:(struct sqlite3 { } *)a0 withCompletion:(id /* block */)a1;
+ (char)_integrityCheckDatabase:(struct sqlite3 { } *)a0;
+ (struct sqlite3 { } *)_openDatabaseAtPath:(id)a0 options:(long long)a1;
+ (void)dropDatabaseAtPath:(id)a0 withCompletion:(id /* block */)a1;
+ (id)searchDatabaseLog;

- (void)dealloc;
- (void).cxx_destruct;
- (void)executeStatement:(id)a0;
- (struct sqlite3 { } *)databaseConnection;
- (struct __CFSet { } *)groupIdsForNormalizedText:(id)a0 wildcardSearch:(char)a1 leadingAnchored:(char)a2 searchIndexCategories:(id)a3;
- (id)groupsForGroupIds:(struct __CFSet { } *)a0;
- (id)initWithPathManager:(id)a0 options:(long long)a1;
- (void)updateSearchMetadata;
- (long long)lastInsertedRowID;
- (id)allCollections;
- (struct __CFSet { } *)_inqNewGroupIdsForCollectionId:(unsigned long long)a0;
- (void)_inqPrepareAndExecuteStatement:(const char *)a0;
- (id)assetUUIDByAssetIdWithAssetIds:(id)a0;
- (void)_executeQueryV2:(id)a0 resultsHandler:(id /* block */)a1;
- (unsigned long long)_inqCollectionIdWithCollection:(id)a0;
- (char)_inqVerifyTablesExistInDatabase;
- (void)removeAssetWithUUID:(id)a0 completion:(id /* block */)a1;
- (void)_clearInitialSuggestions;
- (void)_executeQuery:(id)a0 disableWildcardMatchesForUserControlledCategories:(char)a1 resultsHandler:(id /* block */)a2;
- (void)_finalizeEverything;
- (void)_inSearchQueueAsync:(id /* block */)a0;
- (void)_ingRebuildPrefixTableIfNeeded;
- (unsigned long long)_inqAssetIdForUUID:(id)a0;
- (unsigned long long)_inqAssetIdForUUID:(id)a0 uuid_0:(unsigned long long *)a1 uuid_1:(unsigned long long *)a2;
- (unsigned long long)_inqAssetIdWithAsset:(id)a0;
- (id)_inqAssetIdsByGroupIdForAssetIds:(id)a0;
- (id)_inqAssetUUIDByAssetIdWithAssetIds:(id)a0;
- (id)_inqAssetUUIDsForAssetIds:(struct __CFSet { } *)a0;
- (id)_inqAssetUUIDsForAssetIds:(struct __CFArray { } *)a0 range:(struct _NSRange { unsigned long long x0; unsigned long long x1; })a1 creationDateSorted:(char)a2;
- (id)_inqAssetUUIDsForGroupID:(unsigned long long)a0;
- (void)_inqAsync:(id /* block */)a0;
- (unsigned long long)_inqCollectionIdForUUID:(id)a0;
- (unsigned long long)_inqCollectionIdForUUID:(id)a0 uuid_0:(unsigned long long *)a1 uuid_1:(unsigned long long *)a2;
- (id)_inqCollectionIdsByGroupIdForCollectionIds:(id)a0;
- (id)_inqCollectionResultByCollectionIdWithCollectionIds:(id)a0;
- (id)_inqCollectionResultsForCollectionIds:(struct __CFArray { } *)a0 range:(struct _NSRange { unsigned long long x0; unsigned long long x1; })a1;
- (id)_inqCollectionUUIDsForCollectionIds:(struct __CFArray { } *)a0 range:(struct _NSRange { unsigned long long x0; unsigned long long x1; })a1;
- (id)_inqCollectionUUIDsForGroupID:(unsigned long long)a0;
- (id)_inqContentStringForGroupId:(unsigned long long)a0;
- (void)_inqDeleteGroupsWithGraphCollectionsForPersonUUID:(id)a0;
- (id)_inqDequeueGroupObjectWithId:(unsigned long long)a0 isCachedGroup:(char *)a1;
- (void)_inqExecutePreparedStatement:(struct sqlite3_stmt { } *)a0 allowError:(int)a1 withStatementBlock:(id /* block */)a2;
- (void)_inqExecutePreparedStatement:(struct sqlite3_stmt { } *)a0 withCancelableStatementBlock:(id /* block */)a1;
- (void)_inqExecutePreparedStatement:(struct sqlite3_stmt { } *)a0 withStatementBlock:(id /* block */)a1;
- (id)_inqFilenameGroupsWithMatchingGroupIds:(struct __CFSet { } *)a0 dateFilter:(id)a1 searchResultTypes:(unsigned long long)a2 matchingPredicateBlock:(id /* block */)a3;
- (id)_inqGenerateGroupsInfoDictionaryFromContentString:(const char *)a0 normalizedString:(const char *)a1 identifier:(const char *)a2 category:(short)a3 score:(double)a4 groupId:(unsigned long long)a5 owningGroupId:(unsigned long long)a6 includeUUIDs:(char)a7;
- (void)_inqGetTokensFromString:(id)a0 category:(short)a1 tokenOutput:(struct tokenOutput_t { id x0; id x1; id x2; struct *x3; long long x4; long long x5; struct *x6; long long x7; long long x8; } *)a2;
- (id)_inqGroupArraysFromGroupIdSets:(id)a0 dateFilter:(id)a1 searchResultTypes:(unsigned long long)a2 progressBlock:(id /* block */)a3;
- (unsigned long long)_inqGroupIdForCategory:(short)a0 contentString:(id)a1;
- (unsigned long long)_inqGroupIdForCategory:(short)a0 contentString:(id)a1 identifier:(id)a2 outOwningGroupId:(unsigned long long *)a3 outScore:(double *)a4;
- (unsigned long long)_inqGroupIdForCategory:(short)a0 identifier:(id)a1 outOwningGroupId:(unsigned long long *)a2 outScore:(double *)a3;
- (unsigned long long)_inqGroupIdForCategory:(short)a0 normalizedString:(id)a1 identifier:(id)a2 outOwningGroupId:(unsigned long long *)a3 outScore:(double *)a4;
- (unsigned long long)_inqGroupIdForCategory:(short)a0 owningGroupId:(unsigned long long)a1 contentString:(id)a2 normalizedString:(id)a3 identifier:(id)a4 rankingScore:(double)a5 insertIfNeeded:(char)a6 tokenOutput:(const struct tokenOutput_t { id x0; id x1; id x2; struct *x3; long long x4; long long x5; struct *x6; long long x7; long long x8; } *)a7 shouldUpdateOwningGroupId:(char)a8 shouldUpdateRankingScore:(char)a9;
- (void)_inqGroupIdsForAssetOrCollectionIds:(struct __CFArray { } *)a0 resultType:(unsigned long long)a1 completion:(id /* block */)a2;
- (id)_inqGroupResultWithDateFilter:(id)a0 datedTokens:(id)a1;
- (id)_inqGroupWithFilenameStatement:(struct sqlite3_stmt { } *)a0 dateFilter:(id)a1 excludingGroupId:(unsigned long long)a2 searchResultTypes:(unsigned long long)a3;
- (id)_inqGroupWithMatchingGroupId:(unsigned long long)a0 dateFilter:(id)a1 searchResultTypes:(unsigned long long)a2;
- (id)_inqGroupWithStatement:(struct sqlite3_stmt { } *)a0 dateFilter:(id)a1 includeObjects:(char)a2 isFilenameStatement:(char)a3 excludingGroupId:(unsigned long long)a4 searchResultTypes:(unsigned long long)a5;
- (id)_inqGroupWithStatement:(struct sqlite3_stmt { } *)a0 dateFilter:(id)a1 includeObjects:(char)a2 searchResultTypes:(unsigned long long)a3;
- (id)_inqGroupsWithMatchingGroupIds:(struct __CFSet { } *)a0 dateFilter:(id)a1 includeObjects:(char)a2 searchResultTypes:(unsigned long long)a3 matchingPredicateBlock:(id /* block */)a4;
- (struct __CFArray { } *)_inqNewAssetIdsForGroupId:(unsigned long long)a0 dateFilter:(id)a1;
- (struct __CFArray { } *)_inqNewAssetIdsWithDateFilter:(id)a0;
- (struct __CFArray { } *)_inqNewCollectionIdsForGroupId:(unsigned long long)a0 dateFilter:(id)a1;
- (struct __CFArray { } *)_inqNewCollectionIdsWithDateFilter:(id)a0;
- (struct __CFSet { } *)_inqNewGroupIdsForAssetId:(unsigned long long)a0;
- (struct __CFSet { } *)_inqNewGroupIdsForAssetIds:(struct __CFSet { } *)a0;
- (struct __CFSet { } *)_inqNewGroupIdsForCollectionIds:(struct __CFSet { } *)a0;
- (struct __CFSet { } *)_inqNewGroupIdsMatchingString:(id)a0 categories:(id)a1 textIsSearchable:(char)a2;
- (struct __CFSet { } *)_inqNewGroupIdsMatchingString:(id)a0 textIsSearchable:(char)a1;
- (struct __CFSet { } *)_inqNewGroupIdsWithCategories:(id)a0;
- (id)_inqNewSynonymTextsByOwningGroupIdWithGroupIds:(struct __CFSet { } *)a0;
- (id)_inqNonFilenameGroupsWithMatchingGroupIds:(struct __CFSet { } *)a0 dateFilter:(id)a1 includeObjects:(char)a2 searchResultTypes:(unsigned long long)a3 matchingPredicateBlock:(id /* block */)a4;
- (id)_inqNumberOfAssetsByGroupIdMatchingGroupsWithIds:(id)a0;
- (unsigned long long)_inqNumberOfAssetsMatchingGroupWithId:(unsigned long long)a0;
- (id)_inqNumberOfCollectionsByGroupIdMatchingGroupsWithIds:(id)a0;
- (unsigned long long)_inqNumberOfCollectionsMatchingGroupWithId:(unsigned long long)a0;
- (id)_inqOwningContentStringForGroupResult:(id)a0;
- (void)_inqPerformBatch:(id /* block */)a0;
- (struct sqlite3_stmt { } *)_inqPrepareStatement:(const char *)a0;
- (struct __CFDictionary { } *)_inqPrepareStatementsForOptions:(long long)a0 tokenizerName:(id)a1;
- (void)_inqRecycleGroups;
- (void)_inqRemoveUUID:(id)a0 categories:(id)a1 objectType:(unsigned long long)a2 isInBatch:(char)a3;
- (void)_inqRemoveUUID:(id)a0 objectType:(unsigned long long)a1 isInBatch:(char)a2;
- (void)_inqRemoveUnusedGroups;
- (double)_inqScoreForGroupID:(unsigned long long)a0;
- (void)_inqSync:(id /* block */)a0;
- (void)_inqUpdateGATableWithGroupId:(unsigned long long)a0 assetId:(unsigned long long)a1;
- (void)_inqUpdateGCTableWithGroupId:(unsigned long long)a0 collectionId:(unsigned long long)a1;
- (unsigned long long)_inqUpdateGroupForText:(id)a0 identifier:(id)a1 category:(short)a2 owningGroupId:(unsigned long long)a3;
- (char)_prepareSearchIndexAtPath:(id)a0 options:(long long)a1;
- (void)_prepareTokenOutput:(struct tokenOutput_t { id x0; id x1; id x2; struct *x3; long long x4; long long x5; struct *x6; long long x7; long long x8; } *)a0 forIndexing:(char)a1;
- (void)_processNextKeywordSuggestionsForQuery:(id)a0 groupResults:(id)a1 allowIdentifiers:(char)a2;
- (void)_removeUUID:(id)a0 categories:(id)a1 objectType:(unsigned long long)a2 completion:(id /* block */)a3;
- (void)_removeUUIDs:(id)a0 objectType:(unsigned long long)a1 deferRemovingUnusedGroups:(char)a2 completion:(id /* block */)a3;
- (void)_runWithMatchingIDs:(id)a0 block:(id /* block */)a1;
- (double)_scoreForUserCategory:(unsigned long long)a0;
- (void)_sortedSearchIndexRowIdsFromUUIDs:(id)a0 searchResultType:(unsigned long long)a1 completion:(id /* block */)a2;
- (void)addAsset:(id)a0 withCompletion:(id /* block */)a1;
- (void)addAssets:(id)a0 deferRemovingUnusedGroups:(char)a1 withCompletion:(id /* block */)a2;
- (void)addAssets:(id)a0 withCompletion:(id /* block */)a1;
- (void)addCollection:(id)a0 withCompletion:(id /* block */)a1;
- (void)addCollections:(id)a0 deferRemovingUnusedGroups:(char)a1 withCompletion:(id /* block */)a2;
- (void)addCollections:(id)a0 withCompletion:(id /* block */)a1;
- (id)allAssetUUIDsForGroupsWithCategories:(id)a0;
- (id)allCollectionUUIDsWithCollectionType:(unsigned long long)a0;
- (id)allGroupIds;
- (unsigned long long)assetCountForLookupIdentifier:(id)a0;
- (char)assetExistsWithUUID:(id)a0;
- (void)assetIdsFromUUIDs:(id)a0 completion:(id /* block */)a1;
- (struct __CFArray { } *)assetIdsWithDateFilter:(id)a0;
- (id)assetUUIDsForAssetIDs:(struct __CFArray { } *)a0;
- (void)bindMatchingIds:(struct __CFSet { } *)a0;
- (void)bindMatchingIds:(const long long *)a0 numberOfMatchingIds:(unsigned long long)a1;
- (void)bindMatchingIds:(struct __CFArray { } *)a0 range:(struct _NSRange { unsigned long long x0; unsigned long long x1; })a1;
- (void)collectionIdsFromUUIDs:(id)a0 completion:(id /* block */)a1;
- (id)collectionResultByCollectionIdWithCollectionIds:(id)a0;
- (id)collectionUUIDsForCollectionIDs:(struct __CFArray { } *)a0;
- (unsigned long long)countOfAssets;
- (void)deleteEmbeddingsForModelTypes:(id)a0 assetUUID:(id)a1;
- (void)deleteGroupsWithGraphCollectionsForPersonUUIDs:(id)a0 withCompletion:(id /* block */)a1;
- (void)dropDatabaseWithCompletion:(id /* block */)a0;
- (id)dumpGroupsInfoForAssetUUID:(id)a0 indexCategories:(id)a1 includeUUIDs:(char)a2;
- (id)dumpGroupsInfoWithIndexCategories:(id)a0 includeUUIDs:(char)a1;
- (id)dumpLookupStringsWithIndexCategories:(id)a0;
- (void)executeFetchEmbeddingQuery:(id)a0 batchHandler:(id /* block */)a1;
- (void)executeQuery:(id)a0 disableWildcardMatchesForUserControlledCategories:(char)a1 resultsHandler:(id /* block */)a2;
- (void)executeQueryV2:(id)a0 resultsHandler:(id /* block */)a1;
- (void)executeStatement:(id)a0 withResultEnumerationBlock:(id /* block */)a1;
- (void)executeStatementFromString:(id)a0;
- (void)executeStatementFromString:(id)a0 withResultEnumerationBlock:(id /* block */)a1;
- (void)exqExecuteStatementFromString:(id)a0 withResultEnumerationBlock:(id /* block */)a1;
- (void)fetchAssetUUIDsForAssetIDs:(struct __CFArray { } *)a0 creationDateSorted:(char)a1 completionHandler:(id /* block */)a2;
- (id)fetchAssetUUIDsForDateFilter:(id)a0;
- (void)fetchEmbeddingsForModelTypes:(id)a0 assetUUID:(id)a1 withBatchHandler:(id /* block */)a2;
- (void)group:(id)a0 fetchOwningContentString:(char)a1 assetIdRange:(struct _NSRange { unsigned long long x0; unsigned long long x1; })a2 collectionIdRange:(struct _NSRange { unsigned long long x0; unsigned long long x1; })a3 completionHandler:(id /* block */)a4;
- (id)groupArraysFromGroupIdSets:(id)a0 dateFilter:(id)a1 searchResultTypes:(unsigned long long)a2 progressBlock:(id /* block */)a3;
- (id)groupForLookupIdentifier:(id)a0 searchResultTypes:(unsigned long long)a1;
- (id)groupForText:(id)a0 identifier:(id)a1 category:(unsigned long long)a2 resultTypes:(unsigned long long)a3;
- (id)groupIdsInPrefixTable;
- (struct __CFSet { } *)groupIdsMatchingString:(id)a0 categories:(id)a1 textIsSearchable:(char)a2;
- (struct __CFSet { } *)groupIdsWithCategories:(id)a0;
- (id)groupResultWithDateFilter:(id)a0 datedTokens:(id)a1;
- (id)groupWithMatchingGroupId:(unsigned long long)a0 dateFilter:(id)a1 searchResultTypes:(unsigned long long)a2;
- (void)groupsForAssetIds:(struct __CFArray { } *)a0 completion:(id /* block */)a1;
- (void)groupsForCollectionIds:(struct __CFArray { } *)a0 completion:(id /* block */)a1;
- (id)groupsForSearchIndexCategories:(id)a0 searchResultTypes:(unsigned long long)a1 dateFilter:(id)a2;
- (id)groupsFromGroupIds:(struct __CFSet { } *)a0 dateFilter:(id)a1 searchResultTypes:(unsigned long long)a2;
- (id)initForTestingWithOptions:(long long)a0;
- (long long)insertAsset:(id)a0;
- (long long)insertCollection:(id)a0;
- (void)insertEmbeddings:(id)a0 modelType:(unsigned long long)a1 assetUUID:(id)a2 completion:(id /* block */)a3;
- (long long)insertGroup:(id)a0;
- (char)isDatabaseCorrupted;
- (void)linkAssetWithId:(long long)a0 toGroupWithId:(long long)a1;
- (void)linkCollectionWithId:(long long)a0 toGroupWithId:(long long)a1;
- (id)meNodeIdentifier;
- (struct __CFArray { } *)mostRecentSortedAssetIdsWithLimit:(unsigned long long)a0;
- (id)newQueryWithSearchText:(id)a0 queryTokens:(id)a1 useWildcardSearchText:(char)a2 libraryScope:(unsigned long long)a3;
- (id)newQueryWithSearchTextV2:(id)a0 queryTokens:(id)a1 scopedSearchIdentifiers:(id)a2 searchResultTypes:(unsigned long long)a3 searchSuggestionType:(unsigned long long)a4 useWildcardSearchText:(char)a5 enableExactMatchPrioritization:(char)a6 libraryScope:(unsigned long long)a7 suggestionLimit:(unsigned long long)a8;
- (id)newSuggestionsQueryForQueryText:(id)a0 suggestionType:(unsigned long long)a1 suggestionLimit:(unsigned long long)a2 resultTypes:(unsigned long long)a3 libraryScope:(unsigned long long)a4;
- (void)performSyncOnDBQueue:(id /* block */)a0;
- (struct sqlite3_stmt { } *)prepareEmbeddingStatement:(long long)a0 modelTypes:(id)a1 assetUUID:(id)a2;
- (void)prepareForNumberOfMatchingIds:(unsigned long long)a0;
- (void)removeAssetsWithUUIDs:(id)a0 completion:(id /* block */)a1;
- (void)removeAssetsWithUUIDs:(id)a0 deferRemovingUnusedGroups:(char)a1 completion:(id /* block */)a2;
- (void)removeCategories:(id)a0 forAssetUUID:(id)a1 completion:(id /* block */)a2;
- (void)removeCollectionWithUUID:(id)a0 completion:(id /* block */)a1;
- (void)removeCollectionsWithUUIDs:(id)a0 completion:(id /* block */)a1;
- (void)removeCollectionsWithUUIDs:(id)a0 deferRemovingUnusedGroups:(char)a1 completion:(id /* block */)a2;
- (void)removeUnusedGroups;
- (void)resetGroupsCache;
- (id)searchResultV2WithDateFilter:(id)a0 scopedSearchIdentifiers:(id)a1 searchResultTypes:(unsigned long long)a2 suggestionType:(unsigned long long)a3;
- (id)statementFromString:(id)a0;
- (id)suggestionWhitelistedScenes;
- (void)unbindMatchingIds;
- (void)unprepareMatchingIds;
- (unsigned long long)updateGroupForText:(id)a0 identifier:(id)a1 category:(short)a2 owningGroupId:(unsigned long long)a3;
- (void)updateRankingScoreForGroups:(id)a0 withCompletion:(id /* block */)a1;
- (id)wordEmbeddingMatchesForToken:(id)a0;

@end
