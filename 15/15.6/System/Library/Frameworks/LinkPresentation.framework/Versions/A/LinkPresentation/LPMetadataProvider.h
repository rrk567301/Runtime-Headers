@class NSTimer, NSString, LPEvent, NSURL, LPFetcherGroup, NSMutableArray, LPMetadataProviderSpecialization, NSURLRequest, LPLinkMetadata, NSObject, LPAnimatedImageTranscoder, WKWebView;
@protocol OS_dispatch_group;

@interface LPMetadataProvider : NSObject <WKNavigationDelegate, LPMetadataProviderSpecializationDelegate> {
    unsigned int _loggingID;
    WKWebView *_webView;
    NSURLRequest *_URLRequest;
    NSURL *_originalURL;
    NSTimer *_watchdog;
    LPEvent *_mainResourceLoadEvent;
    LPEvent *_webProcessLaunchEvent;
    LPLinkMetadata *_metadata;
    char _complete;
    char _fetchingFromExistingWebView;
    char _hasStartedFetching;
    char _hasStartedFetchingMetadataFromWebView;
    char _timedOut;
    char _subresourceFetchIsNonAppInitiated;
    NSObject<OS_dispatch_group> *_subresourceFetchGroup;
    LPFetcherGroup *_iconFetcherGroup;
    LPAnimatedImageTranscoder *_imageTranscoder;
    NSMutableArray *_pendingFetchers;
    long long _specializationState;
    LPMetadataProviderSpecialization *_specializedMetadataProvider;
}

@property (copy, nonatomic) id /* block */ completionHandler;
@property char cancelled;
@property (readonly, nonatomic) LPEvent *_event;
@property (nonatomic) char useSpecializedProviders;
@property (nonatomic) char fetchSubresources;
@property (nonatomic, setter=_setShouldDownloadImageSubresources:) char _shouldDownloadImageSubresources;
@property (nonatomic, setter=_setShouldDownloadMediaSubresources:) char _shouldDownloadMediaSubresources;
@property (nonatomic) unsigned long long allowedSpecializedProviders;
@property (nonatomic) char requirePrivateRelayForAllNetworkTraffic;
@property (copy, nonatomic) NSString *sourceApplicationSecondaryIdentifierForRequiringPrivacyProxyFailingClosed;
@property (nonatomic, setter=_setFetchIsNotUserInitiated:) char _fetchIsNotUserInitiated;
@property (nonatomic) char shouldFetchSubresources;
@property (nonatomic) double timeout;
@property (readonly) unsigned long long hash;
@property (readonly) Class superclass;
@property (readonly, copy) NSString *description;
@property (readonly, copy) NSString *debugDescription;

+ (id)_callbackQueue;
+ (id)_copyDefaultWebViewConfiguration;
+ (id)_defaultUserAgent;
+ (id)_incompleteMetadataRequests;
+ (id)_postProcessingQueue;
+ (id)_requestMetadataForRequest:(id)a0 completionHandler:(id /* block */)a1;
+ (void)_requestSourceApplicationMetadataForBundleIdentifier:(id)a0 completionHandler:(id /* block */)a1;
+ (id)_visionAnalysisQueue;
+ (id)requestMetadataForURL:(id)a0 completionHandler:(id /* block */)a1;
+ (id)requestMetadataForWebView:(id)a0 completionHandler:(id /* block */)a1;

- (void)dealloc;
- (id)init;
- (void).cxx_destruct;
- (void)cancel;
- (void)_completedWithError:(id)a0;
- (void)webView:(id)a0 decidePolicyForNavigationAction:(id)a1 decisionHandler:(id /* block */)a2;
- (void)webView:(id)a0 decidePolicyForNavigationResponse:(id)a1 decisionHandler:(id /* block */)a2;
- (void)webView:(id)a0 didFailNavigation:(id)a1 withError:(id)a2;
- (void)webView:(id)a0 didFailProvisionalNavigation:(id)a1 withError:(id)a2;
- (void)webView:(id)a0 didFinishNavigation:(id)a1;
- (void)webView:(id)a0 didStartProvisionalNavigation:(id)a1;
- (void)webViewWebContentProcessDidTerminate:(id)a0;
- (void)startFetchingMetadataForURL:(id)a0 completionHandler:(id /* block */)a1;
- (void)_setMetadata:(id)a0 onlyUpgradeFields:(char)a1;
- (id)subresourceFetcherConfiguration;
- (void)_cancelDueToTimeout;
- (id)_copyWebViewConfiguration;
- (void)_failedWithErrorCode:(long long)a0 underlyingError:(id)a1;
- (void)_fetchImplicitIcons;
- (void)_fetchMetadataFromWebView;
- (void)_fetchSubresources;
- (void)_fetchedMetadata:(id)a0;
- (void)_filteredUniqueContentImages:(id /* block */)a0;
- (char)_firstImage:(id)a0 isSimilarToSecondImage:(id)a1 usingAnalyzer:(id)a2;
- (void)_generateSpecializationIfPossibleForCompleteMetadata:(id)a0 completionHandler:(id /* block */)a1;
- (void)_internalPostProcessResolvedMetadataWithEvent:(id)a0 completionHandler:(id /* block */)a1;
- (void)_internalStartFetchingMetadataForWebView:(id)a0 isNonAppInitiated:(char)a1 completionHandler:(id /* block */)a2;
- (void)_internalStartFetchingMetadataFromURLRequest;
- (void)_postProcessResolvedMetadataWithEvent:(id)a0 completionHandler:(id /* block */)a1;
- (void)_propagateYouTubeTimestamps;
- (void)_redistinguishImagesAndIcons;
- (char)_shouldFailFetchDueToLockdownModeWithCompletionHandler:(id /* block */)a0;
- (void)_simplifyTitle;
- (id)_startFetchingMetadataForRequest:(id)a0 completionHandler:(id /* block */)a1;
- (id)_startFetchingMetadataForURL:(id)a0 completionHandler:(id /* block */)a1;
- (id)_startFetchingMetadataForWebView:(id)a0 completionHandler:(id /* block */)a1;
- (id)_startFetchingMetadataForWebView:(id)a0 isNonAppInitiated:(char)a1 completionHandler:(id /* block */)a2;
- (void)_startFetchingSubresourcesForPartialMetadata:(id)a0 isNonAppInitiated:(char)a1 completionHandler:(id /* block */)a2;
- (void)_startWatchdogTimer;
- (void)_stopWatchdogTimer;
- (char)_switchToSpecializationIfPossibleForMIMEType:(id)a0 URL:(id)a1 hasLoadedResource:(char)a2;
- (char)_switchToSpecializationIfPossibleForMetadata:(id)a0 URL:(id)a1;
- (char)_switchToSpecializationIfPossibleForURL:(id)a0;
- (void)_willStartFetchingMetadata;
- (void)deduplicateContentImagesWithEvent:(id)a0 inGroup:(id)a1;
- (void)metadataProviderSpecialization:(id)a0 didCompleteWithMetadata:(id)a1;
- (void)metadataProviderSpecialization:(id)a0 didFetchPreliminaryMetadata:(id)a1;
- (void)metadataProviderSpecializationDidFail:(id)a0;
- (void)startFetchingMetadataForRequest:(id)a0 completionHandler:(id /* block */)a1;
- (void)startFetchingMetadataForWebView:(id)a0 completionHandler:(id /* block */)a1;
- (void)startFetchingSubresourcesForPartialMetadata:(id)a0 completionHandler:(id /* block */)a1;

@end
